<!DOCTYPE html>
<html lang="en"><head>
<script src="presentation_interview_files/libs/clipboard/clipboard.min.js"></script>
<script src="presentation_interview_files/libs/quarto-html/tabby.min.js"></script>
<script src="presentation_interview_files/libs/quarto-html/popper.min.js"></script>
<script src="presentation_interview_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="presentation_interview_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="presentation_interview_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="presentation_interview_files/libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.24">

  <meta name="author" content="Dr.&nbsp;Zhuo Qu">
  <meta name="dcterms.date" content="2025-11-17">
  <title>Linear Regression: From Lemonade Stands to Least Squares</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="presentation_interview_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="presentation_interview_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="presentation_interview_files/libs/revealjs/dist/theme/quarto-f4c90c9ef39a97c1e702c9037d342668.css">
  <link href="presentation_interview_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="presentation_interview_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="presentation_interview_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="presentation_interview_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script type="module" src="presentation_interview_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
  <link href="presentation_interview_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
  <script src="presentation_interview_files/libs/quarto-diagram/mermaid.min.js"></script>
  <script src="presentation_interview_files/libs/quarto-diagram/mermaid-init.js"></script>
  <link href="presentation_interview_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Linear Regression: From Lemonade Stands to Least Squares</h1>
  <p class="subtitle">An Interactive Journey Through the Math Behind the Line</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Dr.&nbsp;Zhuo Qu 
</div>
</div>
</div>

  <p class="date">2025-11-17</p>
</section>
<section id="welcome-a-not-so-linear-story" class="slide level2">
<h2>üöÄ Welcome: A <em>Not-So-Linear</em> Story</h2>
<p>Imagine you‚Äôre running a lemonade stand. Business booms when it‚Äôs hot, crashes when it rains, and your friend insists that wearing a yellow T-shirt increases sales.</p>
<p><strong>Goal for today:</strong> Explore regression through storytelling, interactive playgrounds, geometric intuition, and hands-on exercises ‚Äî all inside a <code>.html</code> file (no R/Shiny needed).</p>
</section>
<section id="story-setup-the-lemonade-mystery" class="slide level2">
<h2>üçã Story Setup: The Lemonade Mystery</h2>
<p>Your sales over 30 days depend on:</p>
<ul>
<li class="fragment">Temperature üå°Ô∏è<br>
</li>
<li class="fragment">Rainfall üåßÔ∏è</li>
<li class="fragment">Whether you wore a yellow T-shirt üëï<br>
</li>
<li class="fragment">Random large purchases by kids ü•§</li>
</ul>
<p><strong>Task:</strong> Predict daily sales using temperature and explore slope, intercept, and noise effects interactively.</p>
</section>
<section id="lemonade-sales-data-overview" class="slide level2 scrollable">
<h2>Lemonade Sales Data Overview</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb1" data-startfrom="39" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 38;"><span id="cb1-39"><a href=""></a>lemonadeData <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> <span class="dv">31</span>}<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb1-40"><a href=""></a>  <span class="kw">const</span> day <span class="op">=</span> <span class="vs">`2025-10-</span><span class="sc">${</span>(i<span class="op">+</span><span class="dv">1</span>)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">2</span><span class="op">,</span> <span class="st">'0'</span>)<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb1-41"><a href=""></a>  <span class="kw">const</span> temperature <span class="op">=</span> [<span class="fl">80.5</span><span class="op">,</span><span class="fl">78.2</span><span class="op">,</span><span class="fl">82.1</span><span class="op">,</span><span class="fl">79.5</span><span class="op">,</span><span class="fl">84.0</span><span class="op">,</span><span class="fl">77.3</span><span class="op">,</span><span class="fl">85.2</span><span class="op">,</span><span class="fl">81.8</span><span class="op">,</span><span class="fl">79.0</span><span class="op">,</span><span class="fl">83.4</span><span class="op">,</span><span class="fl">75.9</span><span class="op">,</span><span class="fl">84.6</span><span class="op">,</span><span class="fl">82.5</span><span class="op">,</span><span class="fl">74.7</span><span class="op">,</span><span class="fl">80.2</span><span class="op">,</span><span class="fl">86.1</span><span class="op">,</span><span class="fl">76.4</span><span class="op">,</span><span class="fl">78.8</span><span class="op">,</span><span class="fl">79.9</span><span class="op">,</span><span class="fl">83.1</span><span class="op">,</span><span class="fl">85.7</span><span class="op">,</span><span class="fl">88.4</span><span class="op">,</span><span class="fl">84.2</span><span class="op">,</span><span class="fl">82.7</span><span class="op">,</span><span class="fl">85.0</span><span class="op">,</span><span class="fl">78.5</span><span class="op">,</span><span class="fl">81.2</span><span class="op">,</span><span class="fl">80.0</span><span class="op">,</span><span class="fl">77.8</span><span class="op">,</span><span class="fl">83.9</span><span class="op">,</span><span class="fl">74.0</span>][i]<span class="op">;</span></span>
<span id="cb1-42"><a href=""></a>  <span class="kw">const</span> yellow_tshirt <span class="op">=</span> [<span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="kw">false</span><span class="op">,</span><span class="kw">false</span>][i]<span class="op">;</span></span>
<span id="cb1-43"><a href=""></a>  <span class="kw">const</span> big_purchase <span class="op">=</span> [<span class="dv">10</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">15</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">20</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">10</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">10</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">10</span><span class="op">,</span><span class="dv">15</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">20</span><span class="op">,</span><span class="dv">15</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">0</span>][i]<span class="op">;</span></span>
<span id="cb1-44"><a href=""></a>  </span>
<span id="cb1-45"><a href=""></a>  <span class="kw">let</span> rainfall <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-46"><a href=""></a>  <span class="cf">if</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">&lt;</span> <span class="fl">0.3</span>) {</span>
<span id="cb1-47"><a href=""></a>    <span class="kw">const</span> u1 <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>()<span class="op">;</span></span>
<span id="cb1-48"><a href=""></a>    <span class="kw">const</span> u2 <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>()<span class="op">;</span></span>
<span id="cb1-49"><a href=""></a>    <span class="kw">const</span> z <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(<span class="op">-</span><span class="fl">2.0</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span>(u1)) <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(<span class="fl">2.0</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">*</span> u2)<span class="op">;</span></span>
<span id="cb1-50"><a href=""></a>    rainfall <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span> <span class="op">+</span>(<span class="fl">16.7</span> <span class="op">+</span> <span class="dv">3</span> <span class="op">*</span> z)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>))<span class="op">;</span></span>
<span id="cb1-51"><a href=""></a>  }</span>
<span id="cb1-52"><a href=""></a>  </span>
<span id="cb1-53"><a href=""></a>  <span class="kw">let</span> sales <span class="op">=</span> <span class="dv">40</span> <span class="op">+</span> <span class="fl">0.7</span> <span class="op">*</span> temperature <span class="op">+</span> big_purchase <span class="op">+</span> (yellow_tshirt <span class="op">?</span> <span class="dv">5</span> <span class="op">:</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb1-54"><a href=""></a>  <span class="cf">if</span> (rainfall <span class="op">&gt;</span> <span class="dv">0</span>) sales <span class="op">-=</span> <span class="dv">12</span> <span class="op">+</span> <span class="fl">0.3</span> <span class="op">*</span> rainfall<span class="op">;</span></span>
<span id="cb1-55"><a href=""></a>  </span>
<span id="cb1-56"><a href=""></a>  <span class="kw">const</span> u1_err <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>()<span class="op">;</span></span>
<span id="cb1-57"><a href=""></a>  <span class="kw">const</span> u2_err <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>()<span class="op">;</span></span>
<span id="cb1-58"><a href=""></a>  <span class="kw">const</span> error <span class="op">=</span> <span class="dv">4</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(<span class="op">-</span><span class="fl">2.0</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span>(u1_err)) <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(<span class="fl">2.0</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">*</span> u2_err)<span class="op">;</span></span>
<span id="cb1-59"><a href=""></a>  sales <span class="op">+=</span> error<span class="op">;</span></span>
<span id="cb1-60"><a href=""></a>  sales <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(sales)<span class="op">;</span></span>
<span id="cb1-61"><a href=""></a>  </span>
<span id="cb1-62"><a href=""></a>  <span class="cf">return</span> { day<span class="op">,</span> sales<span class="op">,</span> temperature<span class="op">,</span> rainfall<span class="op">,</span> yellow_tshirt<span class="op">,</span> big_purchase }<span class="op">;</span></span>
<span id="cb1-63"><a href=""></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb2" data-startfrom="66" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 65;"><span id="cb2-66"><a href=""></a>first7Days <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">7</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
<h3 id="the-data-structure">The Data Structure</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb3" data-startfrom="71" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 70;"><span id="cb3-71"><a href=""></a>{</span>
<span id="cb3-72"><a href=""></a>  <span class="kw">const</span> data <span class="op">=</span> first7Days<span class="op">.</span><span class="fu">map</span>((d<span class="op">,</span> i) <span class="kw">=&gt;</span> ({</span>
<span id="cb3-73"><a href=""></a>    <span class="dt">id</span><span class="op">:</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb3-74"><a href=""></a>    <span class="dt">day</span><span class="op">:</span> d<span class="op">.</span><span class="at">day</span><span class="op">,</span></span>
<span id="cb3-75"><a href=""></a>    <span class="dt">sales</span><span class="op">:</span> d<span class="op">.</span><span class="at">sales</span><span class="op">,</span></span>
<span id="cb3-76"><a href=""></a>    <span class="dt">temperature</span><span class="op">:</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span></span>
<span id="cb3-77"><a href=""></a>    <span class="dt">precipitation</span><span class="op">:</span> d<span class="op">.</span><span class="at">rainfall</span><span class="op">,</span></span>
<span id="cb3-78"><a href=""></a>    <span class="dt">yellow_tshirt</span><span class="op">:</span> d<span class="op">.</span><span class="at">yellow_tshirt</span> <span class="op">?</span> <span class="st">"Yes"</span> <span class="op">:</span> <span class="st">"No"</span><span class="op">,</span></span>
<span id="cb3-79"><a href=""></a>    <span class="dt">big_purchase</span><span class="op">:</span> d<span class="op">.</span><span class="at">big_purchase</span></span>
<span id="cb3-80"><a href=""></a>  }))<span class="op">;</span></span>
<span id="cb3-81"><a href=""></a>  <span class="cf">return</span> Inputs<span class="op">.</span><span class="fu">table</span>(data<span class="op">,</span> {</span>
<span id="cb3-82"><a href=""></a>    <span class="dt">columns</span><span class="op">:</span> [<span class="st">"id"</span><span class="op">,</span> <span class="st">"day"</span><span class="op">,</span> <span class="st">"sales"</span><span class="op">,</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="st">"precipitation"</span><span class="op">,</span> <span class="st">"yellow_tshirt"</span><span class="op">,</span> <span class="st">"big_purchase"</span>]<span class="op">,</span></span>
<span id="cb3-83"><a href=""></a>    <span class="dt">header</span><span class="op">:</span> {</span>
<span id="cb3-84"><a href=""></a>      <span class="dt">id</span><span class="op">:</span> <span class="st">"Day #"</span><span class="op">,</span></span>
<span id="cb3-85"><a href=""></a>      <span class="dt">day</span><span class="op">:</span> <span class="st">"Date"</span><span class="op">,</span></span>
<span id="cb3-86"><a href=""></a>      <span class="dt">sales</span><span class="op">:</span> <span class="st">"Sales"</span><span class="op">,</span></span>
<span id="cb3-87"><a href=""></a>      <span class="dt">temperature</span><span class="op">:</span> <span class="st">"Daily Average Temperature (‚àòF)"</span><span class="op">,</span></span>
<span id="cb3-88"><a href=""></a>      <span class="dt">precipitation</span><span class="op">:</span> <span class="st">"Daily accumulated rainfall (mm)"</span><span class="op">,</span></span>
<span id="cb3-89"><a href=""></a>      <span class="dt">yellow_tshirt</span><span class="op">:</span> <span class="st">"Yellow T-shirt"</span><span class="op">,</span></span>
<span id="cb3-90"><a href=""></a>      <span class="dt">big_purchase</span><span class="op">:</span> <span class="st">"Big Purchase"</span></span>
<span id="cb3-91"><a href=""></a>    }</span>
<span id="cb3-92"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb3-93"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb4" data-startfrom="96" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 95;"><span id="cb4-96"><a href=""></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb4-97"><a href=""></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb4-98"><a href=""></a>    Plot<span class="op">.</span><span class="fu">barY</span>(first7Days<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"day"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#FFA500"</span>})</span>
<span id="cb4-99"><a href=""></a>  ]<span class="op">,</span></span>
<span id="cb4-100"><a href=""></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Day"</span>}<span class="op">,</span></span>
<span id="cb4-101"><a href=""></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Number of Lemonades Sold"</span>}<span class="op">,</span></span>
<span id="cb4-102"><a href=""></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Lemonade Sales: First 7 Days"</span></span>
<span id="cb4-103"><a href=""></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="linear-regression-model-mathematical-language" class="slide level2 incremental smaller scrollable">
<h2>üìò Linear Regression Model: Mathematical Language</h2>
<h3 id="mathematical-language"><strong>Mathematical Language</strong></h3>
<p>The simple linear regression model: <span class="math display">\[
y = \beta_0 + \beta_1 x + \varepsilon
\]</span></p>
<h3 id="what-do-y-and-x-mean"><strong>What do <span class="math inline">\(y\)</span> and <span class="math inline">\(x\)</span> mean?</strong></h3>
<ul>
<li class="fragment"><span class="math inline">\(y\)</span> is the <strong>response variable</strong> (outcome, dependent variable)</li>
<li class="fragment"><span class="math inline">\(x\)</span> is the <strong>predictor variable</strong> (explanatory, independent variable)</li>
</ul>
<h3 id="what-do-beta_0-beta_1-and-varepsilon-mean"><strong>What do <span class="math inline">\(\beta_0\)</span>, <span class="math inline">\(\beta_1\)</span>, and <span class="math inline">\(\varepsilon\)</span> mean?</strong></h3>
<ul>
<li class="fragment"><span class="math inline">\(\beta_0\)</span> (intercept): Value of <span class="math inline">\(y\)</span> when <span class="math inline">\(x=0\)</span></li>
<li class="fragment"><span class="math inline">\(\beta_1\)</span> (slope): Change in <span class="math inline">\(y\)</span> for one unit change in <span class="math inline">\(x\)</span></li>
<li class="fragment"><span class="math inline">\(\varepsilon\)</span> (noise): Random error not explained by <span class="math inline">\(x\)</span></li>
</ul>
<h3 id="which-parameters-are-estimated"><strong>Which parameters are estimated?</strong></h3>
<ul>
<li class="fragment"><span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> are <strong>observed</strong> (given in your data)</li>
<li class="fragment"><span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span> are <strong>estimated</strong> from the data</li>
<li class="fragment"><span class="math inline">\(\varepsilon\)</span> represents <strong>unexplained variation</strong> (not directly estimated)</li>
</ul>
</section>
<section id="after-estimation-the-fitted-regression-equation" class="slide level2 incremental scrollable">
<h2>üìò After Estimation: The Fitted Regression Equation</h2>
<p>Once we estimate <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span> from the data, we get the fitted regression equation:</p>
<p><span class="math display">\[
\widehat{y} = \widehat{\beta}_0 + \widehat{\beta}_1 x
\]</span></p>
<p>Where:</p>
<ul>
<li class="fragment"><span class="math inline">\(\widehat{y}\)</span> is the <strong>predicted value</strong> of <span class="math inline">\(y\)</span> for a given <span class="math inline">\(x\)</span></li>
<li class="fragment"><span class="math inline">\(\widehat{\beta}_0\)</span> and <span class="math inline">\(\widehat{\beta}_1\)</span> are the <strong>estimated</strong> intercept and slope</li>
<li class="fragment">The ‚Äúhat‚Äù notation (^) indicates these are estimates, not true population values</li>
</ul>
<p>This equation allows us to make predictions for <span class="math inline">\(y\)</span> using values of <span class="math inline">\(x\)</span> in our data!</p>
</section>
<section id="quick-check-does-widehaty-equal-y" class="slide level2 incremental scrollable">
<h2>‚ùì Quick Check: Does <span class="math inline">\(\widehat{y}\)</span> Equal <span class="math inline">\(y\)</span>?</h2>
<ul>
<li class="fragment"><p><strong>Question:</strong> Is the predicted value <span class="math inline">\(\widehat{y}\)</span> always equal to the observed value <span class="math inline">\(y\)</span>?</p></li>
<li class="fragment"><p><strong>Think about it:</strong> If our model is perfect, would we expect <span class="math inline">\(\widehat{y} = y\)</span> for every observation?</p></li>
<li class="fragment"><p><strong>Answer:</strong> Generally, <strong>no</strong>! There is usually a deviation between <span class="math inline">\(\widehat{y}\)</span> and <span class="math inline">\(y\)</span>.</p></li>
<li class="fragment"><p>This deviation is called the <strong>residual</strong>: <span class="math display">\[
e_i = y_i - \widehat{y}_i
\]</span></p></li>
<li class="fragment"><p>Understanding residuals is key to evaluating how well our model fits the data!</p></li>
</ul>
</section>
<section id="linear-regression-model-lemonade-stand-examples" class="slide level2 incremental scrollable">
<h2>üìò Linear Regression Model: Lemonade Stand Examples</h2>
<p>Let‚Äôs see concrete examples using our lemonade stand data. Each model uses <strong>one predictor</strong> to explain sales:</p>
<ul>
<li class="fragment"><p><strong>1. Sales vs Temperature</strong> üå°Ô∏è <span class="math display">\[
\text{Sales} = \beta_0 + \beta_1 \times \text{Temperature} + \varepsilon
\]</span></p></li>
<li class="fragment"><p>Temperature: average daily temperature in ¬∞F</p></li>
<li class="fragment"><p><span class="math inline">\(\beta_0\)</span>: Expected sales when temperature is 0¬∞F (baseline)</p></li>
<li class="fragment"><p><span class="math inline">\(\beta_1\)</span>: How much do sales change per 1¬∞F increase?</p></li>
<li class="fragment"><p><strong>2. Sales vs Precipitation</strong> üåßÔ∏è <span class="math display">\[
\text{Sales} = \beta_0 + \beta_1 \times \text{Precipitation} + \varepsilon
\]</span></p></li>
<li class="fragment"><p>Precipitation: accumulated daily rainfall in mm</p></li>
<li class="fragment"><p><span class="math inline">\(\beta_0\)</span>: Expected sales when there is no rain (baseline)</p></li>
<li class="fragment"><p><span class="math inline">\(\beta_1\)</span>: How much do sales change per 1mm of rain?</p></li>
</ul>
</section>
<section id="more-lemonade-stand-examples" class="slide level2 incremental scrollable">
<h2>üìò More Lemonade Stand Examples</h2>
<ul>
<li class="fragment"><p><strong>3. Sales vs Yellow T-shirt</strong> üëï <span class="math display">\[
\text{Sales} = \beta_0 + \beta_1 \times \text{YellowTshirt} + \varepsilon
\]</span></p></li>
<li class="fragment"><p>YellowTshirt: 1 if wore yellow shirt, 0 otherwise</p></li>
<li class="fragment"><p><span class="math inline">\(\beta_0\)</span>: Expected sales when <strong>not</strong> wearing yellow shirt (baseline)</p></li>
<li class="fragment"><p><span class="math inline">\(\beta_1\)</span>: Difference in sales with vs without yellow shirt</p></li>
<li class="fragment"><p><strong>4. Sales vs Big Purchases</strong> ü•§ <span class="math display">\[
\text{Sales} = \beta_0 + \beta_1 \times \text{BigPurchase} + \varepsilon
\]</span></p></li>
<li class="fragment"><p>BigPurchase: number of large purchases by kids</p></li>
<li class="fragment"><p><span class="math inline">\(\beta_0\)</span>: Expected sales when there are <strong>no</strong> big purchases (baseline)</p></li>
<li class="fragment"><p><span class="math inline">\(\beta_1\)</span>: How much do sales increase per big purchase?</p></li>
<li class="fragment"><p><strong>Question:</strong> Which predictor do you think has the strongest effect on sales? ü§î</p></li>
</ul>
</section>
<section id="interactive-sales-vs-temperature-regression-playground" class="slide level2 scrollable">
<h2>üü† Interactive: Sales vs Temperature Regression Playground</h2>
<div class="cell panel-input">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb5" data-startfrom="243" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 242;"><span id="cb5-243"><a href=""></a>viewof intercept0 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="op">-</span><span class="dv">10</span><span class="op">,</span><span class="dv">70</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span><span class="dv">40</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span><span class="st">"Intercept (Œ≤‚ÇÄ)"</span>})</span>
<span id="cb5-244"><a href=""></a>viewof slope0 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span><span class="dv">2</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span><span class="fl">0.7</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span><span class="fl">0.01</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span><span class="st">"Slope (Œ≤‚ÇÅ)"</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-5-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb6" data-startfrom="247" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 246;"><span id="cb6-247"><a href=""></a>temp <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">temperature</span>)<span class="op">;</span></span>
<span id="cb6-248"><a href=""></a>sales <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">sales</span>)<span class="op">;</span></span>
<span id="cb6-249"><a href=""></a>observedMin <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="op">...</span>temp)<span class="op">;</span></span>
<span id="cb6-250"><a href=""></a>observedMax <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>temp)<span class="op">;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-6-4" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb7" data-startfrom="252" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 251;"><span id="cb7-252"><a href=""></a>solidLine <span class="op">=</span> {</span>
<span id="cb7-253"><a href=""></a>  <span class="kw">const</span> points <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb7-254"><a href=""></a>  <span class="cf">for</span> (<span class="kw">let</span> t <span class="op">=</span> observedMin<span class="op">;</span> t <span class="op">&lt;=</span> observedMax<span class="op">;</span> t <span class="op">+=</span> <span class="fl">0.1</span>) {</span>
<span id="cb7-255"><a href=""></a>    points<span class="op">.</span><span class="fu">push</span>({<span class="dt">temperature</span><span class="op">:</span> t<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> intercept0 <span class="op">+</span> slope0 <span class="op">*</span> t})<span class="op">;</span></span>
<span id="cb7-256"><a href=""></a>  }</span>
<span id="cb7-257"><a href=""></a>  <span class="cf">return</span> points<span class="op">;</span></span>
<span id="cb7-258"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb8" data-startfrom="261" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 260;"><span id="cb8-261"><a href=""></a>dashedLineLeft <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(</span>
<span id="cb8-262"><a href=""></a>  {<span class="dt">length</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((observedMin <span class="op">-</span> <span class="dv">0</span>) <span class="op">/</span> <span class="fl">0.1</span>)}<span class="op">,</span></span>
<span id="cb8-263"><a href=""></a>  (_<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb8-264"><a href=""></a>    <span class="kw">const</span> t <span class="op">=</span> <span class="dv">0</span> <span class="op">+</span> i <span class="op">*</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb8-265"><a href=""></a>    <span class="cf">return</span> {<span class="dt">temperature</span><span class="op">:</span> t<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> intercept0 <span class="op">+</span> slope0 <span class="op">*</span> t}<span class="op">;</span></span>
<span id="cb8-266"><a href=""></a>  }</span>
<span id="cb8-267"><a href=""></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb9" data-startfrom="270" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 269;"><span id="cb9-270"><a href=""></a>dashedLineRight <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(</span>
<span id="cb9-271"><a href=""></a>  {<span class="dt">length</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">90</span> <span class="op">-</span> observedMax) <span class="op">/</span> <span class="fl">0.1</span>)}<span class="op">,</span></span>
<span id="cb9-272"><a href=""></a>  (_<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb9-273"><a href=""></a>    <span class="kw">const</span> t <span class="op">=</span> observedMax <span class="op">+</span> i <span class="op">*</span> <span class="fl">0.1</span><span class="op">;</span></span>
<span id="cb9-274"><a href=""></a>    <span class="cf">return</span> {<span class="dt">temperature</span><span class="op">:</span> t<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> intercept0 <span class="op">+</span> slope0 <span class="op">*</span> t}<span class="op">;</span></span>
<span id="cb9-275"><a href=""></a>  }</span>
<span id="cb9-276"><a href=""></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb10" data-startfrom="279" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 278;"><span id="cb10-279"><a href=""></a><span class="fu">md</span><span class="vs">`**Try moving the sliders!** See how changing Œ≤‚ÇÄ (intercept) and Œ≤‚ÇÅ (slope) affects the fit line.`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb11" data-startfrom="282" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 281;"><span id="cb11-282"><a href=""></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb11-283"><a href=""></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb11-284"><a href=""></a>    Plot<span class="op">.</span><span class="fu">dot</span>(lemonadeData<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span> <span class="dt">title</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">day</span>})<span class="op">,</span></span>
<span id="cb11-285"><a href=""></a>    Plot<span class="op">.</span><span class="fu">line</span>(solidLine<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#34495e"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span>})<span class="op">,</span></span>
<span id="cb11-286"><a href=""></a>    Plot<span class="op">.</span><span class="fu">line</span>(dashedLineLeft<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#34495e"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"6,4"</span>})<span class="op">,</span></span>
<span id="cb11-287"><a href=""></a>    Plot<span class="op">.</span><span class="fu">line</span>(dashedLineRight<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#34495e"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"6,4"</span>})<span class="op">,</span></span>
<span id="cb11-288"><a href=""></a>    Plot<span class="op">.</span><span class="fu">text</span>([</span>
<span id="cb11-289"><a href=""></a>      {<span class="dt">temperature</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> <span class="dv">120</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="vs">`Sales = </span><span class="sc">${</span>intercept0<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>slope0<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> √ó Temperature`</span>}</span>
<span id="cb11-290"><a href=""></a>    ]<span class="op">,</span> {</span>
<span id="cb11-291"><a href=""></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">18</span><span class="op">,</span> <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#34495e"</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">150</span></span>
<span id="cb11-292"><a href=""></a>    })</span>
<span id="cb11-293"><a href=""></a>  ]<span class="op">,</span></span>
<span id="cb11-294"><a href=""></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">90</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Temperature (¬∞F)"</span>}<span class="op">,</span></span>
<span id="cb11-295"><a href=""></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">130</span>]<span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Number of Lemonades Sold"</span>}<span class="op">,</span></span>
<span id="cb11-296"><a href=""></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">600</span><span class="op">,</span></span>
<span id="cb11-297"><a href=""></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb11-298"><a href=""></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb11-299"><a href=""></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Sales vs Temperature: Adjust the Line!"</span><span class="op">,</span></span>
<span id="cb11-300"><a href=""></a>  <span class="dt">zoom</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb11-301"><a href=""></a>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-11" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="what-is-a-residual" class="slide level2">
<h2>üìä What is a Residual?</h2>
<div class="columns">
<div class="column" style="width:30%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb12" data-startfrom="312" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 311;"><span id="cb12-312"><a href=""></a>viewof selectedPoint <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(</span>
<span id="cb12-313"><a href=""></a>  lemonadeData<span class="op">.</span><span class="fu">map</span>((d<span class="op">,</span> i) <span class="kw">=&gt;</span> i)<span class="op">,</span></span>
<span id="cb12-314"><a href=""></a>  {</span>
<span id="cb12-315"><a href=""></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Select a data point:"</span><span class="op">,</span></span>
<span id="cb12-316"><a href=""></a>    <span class="dt">format</span><span class="op">:</span> i <span class="kw">=&gt;</span> <span class="vs">`Day </span><span class="sc">${</span>i <span class="op">+</span> <span class="dv">1</span><span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span>lemonadeData[i]<span class="op">.</span><span class="at">day</span><span class="sc">}</span><span class="vs">)`</span></span>
<span id="cb12-317"><a href=""></a>  }</span>
<span id="cb12-318"><a href=""></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb13" data-startfrom="321" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 320;"><span id="cb13-321"><a href=""></a>{</span>
<span id="cb13-322"><a href=""></a>  <span class="kw">const</span> point <span class="op">=</span> lemonadeData[selectedPoint]<span class="op">;</span></span>
<span id="cb13-323"><a href=""></a>  <span class="kw">const</span> predicted <span class="op">=</span> <span class="dv">40</span> <span class="op">+</span> <span class="fl">0.7</span> <span class="op">*</span> point<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb13-324"><a href=""></a>  <span class="kw">const</span> residual <span class="op">=</span> point<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> predicted<span class="op">;</span></span>
<span id="cb13-325"><a href=""></a>  </span>
<span id="cb13-326"><a href=""></a>  <span class="cf">return</span> <span class="fu">md</span><span class="vs">`</span></span>
<span id="cb13-327"><a href=""></a><span class="vs">### Definition</span></span>
<span id="cb13-328"><a href=""></a><span class="vs">**Residual** = Observed - Predicted</span></span>
<span id="cb13-329"><a href=""></a></span>
<span id="cb13-330"><a href=""></a><span class="vs">e·µ¢ = y·µ¢ ‚àí ≈∑·µ¢</span></span>
<span id="cb13-331"><a href=""></a></span>
<span id="cb13-332"><a href=""></a><span class="vs">### Example: Day </span><span class="sc">${</span>selectedPoint <span class="op">+</span> <span class="dv">1</span><span class="sc">}</span></span>
<span id="cb13-333"><a href=""></a><span class="vs">- **Observed Sales (y·µ¢)**: </span><span class="sc">${</span>point<span class="op">.</span><span class="at">sales</span><span class="sc">}</span><span class="vs"> lemonades</span></span>
<span id="cb13-334"><a href=""></a><span class="vs">- **Temperature**: </span><span class="sc">${</span>point<span class="op">.</span><span class="at">temperature</span><span class="sc">}</span><span class="vs">¬∞F</span></span>
<span id="cb13-335"><a href=""></a><span class="vs">- **Predicted Sales (≈∑·µ¢)**: </span><span class="sc">${</span>predicted<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs"> lemonades</span></span>
<span id="cb13-336"><a href=""></a><span class="vs">- **Residual (e·µ¢)**: </span><span class="sc">${</span>residual<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs"> lemonades</span></span>
<span id="cb13-337"><a href=""></a></span>
<span id="cb13-338"><a href=""></a><span class="sc">${</span>residual <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="st">'‚úÖ Sold MORE than predicted!'</span> <span class="op">:</span> <span class="st">'‚ùå Sold LESS than predicted!'</span><span class="sc">}</span></span>
<span id="cb13-339"><a href=""></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb13-340"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-13" data-nodetype="expression">

</div>
</div>
</div>
</div><div class="column" style="width:70%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb14" data-startfrom="346" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 345;"><span id="cb14-346"><a href=""></a>{</span>
<span id="cb14-347"><a href=""></a>  <span class="kw">const</span> point <span class="op">=</span> lemonadeData[selectedPoint]<span class="op">;</span></span>
<span id="cb14-348"><a href=""></a>  <span class="kw">const</span> predicted <span class="op">=</span> <span class="dv">40</span> <span class="op">+</span> <span class="fl">0.7</span> <span class="op">*</span> point<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb14-349"><a href=""></a>  </span>
<span id="cb14-350"><a href=""></a>  <span class="cf">return</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb14-351"><a href=""></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb14-352"><a href=""></a>      Plot<span class="op">.</span><span class="fu">dot</span>(</span>
<span id="cb14-353"><a href=""></a>        lemonadeData<span class="op">.</span><span class="fu">filter</span>((_<span class="op">,</span> i) <span class="kw">=&gt;</span> i <span class="op">!==</span> selectedPoint)<span class="op">,</span></span>
<span id="cb14-354"><a href=""></a>        {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span> <span class="dt">opacity</span><span class="op">:</span> <span class="fl">0.3</span>}</span>
<span id="cb14-355"><a href=""></a>      )<span class="op">,</span></span>
<span id="cb14-356"><a href=""></a>      Plot<span class="op">.</span><span class="fu">dot</span>(</span>
<span id="cb14-357"><a href=""></a>        [point]<span class="op">,</span></span>
<span id="cb14-358"><a href=""></a>        {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">8</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#c0392b"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>}</span>
<span id="cb14-359"><a href=""></a>      )<span class="op">,</span></span>
<span id="cb14-360"><a href=""></a>      Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb14-361"><a href=""></a>        [{<span class="dt">temperature</span><span class="op">:</span> <span class="dv">74</span><span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> <span class="dv">40</span> <span class="op">+</span> <span class="fl">0.7</span> <span class="op">*</span> <span class="dv">74</span>}<span class="op">,</span> {<span class="dt">temperature</span><span class="op">:</span> <span class="dv">89</span><span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> <span class="dv">40</span> <span class="op">+</span> <span class="fl">0.7</span> <span class="op">*</span> <span class="dv">89</span>}]<span class="op">,</span></span>
<span id="cb14-362"><a href=""></a>        {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#34495e"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>}</span>
<span id="cb14-363"><a href=""></a>      )<span class="op">,</span></span>
<span id="cb14-364"><a href=""></a>      Plot<span class="op">.</span><span class="fu">link</span>(</span>
<span id="cb14-365"><a href=""></a>        [{</span>
<span id="cb14-366"><a href=""></a>          <span class="dt">x1</span><span class="op">:</span> point<span class="op">.</span><span class="at">temperature</span><span class="op">,</span></span>
<span id="cb14-367"><a href=""></a>          <span class="dt">y1</span><span class="op">:</span> point<span class="op">.</span><span class="at">sales</span><span class="op">,</span></span>
<span id="cb14-368"><a href=""></a>          <span class="dt">x2</span><span class="op">:</span> point<span class="op">.</span><span class="at">temperature</span><span class="op">,</span></span>
<span id="cb14-369"><a href=""></a>          <span class="dt">y2</span><span class="op">:</span> predicted</span>
<span id="cb14-370"><a href=""></a>        }]<span class="op">,</span></span>
<span id="cb14-371"><a href=""></a>        {</span>
<span id="cb14-372"><a href=""></a>          <span class="dt">x1</span><span class="op">:</span> <span class="st">"x1"</span><span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="st">"y1"</span><span class="op">,</span> <span class="dt">x2</span><span class="op">:</span> <span class="st">"x2"</span><span class="op">,</span> <span class="dt">y2</span><span class="op">:</span> <span class="st">"y2"</span><span class="op">,</span></span>
<span id="cb14-373"><a href=""></a>          <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span></span>
<span id="cb14-374"><a href=""></a>          <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb14-375"><a href=""></a>          <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"5,5"</span><span class="op">,</span></span>
<span id="cb14-376"><a href=""></a>          <span class="dt">markerEnd</span><span class="op">:</span> <span class="st">"arrow"</span></span>
<span id="cb14-377"><a href=""></a>        }</span>
<span id="cb14-378"><a href=""></a>      )<span class="op">,</span></span>
<span id="cb14-379"><a href=""></a>      Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb14-380"><a href=""></a>        [{</span>
<span id="cb14-381"><a href=""></a>          <span class="dt">temperature</span><span class="op">:</span> point<span class="op">.</span><span class="at">temperature</span><span class="op">,</span></span>
<span id="cb14-382"><a href=""></a>          <span class="dt">sales</span><span class="op">:</span> (point<span class="op">.</span><span class="at">sales</span> <span class="op">+</span> predicted) <span class="op">/</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb14-383"><a href=""></a>          <span class="dt">text</span><span class="op">:</span> <span class="vs">`e·µ¢ = </span><span class="sc">${</span>(point<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> predicted)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb14-384"><a href=""></a>        }]<span class="op">,</span></span>
<span id="cb14-385"><a href=""></a>        {</span>
<span id="cb14-386"><a href=""></a>          <span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span></span>
<span id="cb14-387"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span></span>
<span id="cb14-388"><a href=""></a>          <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span></span>
<span id="cb14-389"><a href=""></a>          <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">16</span><span class="op">,</span></span>
<span id="cb14-390"><a href=""></a>          <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span></span>
<span id="cb14-391"><a href=""></a>          <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span></span>
<span id="cb14-392"><a href=""></a>          <span class="dt">dx</span><span class="op">:</span> <span class="dv">10</span></span>
<span id="cb14-393"><a href=""></a>        }</span>
<span id="cb14-394"><a href=""></a>      )<span class="op">,</span></span>
<span id="cb14-395"><a href=""></a>      Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb14-396"><a href=""></a>        [{</span>
<span id="cb14-397"><a href=""></a>          <span class="dt">temperature</span><span class="op">:</span> point<span class="op">.</span><span class="at">temperature</span><span class="op">,</span></span>
<span id="cb14-398"><a href=""></a>          <span class="dt">sales</span><span class="op">:</span> point<span class="op">.</span><span class="at">sales</span><span class="op">,</span></span>
<span id="cb14-399"><a href=""></a>          <span class="dt">text</span><span class="op">:</span> <span class="vs">`(x·µ¢=</span><span class="sc">${</span>point<span class="op">.</span><span class="at">temperature</span><span class="sc">}</span><span class="vs">, y·µ¢=</span><span class="sc">${</span>point<span class="op">.</span><span class="at">sales</span><span class="sc">}</span><span class="vs">)`</span></span>
<span id="cb14-400"><a href=""></a>        }]<span class="op">,</span></span>
<span id="cb14-401"><a href=""></a>        {</span>
<span id="cb14-402"><a href=""></a>          <span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span></span>
<span id="cb14-403"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span></span>
<span id="cb14-404"><a href=""></a>          <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span></span>
<span id="cb14-405"><a href=""></a>          <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">16</span><span class="op">,</span></span>
<span id="cb14-406"><a href=""></a>          <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span></span>
<span id="cb14-407"><a href=""></a>          <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">14</span></span>
<span id="cb14-408"><a href=""></a>        }</span>
<span id="cb14-409"><a href=""></a>      )<span class="op">,</span></span>
<span id="cb14-410"><a href=""></a>      Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb14-411"><a href=""></a>        [{</span>
<span id="cb14-412"><a href=""></a>          <span class="dt">temperature</span><span class="op">:</span> point<span class="op">.</span><span class="at">temperature</span><span class="op">,</span></span>
<span id="cb14-413"><a href=""></a>          <span class="dt">sales</span><span class="op">:</span> predicted<span class="op">,</span></span>
<span id="cb14-414"><a href=""></a>          <span class="dt">text</span><span class="op">:</span> <span class="vs">`(x·µ¢=</span><span class="sc">${</span>point<span class="op">.</span><span class="at">temperature</span><span class="sc">}</span><span class="vs">, ≈∑·µ¢=</span><span class="sc">${</span>predicted<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs">)`</span></span>
<span id="cb14-415"><a href=""></a>        }]<span class="op">,</span></span>
<span id="cb14-416"><a href=""></a>        {</span>
<span id="cb14-417"><a href=""></a>          <span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span></span>
<span id="cb14-418"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span></span>
<span id="cb14-419"><a href=""></a>          <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span></span>
<span id="cb14-420"><a href=""></a>          <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">16</span><span class="op">,</span></span>
<span id="cb14-421"><a href=""></a>          <span class="dt">fill</span><span class="op">:</span> <span class="st">"#34495e"</span><span class="op">,</span></span>
<span id="cb14-422"><a href=""></a>          <span class="dt">dy</span><span class="op">:</span> <span class="dv">14</span></span>
<span id="cb14-423"><a href=""></a>        }</span>
<span id="cb14-424"><a href=""></a>      )</span>
<span id="cb14-425"><a href=""></a>    ]<span class="op">,</span></span>
<span id="cb14-426"><a href=""></a>    <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Temperature (¬∞F)"</span>}<span class="op">,</span></span>
<span id="cb14-427"><a href=""></a>    <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Sales"</span>}<span class="op">,</span></span>
<span id="cb14-428"><a href=""></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">700</span><span class="op">,</span></span>
<span id="cb14-429"><a href=""></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">600</span><span class="op">,</span></span>
<span id="cb14-430"><a href=""></a>    <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb14-431"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb14-432"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="expression">

</div>
</div>
</div>
</div></div>
</section>
<section id="quick-check-understanding-residuals" class="slide level2 incremental">
<h2>‚ùì Quick Check: Understanding Residuals</h2>
<p><strong>Question:</strong> If a data point has a residual of -5 (observed-predicted=-5), what does this mean?</p>
<ul>
<li class="fragment"><p>(a)The model overpredicted by 5 units<br>
</p></li>
<li class="fragment"><p>(b)The model underpredicted by 5 units<br>
</p></li>
<li class="fragment"><p>(c)The observed value is 5 units below the regression line<br>
</p></li>
<li class="fragment"><p>(d)Both a and c are correct</p></li>
<li class="fragment"><p><strong>Answer:</strong> <strong>(d) Both a and c are correct</strong></p></li>
<li class="fragment"><p>Since <span class="math inline">\(e_i = y_i - \widehat{y}_i = -5\)</span>, this means the actual value is 5 units <strong>below</strong> the predicted value (the model overestimated).</p></li>
</ul>
</section>
<section id="loss-functions-why-square-the-residuals" class="slide level2 incremental scrollable">
<h2>üìê Loss Functions: Why Square the Residuals?</h2>
<h3 id="sum-of-squared-errors-sse"><strong>Sum of Squared Errors (SSE)</strong></h3>
<p><span class="math display">\[
\text{SSE} = \sum_{i=1}^n (y_i - \widehat{y}_i)^2 = \sum_{i=1}^n e_i^2
\]</span></p>
<ul>
<li class="fragment"><p><strong>Question:</strong> Why do we square the residuals instead of just summing them? ü§î</p></li>
<li class="fragment"><p><strong>Think about it:</strong> What would happen if we just summed <span class="math inline">\(\sum e_i\)</span> without squaring?</p></li>
<li class="fragment"><p><strong>Answer:</strong></p></li>
<li class="fragment"><p>Positive and negative residuals would cancel out!</p></li>
<li class="fragment"><p>Squaring ensures all residuals contribute positively</p></li>
<li class="fragment"><p>Larger errors are penalized more heavily (a 10-unit error contributes 100 to SSE)</p></li>
</ul>
</section>
<section id="sse-finding-the-optimal-line" class="slide level2 incremental scrollable">
<h2>üìê SSE: Finding the Optimal Line</h2>
<p>To find the optimal intercept <span class="math inline">\(\beta_0\)</span> and slope <span class="math inline">\(\beta_1\)</span>, we minimize SSE:</p>
<p><span class="math display">\[
\min_{\beta_0,\beta_1} \sum_{i=1}^n (y_i - \beta_0 - \beta_1 x_i)^2
\]</span></p>
<p>Take partial derivatives and set to zero: <span class="math display">\[
\frac{\partial SSE}{\partial \beta_0} = -2 \sum_{i=1}^n (y_i - \beta_0 - \beta_1 x_i) = 0
\]</span> <span class="math display">\[
\frac{\partial SSE}{\partial \beta_1} = -2 \sum_{i=1}^n x_i (y_i - \beta_0 - \beta_1 x_i) = 0
\]</span></p>
<p>Solving these equations gives the <strong>closed-form solution</strong>: <span class="math display">\[
\widehat{\beta}_1 = \frac{\sum_{i=1}^n (x_i - \bar{x})(y_i - \bar{y})}{\sum_{i=1}^n (x_i - \bar{x})^2}, \quad \widehat{\beta}_0 = \bar{y} - \widehat{\beta}_1 \bar{x}
\]</span></p>
<p>Where <span class="math inline">\(\bar{x}\)</span> and <span class="math inline">\(\bar{y}\)</span> are the <strong>sample means</strong>: <span class="math display">\[
\bar{x} = \frac{1}{n} \sum_{i=1}^n x_i, \qquad \bar{y} = \frac{1}{n} \sum_{i=1}^n y_i
\]</span></p>
<p><strong>Key insight:</strong> The OLS regression line always passes through the point <span class="math inline">\((\bar{x}, \bar{y})\)</span>!</p>
</section>
<section id="alternative-loss-functions" class="slide level2 incremental scrollable">
<h2>üìê Alternative Loss Functions</h2>
<h3 id="sum-of-absolute-errors-sae"><strong>Sum of Absolute Errors (SAE)</strong></h3>
<p><span class="math display">\[
\text{SAE} = \sum_{i=1}^n |y_i - \widehat{y}_i|
\]</span></p>
<ul>
<li class="fragment"><p><strong>Question:</strong> Why would SAE be more robust to outliers than SSE? ü§î</p></li>
<li class="fragment"><p><strong>Answer:</strong></p></li>
<li class="fragment"><p>SAE grows linearly with error size</p></li>
<li class="fragment"><p>SSE grows quadratically (squares the error)</p></li>
<li class="fragment"><p>Example: 10-unit error contributes 10 to SAE but 100 to SSE!</p></li>
<li class="fragment"><p><strong>Challenge:</strong> Unlike SSE, there‚Äôs <strong>no closed-form solution</strong> for SAE</p></li>
<li class="fragment"><p>Must use numerical optimization (linear programming)</p></li>
<li class="fragment"><p>Optimal line passes through the median</p></li>
</ul>
</section>
<section id="sum-of-raw-errors---the-problem-child" class="slide level2 incremental scrollable">
<h2>üìê Sum of Raw Errors - The Problem Child</h2>
<h3 id="sum-of-raw-errors-sre"><strong>Sum of Raw Errors (SRE)</strong></h3>
<p><span class="math display">\[
\text{SRE} = \sum_{i=1}^n (y_i - \widehat{y}_i)
\]</span></p>
<ul>
<li class="fragment"><p><strong>Question:</strong> What‚Äôs the problem with this loss function? Think about positive and negative residuals‚Ä¶ ü§î</p></li>
<li class="fragment"><p><strong>Answer:</strong></p></li>
<li class="fragment"><p>Positive and negative residuals <strong>cancel out</strong>!</p></li>
<li class="fragment"><p>Any line through <span class="math inline">\((\bar{x}, \bar{y})\)</span> has SRE ‚âà 0</p></li>
<li class="fragment"><p>Result: <strong>Infinite solutions</strong> - completely useless!</p></li>
<li class="fragment"><p>For any slope <span class="math inline">\(\beta_1\)</span>, we can choose <span class="math inline">\(\beta_0 = \bar{y} - \beta_1 \bar{x}\)</span> to make SRE = 0.</p></li>
</ul>
</section>
<section id="comparing-different-loss-functions" class="slide level2 scrollable">
<h2>üéØ Comparing Different Loss Functions</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Sum of Squared Errors (SSE)</a></li><li><a href="#tabset-1-2">Sum of Absolute Errors (SAE)</a></li><li><a href="#tabset-1-3">Sum of Raw Error (SRE)</a></li><li><a href="#tabset-1-4">Comparison of All Methods</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb15" data-startfrom="571" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 570;"><span id="cb15-571"><a href=""></a>ssrCalcs <span class="op">=</span> {</span>
<span id="cb15-572"><a href=""></a>  <span class="kw">const</span> n <span class="op">=</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb15-573"><a href=""></a>  <span class="kw">const</span> meanTemp <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb15-574"><a href=""></a>  <span class="kw">const</span> meanSales <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">sales</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb15-575"><a href=""></a>  </span>
<span id="cb15-576"><a href=""></a>  <span class="kw">let</span> numerator <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb15-577"><a href=""></a>  <span class="kw">let</span> denominator <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb15-578"><a href=""></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb15-579"><a href=""></a>    numerator <span class="op">+=</span> (lemonadeData[i]<span class="op">.</span><span class="at">temperature</span> <span class="op">-</span> meanTemp) <span class="op">*</span> (lemonadeData[i]<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> meanSales)<span class="op">;</span></span>
<span id="cb15-580"><a href=""></a>    denominator <span class="op">+=</span> (lemonadeData[i]<span class="op">.</span><span class="at">temperature</span> <span class="op">-</span> meanTemp) <span class="op">**</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb15-581"><a href=""></a>  }</span>
<span id="cb15-582"><a href=""></a>  </span>
<span id="cb15-583"><a href=""></a>  <span class="kw">const</span> slope <span class="op">=</span> numerator <span class="op">/</span> denominator<span class="op">;</span></span>
<span id="cb15-584"><a href=""></a>  <span class="kw">const</span> intercept <span class="op">=</span> meanSales <span class="op">-</span> slope <span class="op">*</span> meanTemp<span class="op">;</span></span>
<span id="cb15-585"><a href=""></a>  </span>
<span id="cb15-586"><a href=""></a>  <span class="kw">const</span> ssr <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> {</span>
<span id="cb15-587"><a href=""></a>    <span class="kw">const</span> pred <span class="op">=</span> intercept <span class="op">+</span> slope <span class="op">*</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb15-588"><a href=""></a>    <span class="cf">return</span> sum <span class="op">+</span> (d<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> pred) <span class="op">**</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb15-589"><a href=""></a>  }<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb15-590"><a href=""></a>  </span>
<span id="cb15-591"><a href=""></a>  <span class="cf">return</span> { slope<span class="op">,</span> intercept<span class="op">,</span> ssr }<span class="op">;</span></span>
<span id="cb15-592"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb16" data-startfrom="595" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 594;"><span id="cb16-595"><a href=""></a><span class="fu">md</span><span class="vs">`**Minimizes SSE**: Œ£(y·µ¢ - ≈∑·µ¢)¬≤</span></span>
<span id="cb16-596"><a href=""></a></span>
<span id="cb16-597"><a href=""></a><span class="vs">**Optimal Line**: Sales = </span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">intercept</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs"> √ó Temperature</span></span>
<span id="cb16-598"><a href=""></a></span>
<span id="cb16-599"><a href=""></a><span class="vs">**SSE**: </span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">ssr</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span></span>
<span id="cb16-600"><a href=""></a></span>
<span id="cb16-601"><a href=""></a><span class="vs">**Characteristic**: Heavily penalizes large errors (outliers have big impact)`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-16" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb17" data-startfrom="604" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 603;"><span id="cb17-604"><a href=""></a>{</span>
<span id="cb17-605"><a href=""></a>  <span class="kw">const</span> temps <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">temperature</span>)<span class="op">;</span></span>
<span id="cb17-606"><a href=""></a>  <span class="kw">const</span> minTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb17-607"><a href=""></a>  <span class="kw">const</span> maxTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb17-608"><a href=""></a>  <span class="kw">const</span> fittedLine <span class="op">=</span> [</span>
<span id="cb17-609"><a href=""></a>    {<span class="dt">temperature</span><span class="op">:</span> minTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> ssrCalcs<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> ssrCalcs<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> minTemp}<span class="op">,</span></span>
<span id="cb17-610"><a href=""></a>    {<span class="dt">temperature</span><span class="op">:</span> maxTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> ssrCalcs<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> ssrCalcs<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> maxTemp}</span>
<span id="cb17-611"><a href=""></a>  ]<span class="op">;</span></span>
<span id="cb17-612"><a href=""></a></span>
<span id="cb17-613"><a href=""></a>  <span class="cf">return</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb17-614"><a href=""></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb17-615"><a href=""></a>      Plot<span class="op">.</span><span class="fu">dot</span>(lemonadeData<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span>})<span class="op">,</span></span>
<span id="cb17-616"><a href=""></a>      Plot<span class="op">.</span><span class="fu">line</span>(fittedLine<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#3498db"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span>})<span class="op">,</span></span>
<span id="cb17-617"><a href=""></a>      <span class="co">// Add formula annotation</span></span>
<span id="cb17-618"><a href=""></a>      Plot<span class="op">.</span><span class="fu">text</span>([</span>
<span id="cb17-619"><a href=""></a>        {</span>
<span id="cb17-620"><a href=""></a>          <span class="dt">temperature</span><span class="op">:</span> minTemp <span class="op">+</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb17-621"><a href=""></a>          <span class="dt">sales</span><span class="op">:</span> ssrCalcs<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> ssrCalcs<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> (minTemp <span class="op">+</span> <span class="dv">2</span>) <span class="op">+</span> <span class="dv">8</span><span class="op">,</span></span>
<span id="cb17-622"><a href=""></a>          <span class="dt">text</span><span class="op">:</span> <span class="vs">`Minimize SSE: y = </span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">intercept</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs"> √ó Temp`</span></span>
<span id="cb17-623"><a href=""></a>        }</span>
<span id="cb17-624"><a href=""></a>      ]<span class="op">,</span> {</span>
<span id="cb17-625"><a href=""></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span> </span>
<span id="cb17-626"><a href=""></a>        <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">13</span><span class="op">,</span> <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#3498db"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span></span>
<span id="cb17-627"><a href=""></a>      })</span>
<span id="cb17-628"><a href=""></a>    ]<span class="op">,</span></span>
<span id="cb17-629"><a href=""></a>    <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Temperature (¬∞F)"</span>}<span class="op">,</span></span>
<span id="cb17-630"><a href=""></a>    <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Sales"</span>}<span class="op">,</span></span>
<span id="cb17-631"><a href=""></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">700</span><span class="op">,</span></span>
<span id="cb17-632"><a href=""></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb17-633"><a href=""></a>    <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb17-634"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb17-635"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-17" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb18" data-startfrom="641" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 640;"><span id="cb18-641"><a href=""></a>sarCalcs <span class="op">=</span> {</span>
<span id="cb18-642"><a href=""></a>  <span class="kw">const</span> slope <span class="op">=</span> <span class="fl">0.65</span><span class="op">;</span></span>
<span id="cb18-643"><a href=""></a>  <span class="kw">const</span> intercept <span class="op">=</span> <span class="dv">45</span><span class="op">;</span></span>
<span id="cb18-644"><a href=""></a>  </span>
<span id="cb18-645"><a href=""></a>  <span class="kw">const</span> sar <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> {</span>
<span id="cb18-646"><a href=""></a>    <span class="kw">const</span> pred <span class="op">=</span> intercept <span class="op">+</span> slope <span class="op">*</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb18-647"><a href=""></a>    <span class="cf">return</span> sum <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(d<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> pred)<span class="op">;</span></span>
<span id="cb18-648"><a href=""></a>  }<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb18-649"><a href=""></a>  </span>
<span id="cb18-650"><a href=""></a>  <span class="cf">return</span> { slope<span class="op">,</span> intercept<span class="op">,</span> sar }<span class="op">;</span></span>
<span id="cb18-651"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-18" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb19" data-startfrom="654" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 653;"><span id="cb19-654"><a href=""></a><span class="fu">md</span><span class="vs">`**Minimizes SAE**: Œ£|y·µ¢ - ≈∑·µ¢|</span></span>
<span id="cb19-655"><a href=""></a></span>
<span id="cb19-656"><a href=""></a><span class="vs">**Optimal Line**: Sales ‚âà </span><span class="sc">${</span>sarCalcs<span class="op">.</span><span class="at">intercept</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>sarCalcs<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs"> √ó Temperature</span></span>
<span id="cb19-657"><a href=""></a></span>
<span id="cb19-658"><a href=""></a><span class="vs">**SAE**: </span><span class="sc">${</span>sarCalcs<span class="op">.</span><span class="at">sar</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span></span>
<span id="cb19-659"><a href=""></a></span>
<span id="cb19-660"><a href=""></a><span class="vs">**Characteristic**: More robust to outliers (median regression)`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-19" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb20" data-startfrom="663" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 662;"><span id="cb20-663"><a href=""></a>{</span>
<span id="cb20-664"><a href=""></a>  <span class="kw">const</span> temps <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">temperature</span>)<span class="op">;</span></span>
<span id="cb20-665"><a href=""></a>  <span class="kw">const</span> minTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb20-666"><a href=""></a>  <span class="kw">const</span> maxTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb20-667"><a href=""></a>  <span class="kw">const</span> fittedLine <span class="op">=</span> [</span>
<span id="cb20-668"><a href=""></a>    {<span class="dt">temperature</span><span class="op">:</span> minTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> sarCalcs<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> sarCalcs<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> minTemp}<span class="op">,</span></span>
<span id="cb20-669"><a href=""></a>    {<span class="dt">temperature</span><span class="op">:</span> maxTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> sarCalcs<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> sarCalcs<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> maxTemp}</span>
<span id="cb20-670"><a href=""></a>  ]<span class="op">;</span></span>
<span id="cb20-671"><a href=""></a></span>
<span id="cb20-672"><a href=""></a>  <span class="cf">return</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb20-673"><a href=""></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb20-674"><a href=""></a>      Plot<span class="op">.</span><span class="fu">dot</span>(lemonadeData<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span>})<span class="op">,</span></span>
<span id="cb20-675"><a href=""></a>      Plot<span class="op">.</span><span class="fu">line</span>(fittedLine<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#2ecc71"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span>})<span class="op">,</span></span>
<span id="cb20-676"><a href=""></a>      <span class="co">// Add formula annotation</span></span>
<span id="cb20-677"><a href=""></a>      Plot<span class="op">.</span><span class="fu">text</span>([</span>
<span id="cb20-678"><a href=""></a>        {</span>
<span id="cb20-679"><a href=""></a>          <span class="dt">temperature</span><span class="op">:</span> minTemp <span class="op">+</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb20-680"><a href=""></a>          <span class="dt">sales</span><span class="op">:</span> sarCalcs<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> sarCalcs<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> (minTemp <span class="op">+</span> <span class="dv">2</span>) <span class="op">+</span> <span class="dv">8</span><span class="op">,</span></span>
<span id="cb20-681"><a href=""></a>          <span class="dt">text</span><span class="op">:</span> <span class="vs">`Minimize SAE: y = </span><span class="sc">${</span>sarCalcs<span class="op">.</span><span class="at">intercept</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>sarCalcs<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs"> √ó Temp`</span></span>
<span id="cb20-682"><a href=""></a>        }</span>
<span id="cb20-683"><a href=""></a>      ]<span class="op">,</span> {</span>
<span id="cb20-684"><a href=""></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span> </span>
<span id="cb20-685"><a href=""></a>        <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">13</span><span class="op">,</span> <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#2ecc71"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span></span>
<span id="cb20-686"><a href=""></a>      })</span>
<span id="cb20-687"><a href=""></a>    ]<span class="op">,</span></span>
<span id="cb20-688"><a href=""></a>    <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Temperature (¬∞F)"</span>}<span class="op">,</span></span>
<span id="cb20-689"><a href=""></a>    <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Sales"</span>}<span class="op">,</span></span>
<span id="cb20-690"><a href=""></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">700</span><span class="op">,</span></span>
<span id="cb20-691"><a href=""></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb20-692"><a href=""></a>    <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb20-693"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb20-694"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-20" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div id="tabset-1-3">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb21" data-startfrom="699" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 698;"><span id="cb21-699"><a href=""></a>{</span>
<span id="cb21-700"><a href=""></a>  <span class="kw">const</span> n <span class="op">=</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb21-701"><a href=""></a>  <span class="kw">const</span> meanTemp <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb21-702"><a href=""></a>  <span class="kw">const</span> meanSales <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">sales</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb21-703"><a href=""></a>  </span>
<span id="cb21-704"><a href=""></a>  <span class="cf">return</span> <span class="fu">md</span><span class="vs">`**Minimizes SRE**: Œ£(y·µ¢ - ≈∑·µ¢)</span></span>
<span id="cb21-705"><a href=""></a></span>
<span id="cb21-706"><a href=""></a><span class="vs">**Problem**: This doesn't work! ‚ö†Ô∏è</span></span>
<span id="cb21-707"><a href=""></a></span>
<span id="cb21-708"><a href=""></a><span class="vs">**Why?** Positive and negative residuals cancel out. Any line through the centroid (xÃÑ = </span><span class="sc">${</span>meanTemp<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">¬∞F, »≥ = </span><span class="sc">${</span>meanSales<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">) has SRE ‚âà 0.</span></span>
<span id="cb21-709"><a href=""></a></span>
<span id="cb21-710"><a href=""></a><span class="vs">**Result**: Infinite solutions - not useful for finding the "best" fit!`</span><span class="op">;</span></span>
<span id="cb21-711"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-21" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb22" data-startfrom="714" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 713;"><span id="cb22-714"><a href=""></a>{</span>
<span id="cb22-715"><a href=""></a>  <span class="kw">const</span> n <span class="op">=</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb22-716"><a href=""></a>  <span class="kw">const</span> meanTemp <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb22-717"><a href=""></a>  <span class="kw">const</span> meanSales <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">sales</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb22-718"><a href=""></a>  <span class="kw">const</span> slopes <span class="op">=</span> [<span class="fl">0.3</span><span class="op">,</span> <span class="fl">0.65</span><span class="op">,</span> <span class="fl">1.0</span>]<span class="op">;</span></span>
<span id="cb22-719"><a href=""></a>  <span class="kw">const</span> temps <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">temperature</span>)<span class="op">;</span></span>
<span id="cb22-720"><a href=""></a>  <span class="kw">const</span> minTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb22-721"><a href=""></a>  <span class="kw">const</span> maxTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb22-722"><a href=""></a>  </span>
<span id="cb22-723"><a href=""></a>  <span class="cf">return</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb22-724"><a href=""></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb22-725"><a href=""></a>      Plot<span class="op">.</span><span class="fu">dot</span>(lemonadeData<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span>})<span class="op">,</span></span>
<span id="cb22-726"><a href=""></a>      <span class="co">// Highlight the centroid point</span></span>
<span id="cb22-727"><a href=""></a>      Plot<span class="op">.</span><span class="fu">dot</span>(</span>
<span id="cb22-728"><a href=""></a>        [{<span class="dt">temperature</span><span class="op">:</span> meanTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> meanSales}]<span class="op">,</span></span>
<span id="cb22-729"><a href=""></a>        {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">8</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#c0392b"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>}</span>
<span id="cb22-730"><a href=""></a>      )<span class="op">,</span></span>
<span id="cb22-731"><a href=""></a>      <span class="co">// Add text annotation for centroid</span></span>
<span id="cb22-732"><a href=""></a>      Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb22-733"><a href=""></a>        [{<span class="dt">temperature</span><span class="op">:</span> meanTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> meanSales<span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="vs">`(xÃÑ=</span><span class="sc">${</span>meanTemp<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs">, »≥=</span><span class="sc">${</span>meanSales<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs">)`</span>}]<span class="op">,</span></span>
<span id="cb22-734"><a href=""></a>        {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">14</span><span class="op">,</span> <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">15</span>}</span>
<span id="cb22-735"><a href=""></a>      )<span class="op">,</span></span>
<span id="cb22-736"><a href=""></a>      <span class="op">...</span>slopes<span class="op">.</span><span class="fu">map</span>((slope<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb22-737"><a href=""></a>        <span class="kw">const</span> intercept <span class="op">=</span> meanSales <span class="op">-</span> slope <span class="op">*</span> meanTemp<span class="op">;</span></span>
<span id="cb22-738"><a href=""></a>        <span class="cf">return</span> Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb22-739"><a href=""></a>          [</span>
<span id="cb22-740"><a href=""></a>            {<span class="dt">temperature</span><span class="op">:</span> minTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> intercept <span class="op">+</span> slope <span class="op">*</span> minTemp}<span class="op">,</span></span>
<span id="cb22-741"><a href=""></a>            {<span class="dt">temperature</span><span class="op">:</span> maxTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> intercept <span class="op">+</span> slope <span class="op">*</span> maxTemp}</span>
<span id="cb22-742"><a href=""></a>          ]<span class="op">,</span></span>
<span id="cb22-743"><a href=""></a>          {</span>
<span id="cb22-744"><a href=""></a>            <span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> </span>
<span id="cb22-745"><a href=""></a>            <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> </span>
<span id="cb22-746"><a href=""></a>            <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#95a5a6"</span><span class="op">,</span> </span>
<span id="cb22-747"><a href=""></a>            <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb22-748"><a href=""></a>            <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"5,5"</span><span class="op">,</span></span>
<span id="cb22-749"><a href=""></a>            <span class="dt">opacity</span><span class="op">:</span> <span class="fl">0.6</span></span>
<span id="cb22-750"><a href=""></a>          }</span>
<span id="cb22-751"><a href=""></a>        )<span class="op">;</span></span>
<span id="cb22-752"><a href=""></a>      })<span class="op">,</span></span>
<span id="cb22-753"><a href=""></a>      <span class="co">// Add annotation showing one example</span></span>
<span id="cb22-754"><a href=""></a>      Plot<span class="op">.</span><span class="fu">text</span>([</span>
<span id="cb22-755"><a href=""></a>        {</span>
<span id="cb22-756"><a href=""></a>          <span class="dt">temperature</span><span class="op">:</span> minTemp <span class="op">+</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb22-757"><a href=""></a>          <span class="dt">sales</span><span class="op">:</span> (meanSales <span class="op">-</span> slopes[<span class="dv">1</span>] <span class="op">*</span> meanTemp) <span class="op">+</span> slopes[<span class="dv">1</span>] <span class="op">*</span> (minTemp <span class="op">+</span> <span class="dv">2</span>) <span class="op">+</span> <span class="dv">8</span><span class="op">,</span></span>
<span id="cb22-758"><a href=""></a>          <span class="dt">text</span><span class="op">:</span> <span class="vs">`SRE ‚âà 0 for all lines through (xÃÑ, »≥)`</span></span>
<span id="cb22-759"><a href=""></a>        }</span>
<span id="cb22-760"><a href=""></a>      ]<span class="op">,</span> {</span>
<span id="cb22-761"><a href=""></a>        <span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span> </span>
<span id="cb22-762"><a href=""></a>        <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">13</span><span class="op">,</span> <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#95a5a6"</span><span class="op">,</span> <span class="dt">textAnchor</span><span class="op">:</span> <span class="st">"start"</span></span>
<span id="cb22-763"><a href=""></a>      })</span>
<span id="cb22-764"><a href=""></a>    ]<span class="op">,</span></span>
<span id="cb22-765"><a href=""></a>    <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Temperature (¬∞F)"</span>}<span class="op">,</span></span>
<span id="cb22-766"><a href=""></a>    <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Sales"</span>}<span class="op">,</span></span>
<span id="cb22-767"><a href=""></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">700</span><span class="op">,</span></span>
<span id="cb22-768"><a href=""></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb22-769"><a href=""></a>    <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb22-770"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb22-771"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-22" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div id="tabset-1-4">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb23" data-startfrom="776" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 775;"><span id="cb23-776"><a href=""></a>{</span>
<span id="cb23-777"><a href=""></a>  <span class="kw">const</span> n <span class="op">=</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb23-778"><a href=""></a>  <span class="kw">const</span> meanTemp <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb23-779"><a href=""></a>  <span class="kw">const</span> meanSales <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">sales</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb23-780"><a href=""></a>  </span>
<span id="cb23-781"><a href=""></a>  <span class="kw">const</span> temps <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">temperature</span>)<span class="op">;</span></span>
<span id="cb23-782"><a href=""></a>  <span class="kw">const</span> minTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb23-783"><a href=""></a>  <span class="kw">const</span> maxTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb23-784"><a href=""></a>  </span>
<span id="cb23-785"><a href=""></a>  <span class="co">// SSE line (from ssrCalcs)</span></span>
<span id="cb23-786"><a href=""></a>  <span class="kw">const</span> sseSlope <span class="op">=</span> ssrCalcs<span class="op">.</span><span class="at">slope</span><span class="op">;</span></span>
<span id="cb23-787"><a href=""></a>  <span class="kw">const</span> sseIntercept <span class="op">=</span> ssrCalcs<span class="op">.</span><span class="at">intercept</span><span class="op">;</span></span>
<span id="cb23-788"><a href=""></a>  <span class="kw">const</span> sseValue <span class="op">=</span> ssrCalcs<span class="op">.</span><span class="at">ssr</span><span class="op">;</span></span>
<span id="cb23-789"><a href=""></a>  </span>
<span id="cb23-790"><a href=""></a>  <span class="co">// SAE line (from sarCalcs)</span></span>
<span id="cb23-791"><a href=""></a>  <span class="kw">const</span> saeSlope <span class="op">=</span> sarCalcs<span class="op">.</span><span class="at">slope</span><span class="op">;</span></span>
<span id="cb23-792"><a href=""></a>  <span class="kw">const</span> saeIntercept <span class="op">=</span> sarCalcs<span class="op">.</span><span class="at">intercept</span><span class="op">;</span></span>
<span id="cb23-793"><a href=""></a>  <span class="kw">const</span> saeValue <span class="op">=</span> sarCalcs<span class="op">.</span><span class="at">sar</span><span class="op">;</span></span>
<span id="cb23-794"><a href=""></a>  </span>
<span id="cb23-795"><a href=""></a>  <span class="co">// Two example SRE lines</span></span>
<span id="cb23-796"><a href=""></a>  <span class="kw">const</span> sreSlopes <span class="op">=</span> [<span class="fl">0.4</span><span class="op">,</span> <span class="fl">0.9</span>]<span class="op">;</span></span>
<span id="cb23-797"><a href=""></a>  <span class="kw">const</span> sreLines <span class="op">=</span> sreSlopes<span class="op">.</span><span class="fu">map</span>(slope <span class="kw">=&gt;</span> ({</span>
<span id="cb23-798"><a href=""></a>    <span class="dt">slope</span><span class="op">:</span> slope<span class="op">,</span></span>
<span id="cb23-799"><a href=""></a>    <span class="dt">intercept</span><span class="op">:</span> meanSales <span class="op">-</span> slope <span class="op">*</span> meanTemp</span>
<span id="cb23-800"><a href=""></a>  }))<span class="op">;</span></span>
<span id="cb23-801"><a href=""></a>  </span>
<span id="cb23-802"><a href=""></a>  <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb23-803"><a href=""></a><span class="vs">    &lt;div style="position: relative;"&gt;</span></span>
<span id="cb23-804"><a href=""></a><span class="vs">      </span><span class="sc">${</span>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb23-805"><a href=""></a>        <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb23-806"><a href=""></a>          <span class="co">// Data points</span></span>
<span id="cb23-807"><a href=""></a>          Plot<span class="op">.</span><span class="fu">dot</span>(lemonadeData<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span>})<span class="op">,</span></span>
<span id="cb23-808"><a href=""></a>          </span>
<span id="cb23-809"><a href=""></a>          <span class="co">// Centroid point</span></span>
<span id="cb23-810"><a href=""></a>          Plot<span class="op">.</span><span class="fu">dot</span>(</span>
<span id="cb23-811"><a href=""></a>            [{<span class="dt">temperature</span><span class="op">:</span> meanTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> meanSales}]<span class="op">,</span></span>
<span id="cb23-812"><a href=""></a>            {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">8</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#c0392b"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>}</span>
<span id="cb23-813"><a href=""></a>          )<span class="op">,</span></span>
<span id="cb23-814"><a href=""></a>          </span>
<span id="cb23-815"><a href=""></a>          <span class="co">// SSE line (blue solid)</span></span>
<span id="cb23-816"><a href=""></a>          Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb23-817"><a href=""></a>            [</span>
<span id="cb23-818"><a href=""></a>              {<span class="dt">temperature</span><span class="op">:</span> minTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> sseIntercept <span class="op">+</span> sseSlope <span class="op">*</span> minTemp}<span class="op">,</span></span>
<span id="cb23-819"><a href=""></a>              {<span class="dt">temperature</span><span class="op">:</span> maxTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> sseIntercept <span class="op">+</span> sseSlope <span class="op">*</span> maxTemp}</span>
<span id="cb23-820"><a href=""></a>            ]<span class="op">,</span></span>
<span id="cb23-821"><a href=""></a>            {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#3498db"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span>}</span>
<span id="cb23-822"><a href=""></a>          )<span class="op">,</span></span>
<span id="cb23-823"><a href=""></a>          </span>
<span id="cb23-824"><a href=""></a>          <span class="co">// SAE line (green solid)</span></span>
<span id="cb23-825"><a href=""></a>          Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb23-826"><a href=""></a>            [</span>
<span id="cb23-827"><a href=""></a>              {<span class="dt">temperature</span><span class="op">:</span> minTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> saeIntercept <span class="op">+</span> saeSlope <span class="op">*</span> minTemp}<span class="op">,</span></span>
<span id="cb23-828"><a href=""></a>              {<span class="dt">temperature</span><span class="op">:</span> maxTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> saeIntercept <span class="op">+</span> saeSlope <span class="op">*</span> maxTemp}</span>
<span id="cb23-829"><a href=""></a>            ]<span class="op">,</span></span>
<span id="cb23-830"><a href=""></a>            {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#2ecc71"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span>}</span>
<span id="cb23-831"><a href=""></a>          )<span class="op">,</span></span>
<span id="cb23-832"><a href=""></a>          </span>
<span id="cb23-833"><a href=""></a>          <span class="co">// SRE example lines (gray dashed)</span></span>
<span id="cb23-834"><a href=""></a>          <span class="op">...</span>sreLines<span class="op">.</span><span class="fu">map</span>((line<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb23-835"><a href=""></a>            <span class="cf">return</span> Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb23-836"><a href=""></a>              [</span>
<span id="cb23-837"><a href=""></a>                {<span class="dt">temperature</span><span class="op">:</span> minTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> line<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> line<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> minTemp}<span class="op">,</span></span>
<span id="cb23-838"><a href=""></a>                {<span class="dt">temperature</span><span class="op">:</span> maxTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> line<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> line<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> maxTemp}</span>
<span id="cb23-839"><a href=""></a>              ]<span class="op">,</span></span>
<span id="cb23-840"><a href=""></a>              {</span>
<span id="cb23-841"><a href=""></a>                <span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> </span>
<span id="cb23-842"><a href=""></a>                <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> </span>
<span id="cb23-843"><a href=""></a>                <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#95a5a6"</span><span class="op">,</span> </span>
<span id="cb23-844"><a href=""></a>                <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb23-845"><a href=""></a>                <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"5,5"</span><span class="op">,</span></span>
<span id="cb23-846"><a href=""></a>                <span class="dt">opacity</span><span class="op">:</span> <span class="fl">0.6</span></span>
<span id="cb23-847"><a href=""></a>              }</span>
<span id="cb23-848"><a href=""></a>            )<span class="op">;</span></span>
<span id="cb23-849"><a href=""></a>          })<span class="op">,</span></span>
<span id="cb23-850"><a href=""></a>          </span>
<span id="cb23-851"><a href=""></a>          <span class="co">// Centroid label</span></span>
<span id="cb23-852"><a href=""></a>          Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb23-853"><a href=""></a>            [{<span class="dt">temperature</span><span class="op">:</span> meanTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> meanSales<span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="vs">`(xÃÑ, »≥)`</span>}]<span class="op">,</span></span>
<span id="cb23-854"><a href=""></a>            {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">13</span><span class="op">,</span> <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">15</span>}</span>
<span id="cb23-855"><a href=""></a>          )</span>
<span id="cb23-856"><a href=""></a>        ]<span class="op">,</span></span>
<span id="cb23-857"><a href=""></a>        <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Temperature (¬∞F)"</span>}<span class="op">,</span></span>
<span id="cb23-858"><a href=""></a>        <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Sales"</span>}<span class="op">,</span></span>
<span id="cb23-859"><a href=""></a>        <span class="dt">width</span><span class="op">:</span> <span class="dv">700</span><span class="op">,</span></span>
<span id="cb23-860"><a href=""></a>        <span class="dt">height</span><span class="op">:</span> <span class="dv">450</span><span class="op">,</span></span>
<span id="cb23-861"><a href=""></a>        <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb23-862"><a href=""></a>      })<span class="sc">}</span></span>
<span id="cb23-863"><a href=""></a><span class="vs">      </span></span>
<span id="cb23-864"><a href=""></a><span class="vs">      &lt;div style="position: absolute; bottom: 40px; right: 20px; background: white; padding: 12px; border: 1px solid #ccc; border-radius: 5px; font-size: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);"&gt;</span></span>
<span id="cb23-865"><a href=""></a><span class="vs">        &lt;div style="font-weight: bold; margin-bottom: 8px; font-size: 13px;"&gt;Legend&lt;/div&gt;</span></span>
<span id="cb23-866"><a href=""></a><span class="vs">        &lt;div style="display: flex; align-items: center; margin-bottom: 5px;"&gt;</span></span>
<span id="cb23-867"><a href=""></a><span class="vs">          &lt;div style="width: 30px; height: 3px; background: #3498db; margin-right: 8px;"&gt;&lt;/div&gt;</span></span>
<span id="cb23-868"><a href=""></a><span class="vs">          &lt;span&gt;&lt;strong&gt;SSE:&lt;/strong&gt; y = </span><span class="sc">${</span>sseIntercept<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>sseSlope<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">x (SSE = </span><span class="sc">${</span>sseValue<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs">)&lt;/span&gt;</span></span>
<span id="cb23-869"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb23-870"><a href=""></a><span class="vs">        &lt;div style="display: flex; align-items: center; margin-bottom: 5px;"&gt;</span></span>
<span id="cb23-871"><a href=""></a><span class="vs">          &lt;div style="width: 30px; height: 3px; background: #2ecc71; margin-right: 8px;"&gt;&lt;/div&gt;</span></span>
<span id="cb23-872"><a href=""></a><span class="vs">          &lt;span&gt;&lt;strong&gt;SAE:&lt;/strong&gt; y = </span><span class="sc">${</span>saeIntercept<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>saeSlope<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">x (SAE = </span><span class="sc">${</span>saeValue<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs">)&lt;/span&gt;</span></span>
<span id="cb23-873"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb23-874"><a href=""></a><span class="vs">        &lt;div style="display: flex; align-items: center; margin-bottom: 5px;"&gt;</span></span>
<span id="cb23-875"><a href=""></a><span class="vs">          &lt;div style="width: 30px; height: 2px; background: #95a5a6; border-top: 2px dashed #95a5a6; margin-right: 8px;"&gt;&lt;/div&gt;</span></span>
<span id="cb23-876"><a href=""></a><span class="vs">          &lt;span&gt;&lt;strong&gt;SRE:&lt;/strong&gt; y = </span><span class="sc">${</span>sreLines[<span class="dv">0</span>]<span class="op">.</span><span class="at">intercept</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>sreLines[<span class="dv">0</span>]<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">x (SRE ‚âà 0)&lt;/span&gt;</span></span>
<span id="cb23-877"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb23-878"><a href=""></a><span class="vs">        &lt;div style="display: flex; align-items: center;"&gt;</span></span>
<span id="cb23-879"><a href=""></a><span class="vs">          &lt;div style="width: 30px; height: 2px; background: #95a5a6; border-top: 2px dashed #95a5a6; margin-right: 8px;"&gt;&lt;/div&gt;</span></span>
<span id="cb23-880"><a href=""></a><span class="vs">          &lt;span&gt;&lt;strong&gt;SRE:&lt;/strong&gt; y = </span><span class="sc">${</span>sreLines[<span class="dv">1</span>]<span class="op">.</span><span class="at">intercept</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>sreLines[<span class="dv">1</span>]<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">x (SRE ‚âà 0)&lt;/span&gt;</span></span>
<span id="cb23-881"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb23-882"><a href=""></a><span class="vs">        &lt;div style="margin-top: 8px; font-style: italic; color: #666; font-size: 11px;"&gt;</span></span>
<span id="cb23-883"><a href=""></a><span class="vs">          All SRE lines pass through (xÃÑ, »≥)</span></span>
<span id="cb23-884"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb23-885"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb23-886"><a href=""></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb23-887"><a href=""></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb23-888"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-23" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="quick-check-loss-functions" class="slide level2 incremental">
<h2>‚ùì Quick Check: Loss Functions</h2>
<ul>
<li class="fragment"><p><strong>Question:</strong> If you have a dataset with a few extreme outliers, which loss function would you prefer?</p></li>
<li class="fragment"><p>(a)SSE (Sum of Squared Errors)<br>
</p></li>
<li class="fragment"><p>(b)SAE (Sum of Absolute Errors)<br>
</p></li>
<li class="fragment"><p>(c)SRE (Sum of Raw Errors)</p></li>
<li class="fragment"><p><strong>Answer:</strong> <strong>(b) SAE</strong> - It‚Äôs more robust to outliers because it doesn‚Äôt square the errors.</p></li>
<li class="fragment"><p><strong>Follow-up:</strong> Why do we typically use SSE in practice despite its sensitivity to outliers?</p></li>
<li class="fragment"><p>1.Has a closed-form solution (easy to compute)</p></li>
<li class="fragment"><p>2.Well-understood statistical properties</p></li>
<li class="fragment"><p>3.Works well when errors are normally distributed</p></li>
</ul>
</section>
<section id="understanding-ssr-sse-and-sst" class="slide level2 incremental scrollable">
<h2>üìä Understanding SSR, SSE, and SST</h2>
<h3 id="the-three-sums-of-squares">The Three Sums of Squares</h3>
<ul>
<li class="fragment"><p>1.<strong>SST - Total Sum of Squares</strong>: <strong>Total variation</strong> in the response variable</p></li>
<li class="fragment"><p><span class="math display">\[SST = \sum_{i=1}^n (y_i - \bar{y})^2\]</span></p></li>
<li class="fragment"><p>Measures how spread out the data is from the mean</p></li>
<li class="fragment"><p>2.<strong>SSR - Sum of Squared Regression</strong>: <strong>Explained variation</strong> by the model</p></li>
<li class="fragment"><p><span class="math display">\[SSR = \sum_{i=1}^n (\widehat{y}_i - \bar{y})^2\]</span></p></li>
<li class="fragment"><p>How much better is our line than just using <span class="math inline">\(\bar{y}\)</span>?</p></li>
<li class="fragment"><p>3.<strong>SSE - Sum of Squared Errors</strong>: <strong>Unexplained variation</strong> (residual)</p></li>
<li class="fragment"><p><span class="math display">\[SSE = \sum_{i=1}^n (y_i - \widehat{y}_i)^2\]</span></p></li>
<li class="fragment"><p>How far are data points from our regression line?</p></li>
</ul>
</section>
<section id="introducing-ordinary-least-squares-ols-regression" class="slide level2 incremental scrollable">
<h2>üéì Introducing: Ordinary Least Squares (OLS) Regression</h2>
<ul>
<li class="fragment"><p><strong>What is OLS?</strong></p></li>
<li class="fragment"><p>The method we just derived is called <strong>Ordinary Least Squares (OLS)</strong> regression!</p></li>
<li class="fragment"><p><strong>Definition:</strong></p></li>
<li class="fragment"><p>OLS finds the line that <strong>minimizes the Sum of Squared Errors (SSE)</strong></p></li>
<li class="fragment"><p>It gives us the ‚Äúbest-fitting‚Äù line in the least squares sense</p></li>
<li class="fragment"><p>The formulas we derived are the OLS estimators:</p></li>
<li class="fragment"><p><span class="math display">\[
\widehat{\beta}_1^{OLS} = \frac{\sum_{i=1}^n (x_i - \bar{x})(y_i - \bar{y})}{\sum_{i=1}^n (x_i - \bar{x})^2}, \quad \widehat{\beta}_0^{OLS} = \bar{y} - \widehat{\beta}_1^{OLS} \bar{x}\]</span></p></li>
<li class="fragment"><p><strong>Why is it called ‚ÄúOrdinary‚Äù?</strong></p></li>
<li class="fragment"><p>To distinguish it from other least squares methods (weighted, generalized, etc.)</p></li>
<li class="fragment"><p>It‚Äôs the most common and fundamental regression technique</p></li>
<li class="fragment"><p><strong>Key Properties:</strong></p></li>
<li class="fragment"><p>Unique solution (one best-fitting line)</p></li>
<li class="fragment"><p>Always passes through <span class="math inline">\((\bar{x}, \bar{y})\)</span></p></li>
<li class="fragment"><p>Minimizes SSE = Maximizes R¬≤ (we‚Äôll see this soon!)</p></li>
</ul>
</section>
<section id="the-fundamental-relationship" class="slide level2 incremental scrollable">
<h2>The Fundamental Relationship</h2>
<h3 id="for-original-least-squares-ols-regression-sst-ssr-sse">For Original Least Squares (OLS) Regression: SST = SSR + SSE</h3>
<ul>
<li class="fragment"><p>Starting with: <span class="math display">\[y_i - \bar{y} = (y_i - \widehat{y}_i) + (\widehat{y}_i - \bar{y})\]</span></p></li>
<li class="fragment"><p>Squaring both sides: <span class="math display">\[(y_i - \bar{y})^2 = (y_i - \widehat{y}_i)^2 + (\widehat{y}_i - \bar{y})^2 + 2(y_i - \widehat{y}_i)(\widehat{y}_i - \bar{y})\]</span></p></li>
<li class="fragment"><p>The <strong>cross-term disappears</strong> for OLS: <span class="math inline">\(\sum_{i=1}^n(y_i - \widehat{y}_i)(\widehat{y}_i - \bar{y}) = 0\)</span></p></li>
<li class="fragment"><p>Therefore: <span class="math display">\[\sum_{i=1}^n(y_i - \bar{y})^2 = \sum_{i=1}^n(y_i - \widehat{y}_i)^2 + \sum_{i=1}^n(\widehat{y}_i - \bar{y})^2\]</span></p></li>
<li class="fragment"><p><strong>Total Variation = Explained Variation + Unexplained Variation</strong></p></li>
</ul>
</section>
<section id="r2---coefficient-of-determination" class="slide level2 incremental scrollable">
<h2><span class="math inline">\(R^2\)</span> - Coefficient of Determination</h2>
<p><span class="math display">\[
R^2 = \frac{\text{SSR}}{\text{SST}} = 1 - \frac{\text{SSE}}{\text{SST}}
\]</span></p>
<ul>
<li class="fragment"><p><strong>For OLS Regression:</strong></p></li>
<li class="fragment"><p><strong>Interpretation:</strong></p></li>
<li class="fragment"><p>Proportion of total variation explained by the model</p></li>
<li class="fragment"><p>Always ranges from 0 to 1 (or 0% to 100%)</p></li>
<li class="fragment"><p><span class="math inline">\(R^2 = 0.75\)</span> means 75% of variance in <span class="math inline">\(y\)</span> is explained by <span class="math inline">\(x\)</span></p></li>
<li class="fragment"><p><strong>Key Insight:</strong> Since SST is fixed for a given dataset:</p></li>
<li class="fragment"><p><strong>Maximizing <span class="math inline">\(R^2\)</span></strong> is equivalent to <strong>minimizing SSE</strong> (for OLS only!)</p></li>
<li class="fragment"><p>When SSE decreases, <span class="math inline">\(R^2\)</span> increases (and vice versa)</p></li>
<li class="fragment"><p>The two formulas above are mathematically equivalent for OLS</p></li>
<li class="fragment"><p><strong>‚ö†Ô∏è Important Caveat:</strong></p></li>
<li class="fragment"><p>These properties only hold for <strong>OLS regression</strong></p></li>
<li class="fragment"><p>For arbitrary lines (not minimizing SSE):</p>
<ul>
<li class="fragment"><span class="math inline">\(R^2\)</span> can be negative or &gt; 1</li>
<li class="fragment">The ‚Äúproportion of variance explained‚Äù interpretation is invalid</li>
<li class="fragment">Higher <span class="math inline">\(R^2\)</span> doesn‚Äôt necessarily mean a better fit</li>
</ul></li>
<li class="fragment"><p><strong>Why does this matter?</strong> Always use OLS when interpreting R¬≤!</p></li>
</ul>
</section>
<section id="quick-check-sum-of-squares" class="slide level2 incremental">
<h2>‚ùì Quick Check: Sum of Squares</h2>
<ul>
<li class="fragment"><p><strong>Question:</strong> If you have an Ordinary Least Square regression with <span class="math inline">\(R^2 = 0.75\)</span> and <span class="math inline">\(SST = 1000\)</span>, what are SSR and SSE?</p></li>
<li class="fragment"><p>Think about the relationships:</p></li>
<li class="fragment"><p><span class="math inline">\(SST = SSR + SSE\)</span></p></li>
<li class="fragment"><p><span class="math inline">\(R^2 = SSR/SST\)</span></p></li>
<li class="fragment"><p><strong>Answer:</strong></p></li>
<li class="fragment"><p><span class="math inline">\(SSR = 0.75 \times 1000 = 750\)</span><br>
</p></li>
<li class="fragment"><p><span class="math inline">\(SSE = 1000 - 750 = 250\)</span></p></li>
<li class="fragment"><p><strong>Follow-up:</strong> Is minimizing SSE the same as maximizing <span class="math inline">\(R^2\)</span> in linear regression?</p></li>
<li class="fragment"><p><strong>Yes!</strong> They‚Äôre equivalent for OLS regression.</p></li>
</ul>
</section>
<section id="understanding-r¬≤-vs-adjusted-r¬≤-part-1" class="slide level2 scrollable">
<h2>üìä Understanding R¬≤ vs Adjusted R¬≤ (Part 1)</h2>
<p><strong>The Problem with R¬≤:</strong></p>
<p><span class="math display">\[
R^2 = 1 - \frac{\text{SSE}}{\text{SST}}
\]</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb24" data-startfrom="1065" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1064;"><span id="cb24-1065"><a href=""></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb24-1066"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb24-1067"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Question:&lt;/strong&gt; What happens when we add more predictors to our model? ü§î&lt;/p&gt;</span></span>
<span id="cb24-1068"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb24-1069"><a href=""></a></span>
<span id="cb24-1070"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb24-1071"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Issue:&lt;/strong&gt; Adding ANY variable (even random noise) will &lt;strong&gt;never decrease&lt;/strong&gt; R¬≤!&lt;/p&gt;</span></span>
<span id="cb24-1072"><a href=""></a><span class="vs">&lt;ul&gt;</span></span>
<span id="cb24-1073"><a href=""></a><span class="vs">&lt;li&gt;More predictors ‚Üí Model becomes more flexible ‚Üí Lower SSE ‚Üí Higher R¬≤&lt;/li&gt;</span></span>
<span id="cb24-1074"><a href=""></a><span class="vs">&lt;li&gt;This can lead to &lt;strong&gt;overfitting&lt;/strong&gt; and spurious relationships&lt;/li&gt;</span></span>
<span id="cb24-1075"><a href=""></a><span class="vs">&lt;li&gt;Example: Adding zodiac sign, lucky number, or random noise will increase R¬≤!&lt;/li&gt;</span></span>
<span id="cb24-1076"><a href=""></a><span class="vs">&lt;/ul&gt;</span></span>
<span id="cb24-1077"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb24-1078"><a href=""></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-24" data-nodetype="expression">

</div>
</div>
</div>
<p><strong>The Solution: Adjusted R¬≤</strong></p>
<p><span class="math display">\[
R^2_{adj} = 1 - \frac{\text{SSE}/(n-p-1)}{\text{SST}/(n-1)}
\]</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb25" data-startfrom="1088" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1087;"><span id="cb25-1088"><a href=""></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb25-1089"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb25-1090"><a href=""></a><span class="vs">&lt;p&gt;Adjusted R¬≤ &lt;strong&gt;penalizes&lt;/strong&gt; adding weak predictors through the &lt;strong&gt;degrees of freedom adjustment&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb25-1091"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb25-1092"><a href=""></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-25" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="adjusted-r¬≤-key-differences" class="slide level2 scrollable">
<h2>üìä Adjusted R¬≤: Key Differences</h2>
<p><strong>Comparison Table:</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb26" data-startfrom="1102" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1101;"><span id="cb26-1102"><a href=""></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb26-1103"><a href=""></a><span class="vs">&lt;table style="width: 100%; border-collapse: collapse; margin: 20px 0;"&gt;</span></span>
<span id="cb26-1104"><a href=""></a><span class="vs">&lt;tr style="background: #ecf0f1; font-weight: bold;"&gt;</span></span>
<span id="cb26-1105"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7;"&gt;&lt;/td&gt;</span></span>
<span id="cb26-1106"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7;"&gt;R¬≤&lt;/td&gt;</span></span>
<span id="cb26-1107"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7;"&gt;Adjusted R¬≤&lt;/td&gt;</span></span>
<span id="cb26-1108"><a href=""></a><span class="vs">&lt;/tr&gt;</span></span>
<span id="cb26-1109"><a href=""></a><span class="vs">&lt;tr&gt;</span></span>
<span id="cb26-1110"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7;"&gt;&lt;strong&gt;Formula&lt;/strong&gt;&lt;/td&gt;</span></span>
<span id="cb26-1111"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7;"&gt;1 - SSE/SST&lt;/td&gt;</span></span>
<span id="cb26-1112"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7;"&gt;1 - [SSE/(n-p-1)] / [SST/(n-1)]&lt;/td&gt;</span></span>
<span id="cb26-1113"><a href=""></a><span class="vs">&lt;/tr&gt;</span></span>
<span id="cb26-1114"><a href=""></a><span class="vs">&lt;tr&gt;</span></span>
<span id="cb26-1115"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7;"&gt;&lt;strong&gt;Adding variables&lt;/strong&gt;&lt;/td&gt;</span></span>
<span id="cb26-1116"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7; background: #f8d7da;"&gt;Always increases ‚ö†Ô∏è&lt;/td&gt;</span></span>
<span id="cb26-1117"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7; background: #d4edda;"&gt;Can decrease if variable is weak ‚úì&lt;/td&gt;</span></span>
<span id="cb26-1118"><a href=""></a><span class="vs">&lt;/tr&gt;</span></span>
<span id="cb26-1119"><a href=""></a><span class="vs">&lt;tr&gt;</span></span>
<span id="cb26-1120"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7;"&gt;&lt;strong&gt;Penalizes complexity&lt;/strong&gt;&lt;/td&gt;</span></span>
<span id="cb26-1121"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7; background: #f8d7da;"&gt;No ‚ö†Ô∏è&lt;/td&gt;</span></span>
<span id="cb26-1122"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7; background: #d4edda;"&gt;Yes (via degrees of freedom) ‚úì&lt;/td&gt;</span></span>
<span id="cb26-1123"><a href=""></a><span class="vs">&lt;/tr&gt;</span></span>
<span id="cb26-1124"><a href=""></a><span class="vs">&lt;tr&gt;</span></span>
<span id="cb26-1125"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7;"&gt;&lt;strong&gt;Use for model selection&lt;/strong&gt;&lt;/td&gt;</span></span>
<span id="cb26-1126"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7; background: #f8d7da;"&gt;Poor choice ‚ö†Ô∏è&lt;/td&gt;</span></span>
<span id="cb26-1127"><a href=""></a><span class="vs">&lt;td style="padding: 12px; border: 1px solid #bdc3c7; background: #d4edda;"&gt;Better choice ‚úì&lt;/td&gt;</span></span>
<span id="cb26-1128"><a href=""></a><span class="vs">&lt;/tr&gt;</span></span>
<span id="cb26-1129"><a href=""></a><span class="vs">&lt;/table&gt;</span></span>
<span id="cb26-1130"><a href=""></a></span>
<span id="cb26-1131"><a href=""></a><span class="vs">&lt;div class="fragment" style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-top: 20px;"&gt;</span></span>
<span id="cb26-1132"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Key Takeaway:&lt;/strong&gt; Use &lt;strong&gt;Adjusted R¬≤&lt;/strong&gt; when comparing models with different numbers of predictors!&lt;/p&gt;</span></span>
<span id="cb26-1133"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb26-1134"><a href=""></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-26" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="understanding-degrees-of-freedom" class="slide level2 scrollable">
<h2>üéØ Understanding Degrees of Freedom</h2>
<p><strong>What are Degrees of Freedom?</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb27" data-startfrom="1144" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1143;"><span id="cb27-1144"><a href=""></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb27-1145"><a href=""></a><span class="vs">&lt;div style="background: #e8f4f8; padding: 15px; border-radius: 8px; margin: 15px 0;"&gt;</span></span>
<span id="cb27-1146"><a href=""></a><span class="vs">&lt;p style="font-size: 15px; margin: 5px 0;"&gt;</span></span>
<span id="cb27-1147"><a href=""></a><span class="vs">&lt;strong&gt;Degrees of Freedom (df)&lt;/strong&gt; represent the number of independent pieces of information available to estimate a parameter or measure variability.</span></span>
<span id="cb27-1148"><a href=""></a><span class="vs">&lt;/p&gt;</span></span>
<span id="cb27-1149"><a href=""></a><span class="vs">&lt;p style="font-size: 15px; margin: 5px 0;"&gt;</span></span>
<span id="cb27-1150"><a href=""></a><span class="vs">&lt;strong&gt;Intuition:&lt;/strong&gt; df = (number of observations) - (number of parameters estimated)</span></span>
<span id="cb27-1151"><a href=""></a><span class="vs">&lt;/p&gt;</span></span>
<span id="cb27-1152"><a href=""></a><span class="vs">&lt;p style="font-size: 14px; margin: 5px 0; color: #7f8c8d;"&gt;</span></span>
<span id="cb27-1153"><a href=""></a><span class="vs">Think of it as: "How many data points are free to vary after we've used some to estimate our model parameters?"</span></span>
<span id="cb27-1154"><a href=""></a><span class="vs">&lt;/p&gt;</span></span>
<span id="cb27-1155"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb27-1156"><a href=""></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-27" data-nodetype="expression">

</div>
</div>
</div>
<p><strong>The Adjustment Factor: (n - p - 1)</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb28" data-startfrom="1162" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1161;"><span id="cb28-1162"><a href=""></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb28-1163"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb28-1164"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Case 1: Simple Regression (p = 1)&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb28-1165"><a href=""></a><span class="vs">&lt;p&gt;Adjustment factor: &lt;strong&gt;n - 1 - 1 = n - 2&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb28-1166"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb28-1167"><a href=""></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-28" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb29" data-startfrom="1171" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1170;"><span id="cb29-1171"><a href=""></a>{</span>
<span id="cb29-1172"><a href=""></a>  <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb29-1173"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb29-1174"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Why n - 2?&lt;/strong&gt; Any 2 points perfectly determine a line!&lt;/p&gt;</span></span>
<span id="cb29-1175"><a href=""></a><span class="vs">&lt;div style="display: flex; gap: 20px; align-items: center;"&gt;</span></span>
<span id="cb29-1176"><a href=""></a><span class="vs">&lt;div style="flex: 1;"&gt;</span></span>
<span id="cb29-1177"><a href=""></a><span class="sc">${</span>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb29-1178"><a href=""></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb29-1179"><a href=""></a>    Plot<span class="op">.</span><span class="fu">dot</span>([{<span class="dt">x</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">3</span>}<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">7</span>}]<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">8</span>})<span class="op">,</span></span>
<span id="cb29-1180"><a href=""></a>    Plot<span class="op">.</span><span class="fu">line</span>([{<span class="dt">x</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="fl">0.6</span>}<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="dv">7</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="fl">9.4</span>}]<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#3498db"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span>})<span class="op">,</span></span>
<span id="cb29-1181"><a href=""></a>    Plot<span class="op">.</span><span class="fu">text</span>([{<span class="dt">x</span><span class="op">:</span> <span class="fl">3.5</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">8</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Perfect fit with 2 points!"</span>}]<span class="op">,</span> </span>
<span id="cb29-1182"><a href=""></a>      {<span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">14</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span>})</span>
<span id="cb29-1183"><a href=""></a>  ]<span class="op">,</span></span>
<span id="cb29-1184"><a href=""></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">7</span>]}<span class="op">,</span></span>
<span id="cb29-1185"><a href=""></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">10</span>]}<span class="op">,</span></span>
<span id="cb29-1186"><a href=""></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">300</span><span class="op">,</span></span>
<span id="cb29-1187"><a href=""></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">250</span><span class="op">,</span></span>
<span id="cb29-1188"><a href=""></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb29-1189"><a href=""></a>})<span class="sc">}</span></span>
<span id="cb29-1190"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb29-1191"><a href=""></a><span class="vs">&lt;div style="flex: 1;"&gt;</span></span>
<span id="cb29-1192"><a href=""></a><span class="vs">&lt;p style="font-size: 14px;"&gt;</span></span>
<span id="cb29-1193"><a href=""></a><span class="vs">- With &lt;strong&gt;2 data points&lt;/strong&gt;, we estimate 2 parameters (Œ≤‚ÇÄ, Œ≤‚ÇÅ)&lt;br&gt;</span></span>
<span id="cb29-1194"><a href=""></a><span class="vs">- The line passes through both points exactly&lt;br&gt;</span></span>
<span id="cb29-1195"><a href=""></a><span class="vs">- &lt;strong&gt;No degrees of freedom left!&lt;/strong&gt; (2 - 2 = 0)&lt;br&gt;</span></span>
<span id="cb29-1196"><a href=""></a><span class="vs">- Need at least n = 3 for meaningful inference&lt;br&gt;</span></span>
<span id="cb29-1197"><a href=""></a><span class="vs">- Thus: df = &lt;strong&gt;n - 2&lt;/strong&gt;</span></span>
<span id="cb29-1198"><a href=""></a><span class="vs">&lt;/p&gt;</span></span>
<span id="cb29-1199"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb29-1200"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb29-1201"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb29-1202"><a href=""></a><span class="vs">`</span><span class="op">;</span></span>
<span id="cb29-1203"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-29" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb30" data-startfrom="1207" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1206;"><span id="cb30-1207"><a href=""></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb30-1208"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb30-1209"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Case 2: Multiple Regression with 2 predictors (p = 2)&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb30-1210"><a href=""></a><span class="vs">&lt;p&gt;Adjustment factor: &lt;strong&gt;n - 2 - 1 = n - 3&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb30-1211"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb30-1212"><a href=""></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-30" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb31" data-startfrom="1216" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1215;"><span id="cb31-1216"><a href=""></a>{</span>
<span id="cb31-1217"><a href=""></a>  <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb31-1218"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb31-1219"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Why n - 3?&lt;/strong&gt; Any 3 points perfectly determine a plane!&lt;/p&gt;</span></span>
<span id="cb31-1220"><a href=""></a><span class="vs">&lt;div style="display: flex; gap: 20px; align-items: center;"&gt;</span></span>
<span id="cb31-1221"><a href=""></a><span class="vs">&lt;div style="flex: 1;"&gt;</span></span>
<span id="cb31-1222"><a href=""></a><span class="vs">&lt;div style="position: relative; width: 300px; height: 250px; background: #f8f9fa; border: 2px solid #3498db; border-radius: 8px; display: flex; align-items: center; justify-content: center;"&gt;</span></span>
<span id="cb31-1223"><a href=""></a><span class="vs">&lt;svg width="280" height="230" viewBox="0 0 280 230"&gt;</span></span>
<span id="cb31-1224"><a href=""></a><span class="vs">&lt;!-- 3D plane representation --&gt;</span></span>
<span id="cb31-1225"><a href=""></a><span class="vs">&lt;polygon points="50,180 230,180 210,80 70,80" fill="#3498db" opacity="0.3" stroke="#3498db" stroke-width="2"/&gt;</span></span>
<span id="cb31-1226"><a href=""></a><span class="vs">&lt;!-- 3 points on the plane --&gt;</span></span>
<span id="cb31-1227"><a href=""></a><span class="vs">&lt;circle cx="80" cy="160" r="6" fill="#e74c3c"/&gt;</span></span>
<span id="cb31-1228"><a href=""></a><span class="vs">&lt;circle cx="180" cy="140" r="6" fill="#e74c3c"/&gt;</span></span>
<span id="cb31-1229"><a href=""></a><span class="vs">&lt;circle cx="140" cy="100" r="6" fill="#e74c3c"/&gt;</span></span>
<span id="cb31-1230"><a href=""></a><span class="vs">&lt;!-- Labels --&gt;</span></span>
<span id="cb31-1231"><a href=""></a><span class="vs">&lt;text x="80" y="180" font-size="12" fill="#e74c3c" font-weight="bold"&gt;(x‚ÇÅ, x‚ÇÇ, y)‚ÇÅ&lt;/text&gt;</span></span>
<span id="cb31-1232"><a href=""></a><span class="vs">&lt;text x="180" y="160" font-size="12" fill="#e74c3c" font-weight="bold"&gt;(x‚ÇÅ, x‚ÇÇ, y)‚ÇÇ&lt;/text&gt;</span></span>
<span id="cb31-1233"><a href=""></a><span class="vs">&lt;text x="140" y="90" font-size="12" fill="#e74c3c" font-weight="bold"&gt;(x‚ÇÅ, x‚ÇÇ, y)‚ÇÉ&lt;/text&gt;</span></span>
<span id="cb31-1234"><a href=""></a><span class="vs">&lt;text x="120" y="200" font-size="14" fill="#3498db" font-weight="bold"&gt;Fitted Plane&lt;/text&gt;</span></span>
<span id="cb31-1235"><a href=""></a><span class="vs">&lt;!-- Axes --&gt;</span></span>
<span id="cb31-1236"><a href=""></a><span class="vs">&lt;line x1="20" y1="200" x2="120" y2="200" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/&gt;</span></span>
<span id="cb31-1237"><a href=""></a><span class="vs">&lt;text x="125" y="205" font-size="11" fill="#7f8c8d"&gt;x‚ÇÅ&lt;/text&gt;</span></span>
<span id="cb31-1238"><a href=""></a><span class="vs">&lt;line x1="20" y1="200" x2="20" y2="100" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/&gt;</span></span>
<span id="cb31-1239"><a href=""></a><span class="vs">&lt;text x="5" y="95" font-size="11" fill="#7f8c8d"&gt;y&lt;/text&gt;</span></span>
<span id="cb31-1240"><a href=""></a><span class="vs">&lt;line x1="20" y1="200" x2="60" y2="220" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arrowhead)"/&gt;</span></span>
<span id="cb31-1241"><a href=""></a><span class="vs">&lt;text x="65" y="225" font-size="11" fill="#7f8c8d"&gt;x‚ÇÇ&lt;/text&gt;</span></span>
<span id="cb31-1242"><a href=""></a><span class="vs">&lt;defs&gt;</span></span>
<span id="cb31-1243"><a href=""></a><span class="vs">&lt;marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"&gt;</span></span>
<span id="cb31-1244"><a href=""></a><span class="vs">&lt;polygon points="0 0, 10 3, 0 6" fill="#7f8c8d"/&gt;</span></span>
<span id="cb31-1245"><a href=""></a><span class="vs">&lt;/marker&gt;</span></span>
<span id="cb31-1246"><a href=""></a><span class="vs">&lt;/defs&gt;</span></span>
<span id="cb31-1247"><a href=""></a><span class="vs">&lt;/svg&gt;</span></span>
<span id="cb31-1248"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb31-1249"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb31-1250"><a href=""></a><span class="vs">&lt;div style="flex: 1;"&gt;</span></span>
<span id="cb31-1251"><a href=""></a><span class="vs">&lt;p style="font-size: 14px;"&gt;</span></span>
<span id="cb31-1252"><a href=""></a><span class="vs">- With &lt;strong&gt;3 data points&lt;/strong&gt;, we estimate 3 parameters (Œ≤‚ÇÄ, Œ≤‚ÇÅ, Œ≤‚ÇÇ)&lt;br&gt;</span></span>
<span id="cb31-1253"><a href=""></a><span class="vs">- The plane passes through all 3 points exactly&lt;br&gt;</span></span>
<span id="cb31-1254"><a href=""></a><span class="vs">- &lt;strong&gt;No degrees of freedom left!&lt;/strong&gt; (3 - 3 = 0)&lt;br&gt;</span></span>
<span id="cb31-1255"><a href=""></a><span class="vs">- Need at least n = 4 for meaningful inference&lt;br&gt;</span></span>
<span id="cb31-1256"><a href=""></a><span class="vs">- Thus: df = &lt;strong&gt;n - 3&lt;/strong&gt;</span></span>
<span id="cb31-1257"><a href=""></a><span class="vs">&lt;/p&gt;</span></span>
<span id="cb31-1258"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb31-1259"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb31-1260"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb31-1261"><a href=""></a><span class="vs">`</span><span class="op">;</span></span>
<span id="cb31-1262"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-31" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb32" data-startfrom="1266" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1265;"><span id="cb32-1266"><a href=""></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb32-1267"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb32-1268"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;General Pattern: For p predictors&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb32-1269"><a href=""></a><span class="vs">&lt;div style="background: #e8f4f8; padding: 20px; border-radius: 8px; margin: 15px 0;"&gt;</span></span>
<span id="cb32-1270"><a href=""></a><span class="vs">&lt;p style="font-size: 16px; margin: 10px 0;"&gt;</span></span>
<span id="cb32-1271"><a href=""></a><span class="vs">- We estimate &lt;strong&gt;p + 1 parameters&lt;/strong&gt;: Œ≤‚ÇÄ, Œ≤‚ÇÅ, Œ≤‚ÇÇ, ..., Œ≤‚Çö&lt;br&gt;</span></span>
<span id="cb32-1272"><a href=""></a><span class="vs">- Need at least &lt;strong&gt;n = p + 1&lt;/strong&gt; points to fit the model&lt;br&gt;</span></span>
<span id="cb32-1273"><a href=""></a><span class="vs">- Degrees of freedom: &lt;strong&gt;df = n - (p + 1) = n - p - 1&lt;/strong&gt;&lt;br&gt;</span></span>
<span id="cb32-1274"><a href=""></a><span class="vs">- This represents the number of observations "free to vary" after estimating all parameters</span></span>
<span id="cb32-1275"><a href=""></a><span class="vs">&lt;/p&gt;</span></span>
<span id="cb32-1276"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb32-1277"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb32-1278"><a href=""></a></span>
<span id="cb32-1279"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb32-1280"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;üí° Key Insight:&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb32-1281"><a href=""></a><span class="vs">&lt;p style="background: #d4edda; padding: 15px; border-radius: 8px;"&gt;</span></span>
<span id="cb32-1282"><a href=""></a><span class="vs">Adjusted R¬≤ uses &lt;strong&gt;(n - p - 1)&lt;/strong&gt; to penalize models with more predictors. As p increases, df decreases, making the penalty larger. This prevents overfitting!</span></span>
<span id="cb32-1283"><a href=""></a><span class="vs">&lt;/p&gt;</span></span>
<span id="cb32-1284"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb32-1285"><a href=""></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-32" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="interactive-r¬≤-vs-adjusted-r¬≤-explorer" class="slide level2 scrollable">
<h2>üß© Interactive: R¬≤ vs Adjusted R¬≤ Explorer</h2>
<div class="cell panel-input">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb33" data-startfrom="1294" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1293;"><span id="cb33-1294"><a href=""></a>viewof interceptPlay <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="op">-</span><span class="dv">50</span><span class="op">,</span><span class="dv">100</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span><span class="dv">40</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span><span class="st">"Intercept (Œ≤‚ÇÄ)"</span>})</span>
<span id="cb33-1295"><a href=""></a>viewof slopePlay <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span><span class="fl">0.7</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span><span class="fl">0.01</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span><span class="st">"Slope (Œ≤‚ÇÅ)"</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-33-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-33-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb34" data-startfrom="1297" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1296;"><span id="cb34-1297"><a href=""></a>{</span>
<span id="cb34-1298"><a href=""></a>  <span class="co">// Use existing lemonadeData</span></span>
<span id="cb34-1299"><a href=""></a>  <span class="kw">const</span> n <span class="op">=</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb34-1300"><a href=""></a>  <span class="kw">const</span> temp <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">temperature</span>)<span class="op">;</span></span>
<span id="cb34-1301"><a href=""></a>  <span class="kw">const</span> sales <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">sales</span>)<span class="op">;</span></span>
<span id="cb34-1302"><a href=""></a>  </span>
<span id="cb34-1303"><a href=""></a>  <span class="co">// Calculate fitted values using slider parameters</span></span>
<span id="cb34-1304"><a href=""></a>  <span class="kw">const</span> fitY <span class="op">=</span> temp<span class="op">.</span><span class="fu">map</span>(t <span class="kw">=&gt;</span> interceptPlay <span class="op">+</span> slopePlay <span class="op">*</span> t)<span class="op">;</span></span>
<span id="cb34-1305"><a href=""></a>  </span>
<span id="cb34-1306"><a href=""></a>  <span class="co">// Calculate OLS estimates (optimal)</span></span>
<span id="cb34-1307"><a href=""></a>  <span class="kw">const</span> xbar <span class="op">=</span> temp<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span>b) <span class="kw">=&gt;</span> a<span class="op">+</span>b<span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb34-1308"><a href=""></a>  <span class="kw">const</span> ybar <span class="op">=</span> sales<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span>b) <span class="kw">=&gt;</span> a<span class="op">+</span>b<span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb34-1309"><a href=""></a>  </span>
<span id="cb34-1310"><a href=""></a>  <span class="kw">let</span> num <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> den <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb34-1311"><a href=""></a>  <span class="cf">for</span>(<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++</span>) { </span>
<span id="cb34-1312"><a href=""></a>    num <span class="op">+=</span> (temp[i] <span class="op">-</span> xbar) <span class="op">*</span> (sales[i] <span class="op">-</span> ybar)<span class="op">;</span> </span>
<span id="cb34-1313"><a href=""></a>    den <span class="op">+=</span> (temp[i] <span class="op">-</span> xbar) <span class="op">*</span> (temp[i] <span class="op">-</span> xbar)<span class="op">;</span></span>
<span id="cb34-1314"><a href=""></a>  }</span>
<span id="cb34-1315"><a href=""></a>  </span>
<span id="cb34-1316"><a href=""></a>  <span class="kw">const</span> b1_optimal <span class="op">=</span> num <span class="op">/</span> den<span class="op">;</span></span>
<span id="cb34-1317"><a href=""></a>  <span class="kw">const</span> b0_optimal <span class="op">=</span> ybar <span class="op">-</span> b1_optimal <span class="op">*</span> xbar<span class="op">;</span></span>
<span id="cb34-1318"><a href=""></a>  <span class="kw">const</span> fitY_optimal <span class="op">=</span> temp<span class="op">.</span><span class="fu">map</span>(t <span class="kw">=&gt;</span> b0_optimal <span class="op">+</span> b1_optimal <span class="op">*</span> t)<span class="op">;</span></span>
<span id="cb34-1319"><a href=""></a>  </span>
<span id="cb34-1320"><a href=""></a>  <span class="co">// Compute SSE, SST, R¬≤ for user's line</span></span>
<span id="cb34-1321"><a href=""></a>  <span class="kw">const</span> SSE <span class="op">=</span> sales<span class="op">.</span><span class="fu">reduce</span>((acc<span class="op">,</span> yi<span class="op">,</span> i) <span class="kw">=&gt;</span> acc <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(yi <span class="op">-</span> fitY[i]<span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb34-1322"><a href=""></a>  <span class="kw">const</span> SST <span class="op">=</span> sales<span class="op">.</span><span class="fu">reduce</span>((acc<span class="op">,</span> yi) <span class="kw">=&gt;</span> acc <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(yi <span class="op">-</span> ybar<span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb34-1323"><a href=""></a>  <span class="kw">const</span> R2 <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> SSE <span class="op">/</span> SST<span class="op">;</span></span>
<span id="cb34-1324"><a href=""></a>  <span class="kw">const</span> p <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// single predictor</span></span>
<span id="cb34-1325"><a href=""></a>  <span class="kw">const</span> R2_adj <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> (<span class="dv">1</span> <span class="op">-</span> R2) <span class="op">*</span> (n <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span> (n <span class="op">-</span> p <span class="op">-</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb34-1326"><a href=""></a>  </span>
<span id="cb34-1327"><a href=""></a>  <span class="co">// Compute for optimal line</span></span>
<span id="cb34-1328"><a href=""></a>  <span class="kw">const</span> SSE_optimal <span class="op">=</span> sales<span class="op">.</span><span class="fu">reduce</span>((acc<span class="op">,</span> yi<span class="op">,</span> i) <span class="kw">=&gt;</span> acc <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(yi <span class="op">-</span> fitY_optimal[i]<span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb34-1329"><a href=""></a>  <span class="kw">const</span> R2_optimal <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> SSE_optimal <span class="op">/</span> SST<span class="op">;</span></span>
<span id="cb34-1330"><a href=""></a>  <span class="kw">const</span> R2_adj_optimal <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> (<span class="dv">1</span> <span class="op">-</span> R2_optimal) <span class="op">*</span> (n <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span> (n <span class="op">-</span> p <span class="op">-</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb34-1331"><a href=""></a>  </span>
<span id="cb34-1332"><a href=""></a>  <span class="co">// Prepare data for plotting</span></span>
<span id="cb34-1333"><a href=""></a>  <span class="kw">const</span> scatterData <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> ({<span class="dt">temp</span><span class="op">:</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> d<span class="op">.</span><span class="at">sales</span>}))<span class="op">;</span></span>
<span id="cb34-1334"><a href=""></a>  <span class="kw">const</span> lineData <span class="op">=</span> temp<span class="op">.</span><span class="fu">map</span>((t<span class="op">,</span> i) <span class="kw">=&gt;</span> ({<span class="dt">temp</span><span class="op">:</span> t<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> fitY[i]}))<span class="op">;</span></span>
<span id="cb34-1335"><a href=""></a>  <span class="kw">const</span> lineData_optimal <span class="op">=</span> temp<span class="op">.</span><span class="fu">map</span>((t<span class="op">,</span> i) <span class="kw">=&gt;</span> ({<span class="dt">temp</span><span class="op">:</span> t<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> fitY_optimal[i]}))<span class="op">;</span></span>
<span id="cb34-1336"><a href=""></a>  </span>
<span id="cb34-1337"><a href=""></a>  <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb34-1338"><a href=""></a><span class="vs">    &lt;div style="display: flex; gap: 20px; margin: 20px 0;"&gt;</span></span>
<span id="cb34-1339"><a href=""></a><span class="vs">      &lt;div style="flex: 2;"&gt;</span></span>
<span id="cb34-1340"><a href=""></a><span class="vs">        </span><span class="sc">${</span>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb34-1341"><a href=""></a>          <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb34-1342"><a href=""></a>            Plot<span class="op">.</span><span class="fu">dot</span>(scatterData<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temp"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span>})<span class="op">,</span></span>
<span id="cb34-1343"><a href=""></a>            Plot<span class="op">.</span><span class="fu">line</span>(lineData<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temp"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span>})<span class="op">,</span></span>
<span id="cb34-1344"><a href=""></a>            Plot<span class="op">.</span><span class="fu">line</span>(lineData_optimal<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temp"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#27ae60"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"8,4"</span>})</span>
<span id="cb34-1345"><a href=""></a>          ]<span class="op">,</span></span>
<span id="cb34-1346"><a href=""></a>          <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Temperature (¬∞F)"</span>}<span class="op">,</span></span>
<span id="cb34-1347"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Sales"</span>}<span class="op">,</span></span>
<span id="cb34-1348"><a href=""></a>          <span class="dt">width</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span></span>
<span id="cb34-1349"><a href=""></a>          <span class="dt">height</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb34-1350"><a href=""></a>          <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb34-1351"><a href=""></a>        })<span class="sc">}</span></span>
<span id="cb34-1352"><a href=""></a><span class="vs">        &lt;div style="margin-top: 10px; font-size: 12px;"&gt;</span></span>
<span id="cb34-1353"><a href=""></a><span class="vs">          &lt;span style="color: #e74c3c;"&gt;‚îÅ‚îÅ‚îÅ&lt;/span&gt; Your Line &amp;nbsp;&amp;nbsp;</span></span>
<span id="cb34-1354"><a href=""></a><span class="vs">          &lt;span style="color: #27ae60;"&gt;- - -&lt;/span&gt; Optimal OLS Line</span></span>
<span id="cb34-1355"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb34-1356"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb34-1357"><a href=""></a><span class="vs">      </span></span>
<span id="cb34-1358"><a href=""></a><span class="vs">      &lt;div style="flex: 1;"&gt;</span></span>
<span id="cb34-1359"><a href=""></a><span class="vs">        &lt;div style="padding: 15px; background: #fff3cd; border-radius: 8px; margin-bottom: 15px;"&gt;</span></span>
<span id="cb34-1360"><a href=""></a><span class="vs">          &lt;h4 style="margin-top: 0; color: #e74c3c;"&gt;üìä Your Line&lt;/h4&gt;</span></span>
<span id="cb34-1361"><a href=""></a><span class="vs">          &lt;p&gt;&lt;strong&gt;Œ≤‚ÇÄ =&lt;/strong&gt; </span><span class="sc">${</span>interceptPlay<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb34-1362"><a href=""></a><span class="vs">          &lt;p&gt;&lt;strong&gt;Œ≤‚ÇÅ =&lt;/strong&gt; </span><span class="sc">${</span>slopePlay<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb34-1363"><a href=""></a><span class="vs">          &lt;hr style="margin: 10px 0;"&gt;</span></span>
<span id="cb34-1364"><a href=""></a><span class="vs">          &lt;p style="font-size: 16px;"&gt;&lt;strong&gt;R¬≤ =&lt;/strong&gt; &lt;span style="color: #e74c3c; font-size: 18px;"&gt;</span><span class="sc">${</span>R2<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">4</span>)<span class="sc">}</span><span class="vs">&lt;/span&gt;&lt;/p&gt;</span></span>
<span id="cb34-1365"><a href=""></a><span class="vs">          &lt;p style="font-size: 16px;"&gt;&lt;strong&gt;Adj R¬≤ =&lt;/strong&gt; &lt;span style="color: #e74c3c; font-size: 18px;"&gt;</span><span class="sc">${</span>R2_adj<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">4</span>)<span class="sc">}</span><span class="vs">&lt;/span&gt;&lt;/p&gt;</span></span>
<span id="cb34-1366"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb34-1367"><a href=""></a><span class="vs">        </span></span>
<span id="cb34-1368"><a href=""></a><span class="vs">        &lt;div style="padding: 15px; background: #d4edda; border-radius: 8px;"&gt;</span></span>
<span id="cb34-1369"><a href=""></a><span class="vs">          &lt;h4 style="margin-top: 0; color: #27ae60;"&gt;‚ú® Optimal OLS Line&lt;/h4&gt;</span></span>
<span id="cb34-1370"><a href=""></a><span class="vs">          &lt;p&gt;&lt;strong&gt;Œ≤‚ÇÄ =&lt;/strong&gt; </span><span class="sc">${</span>b0_optimal<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb34-1371"><a href=""></a><span class="vs">          &lt;p&gt;&lt;strong&gt;Œ≤‚ÇÅ =&lt;/strong&gt; </span><span class="sc">${</span>b1_optimal<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">&lt;/p&gt;</span></span>
<span id="cb34-1372"><a href=""></a><span class="vs">          &lt;hr style="margin: 10px 0;"&gt;</span></span>
<span id="cb34-1373"><a href=""></a><span class="vs">          &lt;p style="font-size: 16px;"&gt;&lt;strong&gt;R¬≤ =&lt;/strong&gt; &lt;span style="color: #27ae60; font-size: 18px;"&gt;</span><span class="sc">${</span>R2_optimal<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">4</span>)<span class="sc">}</span><span class="vs">&lt;/span&gt;&lt;/p&gt;</span></span>
<span id="cb34-1374"><a href=""></a><span class="vs">          &lt;p style="font-size: 16px;"&gt;&lt;strong&gt;Adj R¬≤ =&lt;/strong&gt; &lt;span style="color: #27ae60; font-size: 18px;"&gt;</span><span class="sc">${</span>R2_adj_optimal<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">4</span>)<span class="sc">}</span><span class="vs">&lt;/span&gt;&lt;/p&gt;</span></span>
<span id="cb34-1375"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb34-1376"><a href=""></a><span class="vs">        </span></span>
<span id="cb34-1377"><a href=""></a><span class="vs">        &lt;div style="margin-top: 15px; padding: 10px; background: #e8f4f8; border-radius: 8px;"&gt;</span></span>
<span id="cb34-1378"><a href=""></a><span class="vs">          &lt;p style="font-size: 12px; margin: 5px 0;"&gt;&lt;strong&gt;n =&lt;/strong&gt; </span><span class="sc">${</span>n<span class="sc">}</span><span class="vs"> observations&lt;/p&gt;</span></span>
<span id="cb34-1379"><a href=""></a><span class="vs">          &lt;p style="font-size: 12px; margin: 5px 0;"&gt;&lt;strong&gt;p =&lt;/strong&gt; </span><span class="sc">${</span>p<span class="sc">}</span><span class="vs"> predictor&lt;/p&gt;</span></span>
<span id="cb34-1380"><a href=""></a><span class="vs">          &lt;p style="font-size: 12px; margin: 5px 0;"&gt;&lt;strong&gt;df =&lt;/strong&gt; </span><span class="sc">${</span>n <span class="op">-</span> p <span class="op">-</span> <span class="dv">1</span><span class="sc">}</span><span class="vs"> degrees of freedom&lt;/p&gt;</span></span>
<span id="cb34-1381"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb34-1382"><a href=""></a><span class="vs">        </span></span>
<span id="cb34-1383"><a href=""></a><span class="vs">        &lt;p style="font-size: 12px; color: #7f8c8d; margin-top: 15px;"&gt;</span></span>
<span id="cb34-1384"><a href=""></a><span class="vs">          üí° Adjust sliders to see how R¬≤ and Adjusted R¬≤ change!</span></span>
<span id="cb34-1385"><a href=""></a><span class="vs">        &lt;/p&gt;</span></span>
<span id="cb34-1386"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb34-1387"><a href=""></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb34-1388"><a href=""></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb34-1389"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-34" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="interactive-ssr-sse-sst-explorer" class="slide level2 scrollable">
<h2>üîç Interactive: SSR, SSE, SST Explorer</h2>
<div class="cell panel-input">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb35" data-startfrom="1398" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1397;"><span id="cb35-1398"><a href=""></a>viewof interceptExplorer <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="op">-</span><span class="dv">100</span><span class="op">,</span><span class="dv">100</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span><span class="dv">40</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span><span class="st">"Intercept (Œ≤‚ÇÄ)"</span>})</span>
<span id="cb35-1399"><a href=""></a>viewof slopeExplorer <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="op">-</span><span class="dv">3</span><span class="op">,</span><span class="dv">3</span>]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span><span class="fl">0.7</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span><span class="fl">0.01</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span><span class="st">"Slope (Œ≤‚ÇÅ)"</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-35-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-35-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>üí° <strong>Challenge:</strong> Adjust the sliders to minimize SSE and maximize <span class="math inline">\(R^2\)</span>. Can you match the optimal line?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb36" data-startfrom="1404" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1403;"><span id="cb36-1404"><a href=""></a>optimalLine <span class="op">=</span> {</span>
<span id="cb36-1405"><a href=""></a>  <span class="kw">const</span> n <span class="op">=</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb36-1406"><a href=""></a>  <span class="kw">const</span> meanTemp <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb36-1407"><a href=""></a>  <span class="kw">const</span> meanSales <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">sales</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb36-1408"><a href=""></a>  </span>
<span id="cb36-1409"><a href=""></a>  <span class="kw">let</span> numerator <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb36-1410"><a href=""></a>  <span class="kw">let</span> denominator <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb36-1411"><a href=""></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb36-1412"><a href=""></a>    numerator <span class="op">+=</span> (lemonadeData[i]<span class="op">.</span><span class="at">temperature</span> <span class="op">-</span> meanTemp) <span class="op">*</span> (lemonadeData[i]<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> meanSales)<span class="op">;</span></span>
<span id="cb36-1413"><a href=""></a>    denominator <span class="op">+=</span> (lemonadeData[i]<span class="op">.</span><span class="at">temperature</span> <span class="op">-</span> meanTemp) <span class="op">**</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb36-1414"><a href=""></a>  }</span>
<span id="cb36-1415"><a href=""></a>  </span>
<span id="cb36-1416"><a href=""></a>  <span class="kw">const</span> slope <span class="op">=</span> numerator <span class="op">/</span> denominator<span class="op">;</span></span>
<span id="cb36-1417"><a href=""></a>  <span class="kw">const</span> intercept <span class="op">=</span> meanSales <span class="op">-</span> slope <span class="op">*</span> meanTemp<span class="op">;</span></span>
<span id="cb36-1418"><a href=""></a>  </span>
<span id="cb36-1419"><a href=""></a>  <span class="cf">return</span> { slope<span class="op">,</span> intercept }<span class="op">;</span></span>
<span id="cb36-1420"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-36" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb37" data-startfrom="1423" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1422;"><span id="cb37-1423"><a href=""></a>{</span>
<span id="cb37-1424"><a href=""></a>  <span class="kw">const</span> meanSales <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">sales</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb37-1425"><a href=""></a>  <span class="kw">const</span> sst <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> (d<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> meanSales) <span class="op">**</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb37-1426"><a href=""></a>  </span>
<span id="cb37-1427"><a href=""></a>  <span class="kw">let</span> sseExplorer <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb37-1428"><a href=""></a>  <span class="kw">let</span> ssrExplorer <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb37-1429"><a href=""></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb37-1430"><a href=""></a>    <span class="kw">const</span> predicted <span class="op">=</span> interceptExplorer <span class="op">+</span> slopeExplorer <span class="op">*</span> lemonadeData[i]<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb37-1431"><a href=""></a>    sseExplorer <span class="op">+=</span> (lemonadeData[i]<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> predicted) <span class="op">**</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb37-1432"><a href=""></a>    ssrExplorer <span class="op">+=</span> (predicted <span class="op">-</span> meanSales) <span class="op">**</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb37-1433"><a href=""></a>  }</span>
<span id="cb37-1434"><a href=""></a>  <span class="kw">const</span> rSquaredExplorer <span class="op">=</span> ssrExplorer <span class="op">/</span> sst<span class="op">;</span></span>
<span id="cb37-1435"><a href=""></a>  </span>
<span id="cb37-1436"><a href=""></a>  <span class="kw">let</span> sseOptimal <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb37-1437"><a href=""></a>  <span class="kw">let</span> ssrOptimal <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb37-1438"><a href=""></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb37-1439"><a href=""></a>    <span class="kw">const</span> predicted <span class="op">=</span> optimalLine<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> optimalLine<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> lemonadeData[i]<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb37-1440"><a href=""></a>    sseOptimal <span class="op">+=</span> (lemonadeData[i]<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> predicted) <span class="op">**</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb37-1441"><a href=""></a>    ssrOptimal <span class="op">+=</span> (predicted <span class="op">-</span> meanSales) <span class="op">**</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb37-1442"><a href=""></a>  }</span>
<span id="cb37-1443"><a href=""></a>  <span class="kw">const</span> rSquaredOptimal <span class="op">=</span> ssrOptimal <span class="op">/</span> sst<span class="op">;</span></span>
<span id="cb37-1444"><a href=""></a></span>
<span id="cb37-1445"><a href=""></a>  <span class="kw">const</span> temps <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">temperature</span>)<span class="op">;</span></span>
<span id="cb37-1446"><a href=""></a>  <span class="kw">const</span> minTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb37-1447"><a href=""></a>  <span class="kw">const</span> maxTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb37-1448"><a href=""></a>  <span class="kw">const</span> textX <span class="op">=</span> maxTemp <span class="op">-</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb37-1449"><a href=""></a>  <span class="kw">const</span> explorerY <span class="op">=</span> interceptExplorer <span class="op">+</span> slopeExplorer <span class="op">*</span> textX<span class="op">;</span></span>
<span id="cb37-1450"><a href=""></a>  <span class="kw">const</span> optimalY <span class="op">=</span> optimalLine<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> optimalLine<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> textX<span class="op">;</span></span>
<span id="cb37-1451"><a href=""></a>  </span>
<span id="cb37-1452"><a href=""></a>  <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb37-1453"><a href=""></a><span class="vs">    &lt;div style="display: flex; gap: 15px; margin-bottom: 20px; min-height: 600px;"&gt;</span></span>
<span id="cb37-1454"><a href=""></a><span class="vs">      &lt;div style="flex: 1; min-width: 0;"&gt;</span></span>
<span id="cb37-1455"><a href=""></a><span class="vs">        &lt;h3 style="color: #34495e; margin-top: 0;"&gt;üìä Your Explorer Line&lt;/h3&gt;</span></span>
<span id="cb37-1456"><a href=""></a><span class="vs">        &lt;p&gt;&lt;strong&gt;Line:&lt;/strong&gt; Sales = </span><span class="sc">${</span>interceptExplorer<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>slopeExplorer<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs"> √ó Temperature&lt;/p&gt;</span></span>
<span id="cb37-1457"><a href=""></a><span class="vs">        &lt;table style="width: 100%; border-collapse: collapse; font-size: 14px;"&gt;</span></span>
<span id="cb37-1458"><a href=""></a><span class="vs">          &lt;tr style="background: #ecf0f1;"&gt;</span></span>
<span id="cb37-1459"><a href=""></a><span class="vs">            &lt;th style="padding: 8px; text-align: left; border: 1px solid #bdc3c7;"&gt;Metric&lt;/th&gt;</span></span>
<span id="cb37-1460"><a href=""></a><span class="vs">            &lt;th style="padding: 8px; text-align: right; border: 1px solid #bdc3c7;"&gt;Value&lt;/th&gt;</span></span>
<span id="cb37-1461"><a href=""></a><span class="vs">          &lt;/tr&gt;</span></span>
<span id="cb37-1462"><a href=""></a><span class="vs">          &lt;tr&gt;</span></span>
<span id="cb37-1463"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; border: 1px solid #bdc3c7;"&gt;SST (Total)&lt;/td&gt;</span></span>
<span id="cb37-1464"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; text-align: right; border: 1px solid #bdc3c7;"&gt;</span><span class="sc">${</span>sst<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb37-1465"><a href=""></a><span class="vs">          &lt;/tr&gt;</span></span>
<span id="cb37-1466"><a href=""></a><span class="vs">          &lt;tr&gt;</span></span>
<span id="cb37-1467"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; border: 1px solid #bdc3c7;"&gt;SSR (Regression)&lt;/td&gt;</span></span>
<span id="cb37-1468"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; text-align: right; border: 1px solid #bdc3c7;"&gt;</span><span class="sc">${</span>ssrExplorer<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb37-1469"><a href=""></a><span class="vs">          &lt;/tr&gt;</span></span>
<span id="cb37-1470"><a href=""></a><span class="vs">          &lt;tr&gt;</span></span>
<span id="cb37-1471"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; border: 1px solid #bdc3c7;"&gt;SSE (Error)&lt;/td&gt;</span></span>
<span id="cb37-1472"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; text-align: right; border: 1px solid #bdc3c7;"&gt;</span><span class="sc">${</span>sseExplorer<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb37-1473"><a href=""></a><span class="vs">          &lt;/tr&gt;</span></span>
<span id="cb37-1474"><a href=""></a><span class="vs">          &lt;tr style="background: #ecf0f1; font-weight: bold;"&gt;</span></span>
<span id="cb37-1475"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; border: 1px solid #bdc3c7;"&gt;R¬≤&lt;/td&gt;</span></span>
<span id="cb37-1476"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; text-align: right; border: 1px solid #bdc3c7;"&gt;</span><span class="sc">${</span>rSquaredExplorer<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">4</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb37-1477"><a href=""></a><span class="vs">          &lt;/tr&gt;</span></span>
<span id="cb37-1478"><a href=""></a><span class="vs">        &lt;/table&gt;</span></span>
<span id="cb37-1479"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb37-1480"><a href=""></a><span class="vs">      </span></span>
<span id="cb37-1481"><a href=""></a><span class="vs">      &lt;div style="flex: 1; min-width: 0;"&gt;</span></span>
<span id="cb37-1482"><a href=""></a><span class="vs">        &lt;h3 style="color: #27ae60; margin-top: 0;"&gt;‚ú® Optimal Line (OLS)&lt;/h3&gt;</span></span>
<span id="cb37-1483"><a href=""></a><span class="vs">        &lt;p&gt;&lt;strong&gt;Line:&lt;/strong&gt; Sales = </span><span class="sc">${</span>optimalLine<span class="op">.</span><span class="at">intercept</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>optimalLine<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs"> √ó Temperature&lt;/p&gt;</span></span>
<span id="cb37-1484"><a href=""></a><span class="vs">        &lt;table style="width: 100%; border-collapse: collapse; font-size: 14px;"&gt;</span></span>
<span id="cb37-1485"><a href=""></a><span class="vs">          &lt;tr style="background: #d5f4e6;"&gt;</span></span>
<span id="cb37-1486"><a href=""></a><span class="vs">            &lt;th style="padding: 8px; text-align: left; border: 1px solid #27ae60;"&gt;Metric&lt;/th&gt;</span></span>
<span id="cb37-1487"><a href=""></a><span class="vs">            &lt;th style="padding: 8px; text-align: right; border: 1px solid #27ae60;"&gt;Value&lt;/th&gt;</span></span>
<span id="cb37-1488"><a href=""></a><span class="vs">          &lt;/tr&gt;</span></span>
<span id="cb37-1489"><a href=""></a><span class="vs">          &lt;tr&gt;</span></span>
<span id="cb37-1490"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; border: 1px solid #27ae60;"&gt;SST (Total)&lt;/td&gt;</span></span>
<span id="cb37-1491"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; text-align: right; border: 1px solid #27ae60;"&gt;</span><span class="sc">${</span>sst<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb37-1492"><a href=""></a><span class="vs">          &lt;/tr&gt;</span></span>
<span id="cb37-1493"><a href=""></a><span class="vs">          &lt;tr&gt;</span></span>
<span id="cb37-1494"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; border: 1px solid #27ae60;"&gt;SSR (Regression)&lt;/td&gt;</span></span>
<span id="cb37-1495"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; text-align: right; border: 1px solid #27ae60;"&gt;</span><span class="sc">${</span>ssrOptimal<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb37-1496"><a href=""></a><span class="vs">          &lt;/tr&gt;</span></span>
<span id="cb37-1497"><a href=""></a><span class="vs">          &lt;tr&gt;</span></span>
<span id="cb37-1498"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; border: 1px solid #27ae60;"&gt;SSE (Error)&lt;/td&gt;</span></span>
<span id="cb37-1499"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; text-align: right; border: 1px solid #27ae60;"&gt;</span><span class="sc">${</span>sseOptimal<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb37-1500"><a href=""></a><span class="vs">          &lt;/tr&gt;</span></span>
<span id="cb37-1501"><a href=""></a><span class="vs">          &lt;tr style="background: #d5f4e6; font-weight: bold;"&gt;</span></span>
<span id="cb37-1502"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; border: 1px solid #27ae60;"&gt;R¬≤&lt;/td&gt;</span></span>
<span id="cb37-1503"><a href=""></a><span class="vs">            &lt;td style="padding: 8px; text-align: right; border: 1px solid #27ae60;"&gt;</span><span class="sc">${</span>rSquaredOptimal<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">4</span>)<span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb37-1504"><a href=""></a><span class="vs">          &lt;/tr&gt;</span></span>
<span id="cb37-1505"><a href=""></a><span class="vs">        &lt;/table&gt;</span></span>
<span id="cb37-1506"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb37-1507"><a href=""></a><span class="vs">      </span></span>
<span id="cb37-1508"><a href=""></a><span class="vs">      &lt;div style="flex: 1.2; min-width: 0;"&gt;</span></span>
<span id="cb37-1509"><a href=""></a><span class="vs">        &lt;h3 style="color: #2980b9; margin-top: 0;"&gt;üìà Live Visualization&lt;/h3&gt;</span></span>
<span id="cb37-1510"><a href=""></a><span class="vs">        &lt;div style="height: 400px;"&gt;</span></span>
<span id="cb37-1511"><a href=""></a><span class="vs">          </span><span class="sc">${</span>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb37-1512"><a href=""></a>            <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb37-1513"><a href=""></a>              Plot<span class="op">.</span><span class="fu">dot</span>(lemonadeData<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">3</span>})<span class="op">,</span></span>
<span id="cb37-1514"><a href=""></a>              Plot<span class="op">.</span><span class="fu">ruleY</span>([meanSales]<span class="op">,</span> {<span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"5,5"</span>})<span class="op">,</span></span>
<span id="cb37-1515"><a href=""></a>              Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb37-1516"><a href=""></a>                [{<span class="dt">temperature</span><span class="op">:</span> minTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> interceptExplorer <span class="op">+</span> slopeExplorer <span class="op">*</span> minTemp}<span class="op">,</span></span>
<span id="cb37-1517"><a href=""></a>                 {<span class="dt">temperature</span><span class="op">:</span> maxTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> interceptExplorer <span class="op">+</span> slopeExplorer <span class="op">*</span> maxTemp}]<span class="op">,</span></span>
<span id="cb37-1518"><a href=""></a>                {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#34495e"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span>}</span>
<span id="cb37-1519"><a href=""></a>              )<span class="op">,</span></span>
<span id="cb37-1520"><a href=""></a>              Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb37-1521"><a href=""></a>                [{<span class="dt">temperature</span><span class="op">:</span> minTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> optimalLine<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> optimalLine<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> minTemp}<span class="op">,</span></span>
<span id="cb37-1522"><a href=""></a>                 {<span class="dt">temperature</span><span class="op">:</span> maxTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> optimalLine<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> optimalLine<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> maxTemp}]<span class="op">,</span></span>
<span id="cb37-1523"><a href=""></a>                {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#27ae60"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"8,4"</span>}</span>
<span id="cb37-1524"><a href=""></a>              )<span class="op">,</span></span>
<span id="cb37-1525"><a href=""></a>              Plot<span class="op">.</span><span class="fu">link</span>(</span>
<span id="cb37-1526"><a href=""></a>                lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> ({</span>
<span id="cb37-1527"><a href=""></a>                  <span class="dt">x1</span><span class="op">:</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span></span>
<span id="cb37-1528"><a href=""></a>                  <span class="dt">y1</span><span class="op">:</span> d<span class="op">.</span><span class="at">sales</span><span class="op">,</span></span>
<span id="cb37-1529"><a href=""></a>                  <span class="dt">x2</span><span class="op">:</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span></span>
<span id="cb37-1530"><a href=""></a>                  <span class="dt">y2</span><span class="op">:</span> interceptExplorer <span class="op">+</span> slopeExplorer <span class="op">*</span> d<span class="op">.</span><span class="at">temperature</span></span>
<span id="cb37-1531"><a href=""></a>                }))<span class="op">,</span></span>
<span id="cb37-1532"><a href=""></a>                {<span class="dt">x1</span><span class="op">:</span> <span class="st">"x1"</span><span class="op">,</span> <span class="dt">y1</span><span class="op">:</span> <span class="st">"y1"</span><span class="op">,</span> <span class="dt">x2</span><span class="op">:</span> <span class="st">"x2"</span><span class="op">,</span> <span class="dt">y2</span><span class="op">:</span> <span class="st">"y2"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#3498db"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">opacity</span><span class="op">:</span> <span class="fl">0.5</span>}</span>
<span id="cb37-1533"><a href=""></a>              )<span class="op">,</span></span>
<span id="cb37-1534"><a href=""></a>              Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb37-1535"><a href=""></a>                [{<span class="dt">x</span><span class="op">:</span> textX<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> explorerY<span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="vs">`Your Line`</span>}]<span class="op">,</span></span>
<span id="cb37-1536"><a href=""></a>                {<span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#34495e"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span> <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="dv">8</span>}</span>
<span id="cb37-1537"><a href=""></a>              )<span class="op">,</span></span>
<span id="cb37-1538"><a href=""></a>              Plot<span class="op">.</span><span class="fu">text</span>(</span>
<span id="cb37-1539"><a href=""></a>                [{<span class="dt">x</span><span class="op">:</span> textX<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> optimalY<span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="vs">`Optimal OLS`</span>}]<span class="op">,</span></span>
<span id="cb37-1540"><a href=""></a>                {<span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#27ae60"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span> <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span> <span class="dt">dx</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">8</span>}</span>
<span id="cb37-1541"><a href=""></a>              )</span>
<span id="cb37-1542"><a href=""></a>            ]<span class="op">,</span></span>
<span id="cb37-1543"><a href=""></a>            <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Temperature (¬∞F)"</span>}<span class="op">,</span></span>
<span id="cb37-1544"><a href=""></a>            <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Sales ($)"</span>}<span class="op">,</span></span>
<span id="cb37-1545"><a href=""></a>            <span class="dt">width</span><span class="op">:</span> <span class="dv">350</span><span class="op">,</span></span>
<span id="cb37-1546"><a href=""></a>            <span class="dt">height</span><span class="op">:</span> <span class="dv">350</span><span class="op">,</span></span>
<span id="cb37-1547"><a href=""></a>            <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb37-1548"><a href=""></a>            <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">30</span><span class="op">,</span></span>
<span id="cb37-1549"><a href=""></a>            <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">45</span><span class="op">,</span></span>
<span id="cb37-1550"><a href=""></a>            <span class="dt">marginRight</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb37-1551"><a href=""></a>            <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb37-1552"><a href=""></a>          })<span class="sc">}</span></span>
<span id="cb37-1553"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb37-1554"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb37-1555"><a href=""></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb37-1556"><a href=""></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb37-1557"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-37" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="interpreting-regression-coefficients" class="slide level2 scrollable">
<h2>üìä Interpreting Regression Coefficients</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb38" data-startfrom="1565" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1564;"><span id="cb38-1565"><a href=""></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb38-1566"><a href=""></a><span class="vs">&lt;p&gt;For our lemonade model: &lt;strong&gt;Sales = </span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">intercept</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> + </span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs"> √ó Temperature&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb38-1567"><a href=""></a></span>
<span id="cb38-1568"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb38-1569"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Intercept (Œ≤‚ÇÄ = </span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">intercept</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">):&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb38-1570"><a href=""></a><span class="vs">&lt;ul&gt;</span></span>
<span id="cb38-1571"><a href=""></a><span class="vs">&lt;li&gt;Expected sales when temperature is 0¬∞F&lt;/li&gt;</span></span>
<span id="cb38-1572"><a href=""></a><span class="vs">&lt;li&gt;&lt;strong&gt;Question:&lt;/strong&gt; Does this make practical sense? ü§î&lt;/li&gt;</span></span>
<span id="cb38-1573"><a href=""></a><span class="vs">&lt;li&gt;Often just a mathematical anchor, not always interpretable in context&lt;/li&gt;</span></span>
<span id="cb38-1574"><a href=""></a><span class="vs">&lt;/ul&gt;</span></span>
<span id="cb38-1575"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb38-1576"><a href=""></a></span>
<span id="cb38-1577"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb38-1578"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Slope (Œ≤‚ÇÅ = </span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">):&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb38-1579"><a href=""></a><span class="vs">&lt;ul&gt;</span></span>
<span id="cb38-1580"><a href=""></a><span class="vs">&lt;li&gt;For each 1¬∞F increase in temperature, sales increase by ~</span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs"> lemonades&lt;/li&gt;</span></span>
<span id="cb38-1581"><a href=""></a><span class="vs">&lt;li&gt;This is our &lt;strong&gt;marginal effect&lt;/strong&gt; of temperature&lt;/li&gt;</span></span>
<span id="cb38-1582"><a href=""></a><span class="vs">&lt;/ul&gt;</span></span>
<span id="cb38-1583"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb38-1584"><a href=""></a></span>
<span id="cb38-1585"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb38-1586"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Practice Question:&lt;/strong&gt; If temperature goes from 80¬∞F to 85¬∞F, how much do sales increase? ü§î&lt;/p&gt;</span></span>
<span id="cb38-1587"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb38-1588"><a href=""></a></span>
<span id="cb38-1589"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb38-1590"><a href=""></a><span class="vs">&lt;ul&gt;</span></span>
<span id="cb38-1591"><a href=""></a><span class="vs">&lt;li&gt;&lt;strong&gt;Answer:&lt;/strong&gt; 5 √ó </span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs"> ‚âà </span><span class="sc">${</span>(<span class="dv">5</span> <span class="op">*</span> ssrCalcs<span class="op">.</span><span class="at">slope</span>)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs"> more lemonades&lt;/li&gt;</span></span>
<span id="cb38-1592"><a href=""></a><span class="vs">&lt;/ul&gt;</span></span>
<span id="cb38-1593"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb38-1594"><a href=""></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-38" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="statistical-inference-in-regression" class="slide level2 scrollable">
<h2>üìà Statistical Inference in Regression</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb39" data-startfrom="1602" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1601;"><span id="cb39-1602"><a href=""></a><span class="co">// Calculate confidence intervals for regression coefficients</span></span>
<span id="cb39-1603"><a href=""></a>ciCalcs <span class="op">=</span> {</span>
<span id="cb39-1604"><a href=""></a>  <span class="kw">const</span> n <span class="op">=</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb39-1605"><a href=""></a>  <span class="kw">const</span> meanTemp <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> n<span class="op">;</span></span>
<span id="cb39-1606"><a href=""></a>  </span>
<span id="cb39-1607"><a href=""></a>  <span class="co">// Calculate residuals and SSE</span></span>
<span id="cb39-1608"><a href=""></a>  <span class="kw">let</span> sse <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb39-1609"><a href=""></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb39-1610"><a href=""></a>    <span class="kw">const</span> pred <span class="op">=</span> ssrCalcs<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> ssrCalcs<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> lemonadeData[i]<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb39-1611"><a href=""></a>    sse <span class="op">+=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(lemonadeData[i]<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> pred<span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb39-1612"><a href=""></a>  }</span>
<span id="cb39-1613"><a href=""></a>  </span>
<span id="cb39-1614"><a href=""></a>  <span class="co">// Standard error of regression</span></span>
<span id="cb39-1615"><a href=""></a>  <span class="kw">const</span> s <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(sse <span class="op">/</span> (n <span class="op">-</span> <span class="dv">2</span>))<span class="op">;</span></span>
<span id="cb39-1616"><a href=""></a>  </span>
<span id="cb39-1617"><a href=""></a>  <span class="co">// Sum of squared deviations of x</span></span>
<span id="cb39-1618"><a href=""></a>  <span class="kw">const</span> ssX <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(d<span class="op">.</span><span class="at">temperature</span> <span class="op">-</span> meanTemp<span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb39-1619"><a href=""></a>  </span>
<span id="cb39-1620"><a href=""></a>  <span class="co">// Standard error of slope</span></span>
<span id="cb39-1621"><a href=""></a>  <span class="kw">const</span> seBeta1 <span class="op">=</span> s <span class="op">/</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(ssX)<span class="op">;</span></span>
<span id="cb39-1622"><a href=""></a>  </span>
<span id="cb39-1623"><a href=""></a>  <span class="co">// t-critical value for 95% CI (approximate with z = 1.96 for large n)</span></span>
<span id="cb39-1624"><a href=""></a>  <span class="kw">const</span> tCrit <span class="op">=</span> <span class="fl">1.96</span><span class="op">;</span> <span class="co">// For large samples, use 2.042 for n=30</span></span>
<span id="cb39-1625"><a href=""></a>  </span>
<span id="cb39-1626"><a href=""></a>  <span class="co">// Confidence interval for slope</span></span>
<span id="cb39-1627"><a href=""></a>  <span class="kw">const</span> ci_lower <span class="op">=</span> ssrCalcs<span class="op">.</span><span class="at">slope</span> <span class="op">-</span> tCrit <span class="op">*</span> seBeta1<span class="op">;</span></span>
<span id="cb39-1628"><a href=""></a>  <span class="kw">const</span> ci_upper <span class="op">=</span> ssrCalcs<span class="op">.</span><span class="at">slope</span> <span class="op">+</span> tCrit <span class="op">*</span> seBeta1<span class="op">;</span></span>
<span id="cb39-1629"><a href=""></a>  <span class="kw">const</span> margin <span class="op">=</span> tCrit <span class="op">*</span> seBeta1<span class="op">;</span></span>
<span id="cb39-1630"><a href=""></a>  </span>
<span id="cb39-1631"><a href=""></a>  <span class="cf">return</span> { </span>
<span id="cb39-1632"><a href=""></a>    <span class="dt">seBeta1</span><span class="op">:</span> seBeta1<span class="op">,</span> </span>
<span id="cb39-1633"><a href=""></a>    <span class="dt">ci_lower</span><span class="op">:</span> ci_lower<span class="op">,</span> </span>
<span id="cb39-1634"><a href=""></a>    <span class="dt">ci_upper</span><span class="op">:</span> ci_upper<span class="op">,</span></span>
<span id="cb39-1635"><a href=""></a>    <span class="dt">margin</span><span class="op">:</span> margin</span>
<span id="cb39-1636"><a href=""></a>  }<span class="op">;</span></span>
<span id="cb39-1637"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-39" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb40" data-startfrom="1641" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1640;"><span id="cb40-1641"><a href=""></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb40-1642"><a href=""></a><span class="vs">&lt;p&gt;Beyond finding the best-fit line, we ask: &lt;strong&gt;Is the relationship real or just random noise?&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb40-1643"><a href=""></a></span>
<span id="cb40-1644"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb40-1645"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Confidence Intervals:&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb40-1646"><a href=""></a><span class="vs">&lt;ul&gt;</span></span>
<span id="cb40-1647"><a href=""></a><span class="vs">&lt;li&gt;Œ≤‚ÇÅ = </span><span class="sc">${</span>ssrCalcs<span class="op">.</span><span class="at">slope</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs"> ¬± </span><span class="sc">${</span>ciCalcs<span class="op">.</span><span class="at">margin</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs"> (95% CI)&lt;/li&gt;</span></span>
<span id="cb40-1648"><a href=""></a><span class="vs">&lt;li&gt;We're 95% confident the true effect is between </span><span class="sc">${</span>ciCalcs<span class="op">.</span><span class="at">ci_lower</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs"> and </span><span class="sc">${</span>ciCalcs<span class="op">.</span><span class="at">ci_upper</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">&lt;/li&gt;</span></span>
<span id="cb40-1649"><a href=""></a><span class="vs">&lt;li&gt;The interval </span><span class="sc">${</span>ciCalcs<span class="op">.</span><span class="at">ci_lower</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="st">"doesn't contain 0, suggesting a real effect!"</span> <span class="op">:</span> <span class="st">"contains 0, suggesting no significant effect."</span><span class="sc">}</span><span class="vs">&lt;/li&gt;</span></span>
<span id="cb40-1650"><a href=""></a><span class="vs">&lt;/ul&gt;</span></span>
<span id="cb40-1651"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb40-1652"><a href=""></a></span>
<span id="cb40-1653"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb40-1654"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Hypothesis Testing:&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb40-1655"><a href=""></a><span class="vs">&lt;ul&gt;</span></span>
<span id="cb40-1656"><a href=""></a><span class="vs">&lt;li&gt;H‚ÇÄ: Œ≤‚ÇÅ = 0 (temperature has &lt;strong&gt;no&lt;/strong&gt; effect)&lt;/li&gt;</span></span>
<span id="cb40-1657"><a href=""></a><span class="vs">&lt;li&gt;H‚ÇÅ: Œ≤‚ÇÅ ‚â† 0 (temperature &lt;strong&gt;does&lt;/strong&gt; affect sales)&lt;/li&gt;</span></span>
<span id="cb40-1658"><a href=""></a><span class="vs">&lt;/ul&gt;</span></span>
<span id="cb40-1659"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb40-1660"><a href=""></a></span>
<span id="cb40-1661"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb40-1662"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Question:&lt;/strong&gt; Based on our CI [</span><span class="sc">${</span>ciCalcs<span class="op">.</span><span class="at">ci_lower</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">, </span><span class="sc">${</span>ciCalcs<span class="op">.</span><span class="at">ci_upper</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">], can we reject H‚ÇÄ? ü§î&lt;/p&gt;</span></span>
<span id="cb40-1663"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb40-1664"><a href=""></a></span>
<span id="cb40-1665"><a href=""></a><span class="vs">&lt;div class="fragment"&gt;</span></span>
<span id="cb40-1666"><a href=""></a><span class="vs">&lt;ul&gt;</span></span>
<span id="cb40-1667"><a href=""></a><span class="vs">&lt;li&gt;&lt;strong&gt;Answer:&lt;/strong&gt; </span><span class="sc">${</span>ciCalcs<span class="op">.</span><span class="at">ci_lower</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="st">"Yes! The 95% confidence interval excludes 0, so we reject the null hypothesis."</span> <span class="op">:</span> <span class="st">"No, the interval includes 0, so we fail to reject the null hypothesis."</span><span class="sc">}</span><span class="vs">&lt;/li&gt;</span></span>
<span id="cb40-1668"><a href=""></a><span class="vs">&lt;/ul&gt;</span></span>
<span id="cb40-1669"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb40-1670"><a href=""></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-40" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="four-key-assumptions-of-ols-regression" class="slide level2 incremental scrollable">
<h2>üß© Four Key Assumptions of OLS Regression</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb41" data-startfrom="1681" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1680;"><span id="cb41-1681"><a href=""></a>{</span>
<span id="cb41-1682"><a href=""></a><span class="kw">const</span> temps <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">temperature</span>)<span class="op">;</span></span>
<span id="cb41-1683"><a href=""></a><span class="kw">const</span> minTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb41-1684"><a href=""></a><span class="kw">const</span> maxTemp <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>temps)<span class="op">;</span></span>
<span id="cb41-1685"><a href=""></a><span class="kw">const</span> meanSales <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">sales</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb41-1686"><a href=""></a></span>
<span id="cb41-1687"><a href=""></a><span class="kw">let</span> numerator <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> denominator <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb41-1688"><a href=""></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb41-1689"><a href=""></a>  numerator <span class="op">+=</span> (lemonadeData[i]<span class="op">.</span><span class="at">temperature</span> <span class="op">-</span> (minTemp<span class="op">+</span>maxTemp)<span class="op">/</span><span class="dv">2</span>) <span class="op">*</span> (lemonadeData[i]<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> meanSales)<span class="op">;</span></span>
<span id="cb41-1690"><a href=""></a>  denominator <span class="op">+=</span> (lemonadeData[i]<span class="op">.</span><span class="at">temperature</span> <span class="op">-</span> (minTemp<span class="op">+</span>maxTemp)<span class="op">/</span><span class="dv">2</span>) <span class="op">**</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb41-1691"><a href=""></a>}</span>
<span id="cb41-1692"><a href=""></a><span class="kw">const</span> olsSlope <span class="op">=</span> numerator <span class="op">/</span> denominator<span class="op">;</span></span>
<span id="cb41-1693"><a href=""></a><span class="kw">const</span> olsIntercept <span class="op">=</span> meanSales <span class="op">-</span> olsSlope <span class="op">*</span> ((minTemp<span class="op">+</span>maxTemp)<span class="op">/</span><span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb41-1694"><a href=""></a></span>
<span id="cb41-1695"><a href=""></a><span class="cf">return</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb41-1696"><a href=""></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb41-1697"><a href=""></a>    Plot<span class="op">.</span><span class="fu">dot</span>(lemonadeData<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span>})<span class="op">,</span></span>
<span id="cb41-1698"><a href=""></a>    Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb41-1699"><a href=""></a>      [{<span class="dt">temperature</span><span class="op">:</span> minTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> olsIntercept <span class="op">+</span> olsSlope <span class="op">*</span> minTemp}<span class="op">,</span></span>
<span id="cb41-1700"><a href=""></a>       {<span class="dt">temperature</span><span class="op">:</span> maxTemp<span class="op">,</span> <span class="dt">sales</span><span class="op">:</span> olsIntercept <span class="op">+</span> olsSlope <span class="op">*</span> maxTemp}]<span class="op">,</span></span>
<span id="cb41-1701"><a href=""></a>      {<span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#27ae60"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"8,4"</span>}</span>
<span id="cb41-1702"><a href=""></a>    )<span class="op">,</span></span>
<span id="cb41-1703"><a href=""></a>    Plot<span class="op">.</span><span class="fu">text</span>([</span>
<span id="cb41-1704"><a href=""></a>      {</span>
<span id="cb41-1705"><a href=""></a>        <span class="dt">temperature</span><span class="op">:</span> minTemp <span class="op">+</span> (maxTemp<span class="op">-</span>minTemp)<span class="op">*</span><span class="fl">0.85</span><span class="op">,</span></span>
<span id="cb41-1706"><a href=""></a>        <span class="dt">sales</span><span class="op">:</span> olsIntercept <span class="op">+</span> olsSlope <span class="op">*</span> (minTemp <span class="op">+</span> (maxTemp<span class="op">-</span>minTemp)<span class="op">*</span><span class="fl">0.85</span>)<span class="op">,</span></span>
<span id="cb41-1707"><a href=""></a>        <span class="dt">text</span><span class="op">:</span> <span class="vs">`OLS Line`</span></span>
<span id="cb41-1708"><a href=""></a>      }</span>
<span id="cb41-1709"><a href=""></a>    ]<span class="op">,</span> {</span>
<span id="cb41-1710"><a href=""></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"temperature"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sales"</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"text"</span><span class="op">,</span> <span class="dt">fontSize</span><span class="op">:</span> <span class="dv">14</span><span class="op">,</span> <span class="dt">fontWeight</span><span class="op">:</span> <span class="st">"bold"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#27ae60"</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">18</span></span>
<span id="cb41-1711"><a href=""></a>    })</span>
<span id="cb41-1712"><a href=""></a>  ]<span class="op">,</span></span>
<span id="cb41-1713"><a href=""></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Temperature (¬∞F)"</span>}<span class="op">,</span></span>
<span id="cb41-1714"><a href=""></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Sales ($)"</span>}<span class="op">,</span></span>
<span id="cb41-1715"><a href=""></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb41-1716"><a href=""></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb41-1717"><a href=""></a>  <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb41-1718"><a href=""></a>})<span class="op">;</span></span>
<span id="cb41-1719"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-41" data-nodetype="expression">

</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Four fundamental assumptions:</strong></p>
<ol type="1">
<li class="fragment"><p><strong>Linearity</strong>: The relationship between predictors and response is linear</p></li>
<li class="fragment"><p><strong>Independence</strong>: Observations are independent (no autocorrelation)</p></li>
<li class="fragment"><p><strong>Homoscedasticity</strong>: Constant variance of residuals across all predictor levels</p></li>
<li class="fragment"><p><strong>Normality</strong>: Residuals are normally distributed</p></li>
</ol>
</div><ul>
<li class="fragment"><strong>Why check these?</strong> Violations lead to biased estimates, unreliable standard errors, and invalid hypothesis tests!</li>
</ul>
</div>
</section>
<section id="checking-assumption-1-independence" class="slide level2 smaller scrollable">
<h2>üìä Checking Assumption 1: Independence</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb42" data-startfrom="1745" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1744;"><span id="cb42-1745"><a href=""></a>{</span>
<span id="cb42-1746"><a href=""></a>  <span class="kw">const</span> residualData <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>((d<span class="op">,</span> index) <span class="kw">=&gt;</span> {</span>
<span id="cb42-1747"><a href=""></a>    <span class="kw">const</span> predicted <span class="op">=</span> optimalLine<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> optimalLine<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb42-1748"><a href=""></a>    <span class="kw">const</span> residual <span class="op">=</span> d<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> predicted<span class="op">;</span></span>
<span id="cb42-1749"><a href=""></a>    <span class="cf">return</span> {</span>
<span id="cb42-1750"><a href=""></a>      <span class="dt">day</span><span class="op">:</span> d<span class="op">.</span><span class="at">day</span><span class="op">,</span></span>
<span id="cb42-1751"><a href=""></a>      <span class="dt">dayIndex</span><span class="op">:</span> index <span class="op">+</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb42-1752"><a href=""></a>      <span class="dt">residual</span><span class="op">:</span> residual<span class="op">,</span></span>
<span id="cb42-1753"><a href=""></a>      <span class="dt">temperature</span><span class="op">:</span> d<span class="op">.</span><span class="at">temperature</span></span>
<span id="cb42-1754"><a href=""></a>    }<span class="op">;</span></span>
<span id="cb42-1755"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb42-1756"><a href=""></a>  </span>
<span id="cb42-1757"><a href=""></a>  <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb42-1758"><a href=""></a><span class="vs">    &lt;div style="display: flex; gap: 20px; margin: 20px 0;"&gt;</span></span>
<span id="cb42-1759"><a href=""></a><span class="vs">      &lt;div style="flex: 1;"&gt;</span></span>
<span id="cb42-1760"><a href=""></a><span class="vs">        &lt;h4 style="color: #2980b9; margin-top: 0;"&gt;Residuals vs. Time (Day)&lt;/h4&gt;</span></span>
<span id="cb42-1761"><a href=""></a><span class="vs">        </span><span class="sc">${</span>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb42-1762"><a href=""></a>          <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb42-1763"><a href=""></a>            Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>]<span class="op">,</span> {<span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"3,3"</span>})<span class="op">,</span></span>
<span id="cb42-1764"><a href=""></a>            Plot<span class="op">.</span><span class="fu">line</span>(residualData<span class="op">,</span> {</span>
<span id="cb42-1765"><a href=""></a>              <span class="dt">x</span><span class="op">:</span> <span class="st">"dayIndex"</span><span class="op">,</span> </span>
<span id="cb42-1766"><a href=""></a>              <span class="dt">y</span><span class="op">:</span> <span class="st">"residual"</span><span class="op">,</span> </span>
<span id="cb42-1767"><a href=""></a>              <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#3498db"</span><span class="op">,</span></span>
<span id="cb42-1768"><a href=""></a>              <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb42-1769"><a href=""></a>            })<span class="op">,</span></span>
<span id="cb42-1770"><a href=""></a>            Plot<span class="op">.</span><span class="fu">dot</span>(residualData<span class="op">,</span> {</span>
<span id="cb42-1771"><a href=""></a>              <span class="dt">x</span><span class="op">:</span> <span class="st">"dayIndex"</span><span class="op">,</span> </span>
<span id="cb42-1772"><a href=""></a>              <span class="dt">y</span><span class="op">:</span> <span class="st">"residual"</span><span class="op">,</span> </span>
<span id="cb42-1773"><a href=""></a>              <span class="dt">fill</span><span class="op">:</span> <span class="st">"#3498db"</span><span class="op">,</span> </span>
<span id="cb42-1774"><a href=""></a>              <span class="dt">r</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span></span>
<span id="cb42-1775"><a href=""></a>              <span class="dt">title</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="vs">`Day </span><span class="sc">${</span>d<span class="op">.</span><span class="at">day</span><span class="sc">}</span><span class="vs">: </span><span class="sc">${</span>d<span class="op">.</span><span class="at">residual</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb42-1776"><a href=""></a>            })</span>
<span id="cb42-1777"><a href=""></a>          ]<span class="op">,</span></span>
<span id="cb42-1778"><a href=""></a>          <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Day"</span>}<span class="op">,</span></span>
<span id="cb42-1779"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Residuals (e·µ¢)"</span><span class="op">,</span> <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb42-1780"><a href=""></a>          <span class="dt">width</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb42-1781"><a href=""></a>          <span class="dt">height</span><span class="op">:</span> <span class="dv">300</span></span>
<span id="cb42-1782"><a href=""></a>        })<span class="sc">}</span></span>
<span id="cb42-1783"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb42-1784"><a href=""></a><span class="vs">      </span></span>
<span id="cb42-1785"><a href=""></a><span class="vs">      &lt;div style="flex: 1;"&gt;</span></span>
<span id="cb42-1786"><a href=""></a><span class="vs">        &lt;div style="background: #e8f4f8; padding: 20px; border-radius: 8px; height: 300px;"&gt;</span></span>
<span id="cb42-1787"><a href=""></a><span class="vs">          &lt;h4 style="color: #2980b9; margin-top: 0;"&gt;‚úÖ Independence Principle&lt;/h4&gt;</span></span>
<span id="cb42-1788"><a href=""></a><span class="vs">          &lt;p&gt;&lt;strong&gt;What we check:&lt;/strong&gt; No systematic pattern over time or observation order.&lt;/p&gt;</span></span>
<span id="cb42-1789"><a href=""></a><span class="vs">          </span></span>
<span id="cb42-1790"><a href=""></a><span class="vs">          &lt;div style="margin: 15px 0;"&gt;</span></span>
<span id="cb42-1791"><a href=""></a><span class="vs">            &lt;div style="color: #27ae60; font-weight: bold;"&gt;‚úì Good (Independent):&lt;/div&gt;</span></span>
<span id="cb42-1792"><a href=""></a><span class="vs">            &lt;ul style="margin: 8px 0; color: #27ae60; font-size: 14px;"&gt;</span></span>
<span id="cb42-1793"><a href=""></a><span class="vs">              &lt;li&gt;Random scatter around zero&lt;/li&gt;</span></span>
<span id="cb42-1794"><a href=""></a><span class="vs">              &lt;li&gt;No trends or cycles&lt;/li&gt;</span></span>
<span id="cb42-1795"><a href=""></a><span class="vs">            &lt;/ul&gt;</span></span>
<span id="cb42-1796"><a href=""></a><span class="vs">          &lt;/div&gt;</span></span>
<span id="cb42-1797"><a href=""></a><span class="vs">          </span></span>
<span id="cb42-1798"><a href=""></a><span class="vs">          &lt;div style="margin: 15px 0;"&gt;</span></span>
<span id="cb42-1799"><a href=""></a><span class="vs">            &lt;div style="color: #e74c3c; font-weight: bold;"&gt;‚úó Problem (Dependent):&lt;/div&gt;</span></span>
<span id="cb42-1800"><a href=""></a><span class="vs">            &lt;ul style="margin: 8px 0; color: #e74c3c; font-size: 14px;"&gt;</span></span>
<span id="cb42-1801"><a href=""></a><span class="vs">              &lt;li&gt;Upward/downward trends&lt;/li&gt;</span></span>
<span id="cb42-1802"><a href=""></a><span class="vs">              &lt;li&gt;Regular cycles or seasonality&lt;/li&gt;</span></span>
<span id="cb42-1803"><a href=""></a><span class="vs">            &lt;/ul&gt;</span></span>
<span id="cb42-1804"><a href=""></a><span class="vs">          &lt;/div&gt;</span></span>
<span id="cb42-1805"><a href=""></a><span class="vs">          </span></span>
<span id="cb42-1806"><a href=""></a><span class="vs">          &lt;p style="font-style: italic; color: #7f8c8d; font-size: 14px;"&gt;</span></span>
<span id="cb42-1807"><a href=""></a><span class="vs">            &lt;strong&gt;Why it matters:&lt;/strong&gt; Violations suggest omitted variables or time-based effects.</span></span>
<span id="cb42-1808"><a href=""></a><span class="vs">          &lt;/p&gt;</span></span>
<span id="cb42-1809"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb42-1810"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb42-1811"><a href=""></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb42-1812"><a href=""></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb42-1813"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-42" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="checking-assumption-2-homoscedasticity" class="slide level2 smaller scrollable">
<h2>üìä Checking Assumption 2: Homoscedasticity</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb43" data-startfrom="1820" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1819;"><span id="cb43-1820"><a href=""></a>{</span>
<span id="cb43-1821"><a href=""></a>  <span class="kw">const</span> residualData <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> {</span>
<span id="cb43-1822"><a href=""></a>    <span class="kw">const</span> predicted <span class="op">=</span> optimalLine<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> optimalLine<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb43-1823"><a href=""></a>    <span class="kw">const</span> residual <span class="op">=</span> d<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> predicted<span class="op">;</span></span>
<span id="cb43-1824"><a href=""></a>    <span class="cf">return</span> {</span>
<span id="cb43-1825"><a href=""></a>      <span class="dt">fitted</span><span class="op">:</span> predicted<span class="op">,</span></span>
<span id="cb43-1826"><a href=""></a>      <span class="dt">residual</span><span class="op">:</span> residual<span class="op">,</span></span>
<span id="cb43-1827"><a href=""></a>      <span class="dt">day</span><span class="op">:</span> d<span class="op">.</span><span class="at">day</span></span>
<span id="cb43-1828"><a href=""></a>    }<span class="op">;</span></span>
<span id="cb43-1829"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb43-1830"><a href=""></a>  </span>
<span id="cb43-1831"><a href=""></a>  <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb43-1832"><a href=""></a><span class="vs">    &lt;div style="display: flex; gap: 20px; margin: 20px 0;"&gt;</span></span>
<span id="cb43-1833"><a href=""></a><span class="vs">      &lt;div style="flex: 1;"&gt;</span></span>
<span id="cb43-1834"><a href=""></a><span class="vs">        &lt;h4 style="color: #2980b9; margin-top: 0;"&gt;Residuals vs. Fitted Values&lt;/h4&gt;</span></span>
<span id="cb43-1835"><a href=""></a><span class="vs">        </span><span class="sc">${</span>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb43-1836"><a href=""></a>          <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb43-1837"><a href=""></a>            Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>]<span class="op">,</span> {<span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"3,3"</span>})<span class="op">,</span></span>
<span id="cb43-1838"><a href=""></a>            Plot<span class="op">.</span><span class="fu">dot</span>(residualData<span class="op">,</span> {</span>
<span id="cb43-1839"><a href=""></a>              <span class="dt">x</span><span class="op">:</span> <span class="st">"fitted"</span><span class="op">,</span> </span>
<span id="cb43-1840"><a href=""></a>              <span class="dt">y</span><span class="op">:</span> <span class="st">"residual"</span><span class="op">,</span> </span>
<span id="cb43-1841"><a href=""></a>              <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> </span>
<span id="cb43-1842"><a href=""></a>              <span class="dt">r</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span></span>
<span id="cb43-1843"><a href=""></a>              <span class="dt">title</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="vs">`e·µ¢ = </span><span class="sc">${</span>d<span class="op">.</span><span class="at">residual</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb43-1844"><a href=""></a>            })</span>
<span id="cb43-1845"><a href=""></a>          ]<span class="op">,</span></span>
<span id="cb43-1846"><a href=""></a>          <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Fitted Values (≈∑·µ¢)"</span>}<span class="op">,</span></span>
<span id="cb43-1847"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Residuals (e·µ¢)"</span><span class="op">,</span> <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb43-1848"><a href=""></a>          <span class="dt">width</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb43-1849"><a href=""></a>          <span class="dt">height</span><span class="op">:</span> <span class="dv">300</span></span>
<span id="cb43-1850"><a href=""></a>        })<span class="sc">}</span></span>
<span id="cb43-1851"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb43-1852"><a href=""></a><span class="vs">      </span></span>
<span id="cb43-1853"><a href=""></a><span class="vs">      &lt;div style="flex: 1;"&gt;</span></span>
<span id="cb43-1854"><a href=""></a><span class="vs">        &lt;div style="background: #fef9e7; padding: 20px; border-radius: 8px; height: 300px;"&gt;</span></span>
<span id="cb43-1855"><a href=""></a><span class="vs">          &lt;h4 style="color: #f39c12; margin-top: 0;"&gt;üìè Homoscedasticity Principle&lt;/h4&gt;</span></span>
<span id="cb43-1856"><a href=""></a><span class="vs">          &lt;p&gt;&lt;strong&gt;What we check:&lt;/strong&gt; Constant spread of residuals across all fitted values.&lt;/p&gt;</span></span>
<span id="cb43-1857"><a href=""></a><span class="vs">          </span></span>
<span id="cb43-1858"><a href=""></a><span class="vs">          &lt;div style="margin: 15px 0;"&gt;</span></span>
<span id="cb43-1859"><a href=""></a><span class="vs">            &lt;div style="color: #27ae60; font-weight: bold;"&gt;‚úì Good (Homoscedastic):&lt;/div&gt;</span></span>
<span id="cb43-1860"><a href=""></a><span class="vs">            &lt;ul style="margin: 8px 0; color: #27ae60; font-size: 14px;"&gt;</span></span>
<span id="cb43-1861"><a href=""></a><span class="vs">              &lt;li&gt;Constant vertical spread&lt;/li&gt;</span></span>
<span id="cb43-1862"><a href=""></a><span class="vs">              &lt;li&gt;No funnel/cone shapes&lt;/li&gt;</span></span>
<span id="cb43-1863"><a href=""></a><span class="vs">            &lt;/ul&gt;</span></span>
<span id="cb43-1864"><a href=""></a><span class="vs">          &lt;/div&gt;</span></span>
<span id="cb43-1865"><a href=""></a><span class="vs">          </span></span>
<span id="cb43-1866"><a href=""></a><span class="vs">          &lt;div style="margin: 15px 0;"&gt;</span></span>
<span id="cb43-1867"><a href=""></a><span class="vs">            &lt;div style="color: #e74c3c; font-weight: bold;"&gt;‚úó Problem (Heteroscedastic):&lt;/div&gt;</span></span>
<span id="cb43-1868"><a href=""></a><span class="vs">            &lt;ul style="margin: 8px 0; color: #e74c3c; font-size: 14px;"&gt;</span></span>
<span id="cb43-1869"><a href=""></a><span class="vs">              &lt;li&gt;Funnel shape (spread changes)&lt;/li&gt;</span></span>
<span id="cb43-1870"><a href=""></a><span class="vs">              &lt;li&gt;Systematic pattern in spread&lt;/li&gt;</span></span>
<span id="cb43-1871"><a href=""></a><span class="vs">            &lt;/ul&gt;</span></span>
<span id="cb43-1872"><a href=""></a><span class="vs">          &lt;/div&gt;</span></span>
<span id="cb43-1873"><a href=""></a><span class="vs">          </span></span>
<span id="cb43-1874"><a href=""></a><span class="vs">          &lt;p style="font-style: italic; color: #7f8c8d; font-size: 14px;"&gt;</span></span>
<span id="cb43-1875"><a href=""></a><span class="vs">            &lt;strong&gt;Why it matters:&lt;/strong&gt; Makes standard errors unreliable, affects hypothesis tests.</span></span>
<span id="cb43-1876"><a href=""></a><span class="vs">          &lt;/p&gt;</span></span>
<span id="cb43-1877"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb43-1878"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb43-1879"><a href=""></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb43-1880"><a href=""></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb43-1881"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-43" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="checking-assumption-3-normality" class="slide level2 smaller scrollable">
<h2>üìä Checking Assumption 3: Normality</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb44" data-startfrom="1888" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1887;"><span id="cb44-1888"><a href=""></a>{</span>
<span id="cb44-1889"><a href=""></a>  <span class="kw">const</span> residualData <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> {</span>
<span id="cb44-1890"><a href=""></a>    <span class="kw">const</span> predicted <span class="op">=</span> optimalLine<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> optimalLine<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb44-1891"><a href=""></a>    <span class="kw">const</span> residual <span class="op">=</span> d<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> predicted<span class="op">;</span></span>
<span id="cb44-1892"><a href=""></a>    <span class="cf">return</span> { <span class="dt">residual</span><span class="op">:</span> residual<span class="op">,</span> <span class="dt">day</span><span class="op">:</span> d<span class="op">.</span><span class="at">day</span> }<span class="op">;</span></span>
<span id="cb44-1893"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb44-1894"><a href=""></a>  </span>
<span id="cb44-1895"><a href=""></a>  <span class="kw">const</span> residuals <span class="op">=</span> residualData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">residual</span>)<span class="op">;</span></span>
<span id="cb44-1896"><a href=""></a>  <span class="kw">const</span> meanResidual <span class="op">=</span> residuals<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> residuals<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb44-1897"><a href=""></a>  <span class="kw">const</span> stdResidual <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(residuals<span class="op">.</span><span class="fu">reduce</span>((sq<span class="op">,</span> n) <span class="kw">=&gt;</span> sq <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(n <span class="op">-</span> meanResidual<span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> (residuals<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>))<span class="op">;</span></span>
<span id="cb44-1898"><a href=""></a>  </span>
<span id="cb44-1899"><a href=""></a>  <span class="kw">const</span> binCount <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb44-1900"><a href=""></a>  <span class="kw">const</span> minResidual <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="op">...</span>residuals)<span class="op">;</span></span>
<span id="cb44-1901"><a href=""></a>  <span class="kw">const</span> maxResidual <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>residuals)<span class="op">;</span></span>
<span id="cb44-1902"><a href=""></a>  <span class="kw">const</span> binWidth <span class="op">=</span> (maxResidual <span class="op">-</span> minResidual) <span class="op">/</span> binCount<span class="op">;</span></span>
<span id="cb44-1903"><a href=""></a>  </span>
<span id="cb44-1904"><a href=""></a>  <span class="kw">const</span> bins <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> binCount}<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb44-1905"><a href=""></a>    <span class="kw">const</span> binStart <span class="op">=</span> minResidual <span class="op">+</span> i <span class="op">*</span> binWidth<span class="op">;</span></span>
<span id="cb44-1906"><a href=""></a>    <span class="kw">const</span> binEnd <span class="op">=</span> binStart <span class="op">+</span> binWidth<span class="op">;</span></span>
<span id="cb44-1907"><a href=""></a>    <span class="kw">const</span> count <span class="op">=</span> residuals<span class="op">.</span><span class="fu">filter</span>(r <span class="kw">=&gt;</span> r <span class="op">&gt;=</span> binStart <span class="op">&amp;&amp;</span> r <span class="op">&lt;</span> binEnd)<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb44-1908"><a href=""></a>    <span class="kw">const</span> density <span class="op">=</span> count <span class="op">/</span> (residuals<span class="op">.</span><span class="at">length</span> <span class="op">*</span> binWidth)<span class="op">;</span></span>
<span id="cb44-1909"><a href=""></a>    <span class="cf">return</span> { binStart<span class="op">,</span> binEnd<span class="op">,</span> density }<span class="op">;</span></span>
<span id="cb44-1910"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb44-1911"><a href=""></a>  </span>
<span id="cb44-1912"><a href=""></a>  <span class="kw">const</span> normalCurve <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb44-1913"><a href=""></a>  <span class="cf">for</span> (<span class="kw">let</span> x <span class="op">=</span> minResidual <span class="op">-</span> <span class="dv">5</span><span class="op">;</span> x <span class="op">&lt;=</span> maxResidual <span class="op">+</span> <span class="dv">5</span><span class="op">;</span> x <span class="op">+=</span> <span class="fl">0.5</span>) {</span>
<span id="cb44-1914"><a href=""></a>    normalCurve<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb44-1915"><a href=""></a>      <span class="dt">x</span><span class="op">:</span> x<span class="op">,</span></span>
<span id="cb44-1916"><a href=""></a>      <span class="dt">density</span><span class="op">:</span> (<span class="dv">1</span> <span class="op">/</span> (stdResidual <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(<span class="dv">2</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span>))) <span class="op">*</span> </span>
<span id="cb44-1917"><a href=""></a>               <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span>(<span class="op">-</span><span class="fl">0.5</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>((x <span class="op">-</span> meanResidual) <span class="op">/</span> stdResidual<span class="op">,</span> <span class="dv">2</span>))</span>
<span id="cb44-1918"><a href=""></a>    })<span class="op">;</span></span>
<span id="cb44-1919"><a href=""></a>  }</span>
<span id="cb44-1920"><a href=""></a>  </span>
<span id="cb44-1921"><a href=""></a>  <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb44-1922"><a href=""></a><span class="vs">    &lt;div style="display: flex; gap: 20px; margin: 20px 0;"&gt;</span></span>
<span id="cb44-1923"><a href=""></a><span class="vs">      &lt;div style="flex: 1;"&gt;</span></span>
<span id="cb44-1924"><a href=""></a><span class="vs">        &lt;h4 style="color: #2980b9; margin-top: 0;"&gt;Distribution of Residuals&lt;/h4&gt;</span></span>
<span id="cb44-1925"><a href=""></a><span class="vs">        </span><span class="sc">${</span>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb44-1926"><a href=""></a>          <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb44-1927"><a href=""></a>            Plot<span class="op">.</span><span class="fu">rectY</span>(</span>
<span id="cb44-1928"><a href=""></a>              bins<span class="op">.</span><span class="fu">map</span>(bin <span class="kw">=&gt;</span> ({</span>
<span id="cb44-1929"><a href=""></a>                <span class="dt">x1</span><span class="op">:</span> bin<span class="op">.</span><span class="at">binStart</span><span class="op">,</span></span>
<span id="cb44-1930"><a href=""></a>                <span class="dt">x2</span><span class="op">:</span> bin<span class="op">.</span><span class="at">binEnd</span><span class="op">,</span></span>
<span id="cb44-1931"><a href=""></a>                <span class="dt">density</span><span class="op">:</span> bin<span class="op">.</span><span class="at">density</span></span>
<span id="cb44-1932"><a href=""></a>              }))<span class="op">,</span></span>
<span id="cb44-1933"><a href=""></a>              {<span class="dt">x1</span><span class="op">:</span> <span class="st">"x1"</span><span class="op">,</span> <span class="dt">x2</span><span class="op">:</span> <span class="st">"x2"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"density"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"#9b59b6"</span><span class="op">,</span> <span class="dt">fillOpacity</span><span class="op">:</span> <span class="fl">0.7</span>}</span>
<span id="cb44-1934"><a href=""></a>            )<span class="op">,</span></span>
<span id="cb44-1935"><a href=""></a>            Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>]<span class="op">,</span> {<span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span>})<span class="op">,</span></span>
<span id="cb44-1936"><a href=""></a>            Plot<span class="op">.</span><span class="fu">lineY</span>(</span>
<span id="cb44-1937"><a href=""></a>              normalCurve<span class="op">,</span></span>
<span id="cb44-1938"><a href=""></a>              {<span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"density"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#2c3e50"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"3,3"</span>}</span>
<span id="cb44-1939"><a href=""></a>            )</span>
<span id="cb44-1940"><a href=""></a>          ]<span class="op">,</span></span>
<span id="cb44-1941"><a href=""></a>          <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Residual Value"</span>}<span class="op">,</span></span>
<span id="cb44-1942"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Density"</span><span class="op">,</span> <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb44-1943"><a href=""></a>          <span class="dt">width</span><span class="op">:</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb44-1944"><a href=""></a>          <span class="dt">height</span><span class="op">:</span> <span class="dv">300</span></span>
<span id="cb44-1945"><a href=""></a>        })<span class="sc">}</span></span>
<span id="cb44-1946"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb44-1947"><a href=""></a><span class="vs">      </span></span>
<span id="cb44-1948"><a href=""></a><span class="vs">      &lt;div style="flex: 1;"&gt;</span></span>
<span id="cb44-1949"><a href=""></a><span class="vs">        &lt;div style="background: #f4ecf7; padding: 20px; border-radius: 8px; height: 300px;"&gt;</span></span>
<span id="cb44-1950"><a href=""></a><span class="vs">          &lt;h4 style="color: #8e44ad; margin-top: 0;"&gt;üìä Normality Principle&lt;/h4&gt;</span></span>
<span id="cb44-1951"><a href=""></a><span class="vs">          &lt;p&gt;&lt;strong&gt;What we check:&lt;/strong&gt; Residuals follow approximately normal distribution.&lt;/p&gt;</span></span>
<span id="cb44-1952"><a href=""></a><span class="vs">          </span></span>
<span id="cb44-1953"><a href=""></a><span class="vs">          &lt;div style="margin: 15px 0;"&gt;</span></span>
<span id="cb44-1954"><a href=""></a><span class="vs">            &lt;div style="color: #27ae60; font-weight: bold;"&gt;‚úì Good (Normal):&lt;/div&gt;</span></span>
<span id="cb44-1955"><a href=""></a><span class="vs">            &lt;ul style="margin: 8px 0; color: #27ae60; font-size: 14px;"&gt;</span></span>
<span id="cb44-1956"><a href=""></a><span class="vs">              &lt;li&gt;Histogram matches normal curve&lt;/li&gt;</span></span>
<span id="cb44-1957"><a href=""></a><span class="vs">              &lt;li&gt;Symmetric around zero&lt;/li&gt;</span></span>
<span id="cb44-1958"><a href=""></a><span class="vs">            &lt;/ul&gt;</span></span>
<span id="cb44-1959"><a href=""></a><span class="vs">          &lt;/div&gt;</span></span>
<span id="cb44-1960"><a href=""></a><span class="vs">          </span></span>
<span id="cb44-1961"><a href=""></a><span class="vs">          &lt;div style="margin: 15px 0;"&gt;</span></span>
<span id="cb44-1962"><a href=""></a><span class="vs">            &lt;div style="color: #e74c3c; font-weight: bold;"&gt;‚úó Problem (Non-normal):&lt;/div&gt;</span></span>
<span id="cb44-1963"><a href=""></a><span class="vs">            &lt;ul style="margin: 8px 0; color: #e74c3c; font-size: 14px;"&gt;</span></span>
<span id="cb44-1964"><a href=""></a><span class="vs">              &lt;li&gt;Heavy skew or multiple peaks&lt;/li&gt;</span></span>
<span id="cb44-1965"><a href=""></a><span class="vs">              &lt;li&gt;Extreme outliers&lt;/li&gt;</span></span>
<span id="cb44-1966"><a href=""></a><span class="vs">            &lt;/ul&gt;</span></span>
<span id="cb44-1967"><a href=""></a><span class="vs">          &lt;/div&gt;</span></span>
<span id="cb44-1968"><a href=""></a><span class="vs">          </span></span>
<span id="cb44-1969"><a href=""></a><span class="vs">          &lt;p style="font-style: italic; color: #7f8c8d; font-size: 13px;"&gt;</span></span>
<span id="cb44-1970"><a href=""></a><span class="vs">            &lt;strong&gt;Stats:&lt;/strong&gt; Mean = </span><span class="sc">${</span>meanResidual<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">, SD = </span><span class="sc">${</span>stdResidual<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">, n = </span><span class="sc">${</span>residuals<span class="op">.</span><span class="at">length</span><span class="sc">}</span></span>
<span id="cb44-1971"><a href=""></a><span class="vs">          &lt;/p&gt;</span></span>
<span id="cb44-1972"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb44-1973"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb44-1974"><a href=""></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb44-1975"><a href=""></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb44-1976"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-44" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="quick-check-assumptions" class="slide level2 scrollable">
<h2>‚ùì Quick Check: Assumptions</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb45" data-startfrom="1984" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1983;"><span id="cb45-1984"><a href=""></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb45-1985"><a href=""></a><span class="vs">&lt;style&gt;</span></span>
<span id="cb45-1986"><a href=""></a><span class="vs">  .matching-container {</span></span>
<span id="cb45-1987"><a href=""></a><span class="vs">    display: flex;</span></span>
<span id="cb45-1988"><a href=""></a><span class="vs">    gap: 100px;</span></span>
<span id="cb45-1989"><a href=""></a><span class="vs">    position: relative;</span></span>
<span id="cb45-1990"><a href=""></a><span class="vs">    margin: 40px 0;</span></span>
<span id="cb45-1991"><a href=""></a><span class="vs">    padding: 20px;</span></span>
<span id="cb45-1992"><a href=""></a><span class="vs">  }</span></span>
<span id="cb45-1993"><a href=""></a><span class="vs">  .matching-column {</span></span>
<span id="cb45-1994"><a href=""></a><span class="vs">    flex: 1;</span></span>
<span id="cb45-1995"><a href=""></a><span class="vs">  }</span></span>
<span id="cb45-1996"><a href=""></a><span class="vs">  .matching-item {</span></span>
<span id="cb45-1997"><a href=""></a><span class="vs">    padding: 15px;</span></span>
<span id="cb45-1998"><a href=""></a><span class="vs">    margin: 15px 0;</span></span>
<span id="cb45-1999"><a href=""></a><span class="vs">    border: 2px solid #3498db;</span></span>
<span id="cb45-2000"><a href=""></a><span class="vs">    border-radius: 8px;</span></span>
<span id="cb45-2001"><a href=""></a><span class="vs">    background: #ecf0f1;</span></span>
<span id="cb45-2002"><a href=""></a><span class="vs">    font-size: 16px;</span></span>
<span id="cb45-2003"><a href=""></a><span class="vs">    position: relative;</span></span>
<span id="cb45-2004"><a href=""></a><span class="vs">  }</span></span>
<span id="cb45-2005"><a href=""></a><span class="vs">  .line-canvas {</span></span>
<span id="cb45-2006"><a href=""></a><span class="vs">    position: absolute;</span></span>
<span id="cb45-2007"><a href=""></a><span class="vs">    top: 0;</span></span>
<span id="cb45-2008"><a href=""></a><span class="vs">    left: 0;</span></span>
<span id="cb45-2009"><a href=""></a><span class="vs">    width: 100%;</span></span>
<span id="cb45-2010"><a href=""></a><span class="vs">    height: 100%;</span></span>
<span id="cb45-2011"><a href=""></a><span class="vs">    pointer-events: none;</span></span>
<span id="cb45-2012"><a href=""></a><span class="vs">  }</span></span>
<span id="cb45-2013"><a href=""></a><span class="vs">&lt;/style&gt;</span></span>
<span id="cb45-2014"><a href=""></a></span>
<span id="cb45-2015"><a href=""></a><span class="vs">&lt;p&gt;&lt;strong&gt;Question:&lt;/strong&gt; Match each assumption to its consequence when violated:&lt;/p&gt;</span></span>
<span id="cb45-2016"><a href=""></a></span>
<span id="cb45-2017"><a href=""></a><span class="vs">&lt;div style="position: relative;"&gt;</span></span>
<span id="cb45-2018"><a href=""></a><span class="vs">  &lt;div class="matching-container"&gt;</span></span>
<span id="cb45-2019"><a href=""></a><span class="vs">    &lt;div class="matching-column"&gt;</span></span>
<span id="cb45-2020"><a href=""></a><span class="vs">      &lt;div class="matching-item" style="background: #e3f2fd;"&gt;</span></span>
<span id="cb45-2021"><a href=""></a><span class="vs">        &lt;strong&gt;1. Linearity violation&lt;/strong&gt;</span></span>
<span id="cb45-2022"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb45-2023"><a href=""></a><span class="vs">      &lt;div class="matching-item" style="background: #e3f2fd;"&gt;</span></span>
<span id="cb45-2024"><a href=""></a><span class="vs">        &lt;strong&gt;2. Independence violation&lt;/strong&gt;</span></span>
<span id="cb45-2025"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb45-2026"><a href=""></a><span class="vs">      &lt;div class="matching-item" style="background: #e3f2fd;"&gt;</span></span>
<span id="cb45-2027"><a href=""></a><span class="vs">        &lt;strong&gt;3. Homoscedasticity violation&lt;/strong&gt;</span></span>
<span id="cb45-2028"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb45-2029"><a href=""></a><span class="vs">      &lt;div class="matching-item" style="background: #e3f2fd;"&gt;</span></span>
<span id="cb45-2030"><a href=""></a><span class="vs">        &lt;strong&gt;4. Normality violation&lt;/strong&gt;</span></span>
<span id="cb45-2031"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb45-2032"><a href=""></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb45-2033"><a href=""></a><span class="vs">    </span></span>
<span id="cb45-2034"><a href=""></a><span class="vs">    &lt;div class="matching-column"&gt;</span></span>
<span id="cb45-2035"><a href=""></a><span class="vs">      &lt;div class="matching-item" style="background: #fff3e0;"&gt;</span></span>
<span id="cb45-2036"><a href=""></a><span class="vs">        &lt;strong&gt;(A)&lt;/strong&gt; Biased coefficient estimates</span></span>
<span id="cb45-2037"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb45-2038"><a href=""></a><span class="vs">      &lt;div class="matching-item" style="background: #fff3e0;"&gt;</span></span>
<span id="cb45-2039"><a href=""></a><span class="vs">        &lt;strong&gt;(B)&lt;/strong&gt; Unreliable standard errors</span></span>
<span id="cb45-2040"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb45-2041"><a href=""></a><span class="vs">      &lt;div class="matching-item" style="background: #fff3e0;"&gt;</span></span>
<span id="cb45-2042"><a href=""></a><span class="vs">        &lt;strong&gt;(C)&lt;/strong&gt; Invalid hypothesis tests (especially for small samples)</span></span>
<span id="cb45-2043"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb45-2044"><a href=""></a><span class="vs">      &lt;div class="matching-item" style="background: #fff3e0;"&gt;</span></span>
<span id="cb45-2045"><a href=""></a><span class="vs">        &lt;strong&gt;(D)&lt;/strong&gt; Incorrect predictions and R¬≤</span></span>
<span id="cb45-2046"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb45-2047"><a href=""></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb45-2048"><a href=""></a><span class="vs">    </span></span>
<span id="cb45-2049"><a href=""></a><span class="vs">    &lt;canvas class="line-canvas fragment" id="line1" width="800" height="400"&gt;&lt;/canvas&gt;</span></span>
<span id="cb45-2050"><a href=""></a><span class="vs">    &lt;canvas class="line-canvas fragment" id="line2" width="800" height="400"&gt;&lt;/canvas&gt;</span></span>
<span id="cb45-2051"><a href=""></a><span class="vs">    &lt;canvas class="line-canvas fragment" id="line3" width="800" height="400"&gt;&lt;/canvas&gt;</span></span>
<span id="cb45-2052"><a href=""></a><span class="vs">    &lt;canvas class="line-canvas fragment" id="line4" width="800" height="400"&gt;&lt;/canvas&gt;</span></span>
<span id="cb45-2053"><a href=""></a><span class="vs">  &lt;/div&gt;</span></span>
<span id="cb45-2054"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb45-2055"><a href=""></a></span>
<span id="cb45-2056"><a href=""></a><span class="vs">&lt;div class="fragment" style="margin-top: 20px; padding: 15px; background: #d5f4e6; border-radius: 8px;"&gt;</span></span>
<span id="cb45-2057"><a href=""></a><span class="vs">  &lt;p&gt;&lt;strong&gt;‚úì Correct Answers:&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb45-2058"><a href=""></a><span class="vs">  &lt;ul style="margin: 5px 0;"&gt;</span></span>
<span id="cb45-2059"><a href=""></a><span class="vs">    &lt;li&gt;&lt;strong&gt;1 ‚Üí D:&lt;/strong&gt; Linearity violation leads to incorrect predictions and R¬≤&lt;/li&gt;</span></span>
<span id="cb45-2060"><a href=""></a><span class="vs">    &lt;li&gt;&lt;strong&gt;2 ‚Üí A:&lt;/strong&gt; Independence violation leads to biased coefficient estimates&lt;/li&gt;</span></span>
<span id="cb45-2061"><a href=""></a><span class="vs">    &lt;li&gt;&lt;strong&gt;3 ‚Üí B:&lt;/strong&gt; Homoscedasticity violation leads to unreliable standard errors&lt;/li&gt;</span></span>
<span id="cb45-2062"><a href=""></a><span class="vs">    &lt;li&gt;&lt;strong&gt;4 ‚Üí C:&lt;/strong&gt; Normality violation leads to invalid hypothesis tests&lt;/li&gt;</span></span>
<span id="cb45-2063"><a href=""></a><span class="vs">  &lt;/ul&gt;</span></span>
<span id="cb45-2064"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb45-2065"><a href=""></a></span>
<span id="cb45-2066"><a href=""></a><span class="vs">&lt;script&gt;</span></span>
<span id="cb45-2067"><a href=""></a><span class="vs">(function() {</span></span>
<span id="cb45-2068"><a href=""></a><span class="vs">  function drawLine(canvasId, y1Percent, y2Percent, color) {</span></span>
<span id="cb45-2069"><a href=""></a><span class="vs">    const canvas = document.getElementById(canvasId);</span></span>
<span id="cb45-2070"><a href=""></a><span class="vs">    if (!canvas) return;</span></span>
<span id="cb45-2071"><a href=""></a><span class="vs">    </span></span>
<span id="cb45-2072"><a href=""></a><span class="vs">    const ctx = canvas.getContext('2d');</span></span>
<span id="cb45-2073"><a href=""></a><span class="vs">    const width = canvas.width;</span></span>
<span id="cb45-2074"><a href=""></a><span class="vs">    const height = canvas.height;</span></span>
<span id="cb45-2075"><a href=""></a><span class="vs">    </span></span>
<span id="cb45-2076"><a href=""></a><span class="vs">    ctx.clearRect(0, 0, width, height);</span></span>
<span id="cb45-2077"><a href=""></a><span class="vs">    ctx.strokeStyle = color || '#e74c3c';</span></span>
<span id="cb45-2078"><a href=""></a><span class="vs">    ctx.lineWidth = 4;</span></span>
<span id="cb45-2079"><a href=""></a><span class="vs">    ctx.beginPath();</span></span>
<span id="cb45-2080"><a href=""></a><span class="vs">    ctx.moveTo(width * 0.42, height * y1Percent);</span></span>
<span id="cb45-2081"><a href=""></a><span class="vs">    ctx.lineTo(width * 0.58, height * y2Percent);</span></span>
<span id="cb45-2082"><a href=""></a><span class="vs">    ctx.stroke();</span></span>
<span id="cb45-2083"><a href=""></a><span class="vs">  }</span></span>
<span id="cb45-2084"><a href=""></a><span class="vs">  </span></span>
<span id="cb45-2085"><a href=""></a><span class="vs">  // Draw lines with a delay to ensure DOM is ready</span></span>
<span id="cb45-2086"><a href=""></a><span class="vs">  setTimeout(() =&gt; {</span></span>
<span id="cb45-2087"><a href=""></a><span class="vs">    drawLine('line1', 0.15, 0.85, '#e74c3c'); // Q1 to D</span></span>
<span id="cb45-2088"><a href=""></a><span class="vs">    drawLine('line2', 0.37, 0.15, '#e74c3c'); // Q2 to A</span></span>
<span id="cb45-2089"><a href=""></a><span class="vs">    drawLine('line3', 0.62, 0.37, '#e74c3c'); // Q3 to B</span></span>
<span id="cb45-2090"><a href=""></a><span class="vs">    drawLine('line4', 0.87, 0.62, '#e74c3c'); // Q4 to C</span></span>
<span id="cb45-2091"><a href=""></a><span class="vs">  }, 500);</span></span>
<span id="cb45-2092"><a href=""></a><span class="vs">  </span></span>
<span id="cb45-2093"><a href=""></a><span class="vs">  // Redraw when Reveal fragments are shown</span></span>
<span id="cb45-2094"><a href=""></a><span class="vs">  if (window.Reveal) {</span></span>
<span id="cb45-2095"><a href=""></a><span class="vs">    Reveal.on('fragmentshown', function(event) {</span></span>
<span id="cb45-2096"><a href=""></a><span class="vs">      setTimeout(() =&gt; {</span></span>
<span id="cb45-2097"><a href=""></a><span class="vs">        drawLine('line1', 0.15, 0.85, '#e74c3c');</span></span>
<span id="cb45-2098"><a href=""></a><span class="vs">        drawLine('line2', 0.37, 0.15, '#e74c3c');</span></span>
<span id="cb45-2099"><a href=""></a><span class="vs">        drawLine('line3', 0.62, 0.37, '#e74c3c');</span></span>
<span id="cb45-2100"><a href=""></a><span class="vs">        drawLine('line4', 0.87, 0.62, '#e74c3c');</span></span>
<span id="cb45-2101"><a href=""></a><span class="vs">      }, 100);</span></span>
<span id="cb45-2102"><a href=""></a><span class="vs">    });</span></span>
<span id="cb45-2103"><a href=""></a><span class="vs">  }</span></span>
<span id="cb45-2104"><a href=""></a><span class="vs">})();</span></span>
<span id="cb45-2105"><a href=""></a><span class="vs">&lt;/script&gt;</span></span>
<span id="cb45-2106"><a href=""></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-45" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="comprehensive-diagnostic-plots" class="slide level2 smaller scrollable">
<h2>üìä Comprehensive Diagnostic Plots</h2>
<p>All four essential diagnostic plots in one view:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb46" data-startfrom="2115" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 2114;"><span id="cb46-2115"><a href=""></a>{</span>
<span id="cb46-2116"><a href=""></a>  <span class="kw">const</span> residualData <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">map</span>((d<span class="op">,</span> index) <span class="kw">=&gt;</span> {</span>
<span id="cb46-2117"><a href=""></a>    <span class="kw">const</span> predicted <span class="op">=</span> optimalLine<span class="op">.</span><span class="at">intercept</span> <span class="op">+</span> optimalLine<span class="op">.</span><span class="at">slope</span> <span class="op">*</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">;</span></span>
<span id="cb46-2118"><a href=""></a>    <span class="kw">const</span> residual <span class="op">=</span> d<span class="op">.</span><span class="at">sales</span> <span class="op">-</span> predicted<span class="op">;</span></span>
<span id="cb46-2119"><a href=""></a>    <span class="cf">return</span> {</span>
<span id="cb46-2120"><a href=""></a>      <span class="dt">day</span><span class="op">:</span> d<span class="op">.</span><span class="at">day</span><span class="op">,</span></span>
<span id="cb46-2121"><a href=""></a>      <span class="dt">dayIndex</span><span class="op">:</span> index <span class="op">+</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb46-2122"><a href=""></a>      <span class="dt">residual</span><span class="op">:</span> residual<span class="op">,</span></span>
<span id="cb46-2123"><a href=""></a>      <span class="dt">fitted</span><span class="op">:</span> predicted<span class="op">,</span></span>
<span id="cb46-2124"><a href=""></a>      <span class="dt">temperature</span><span class="op">:</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span></span>
<span id="cb46-2125"><a href=""></a>      <span class="dt">sales</span><span class="op">:</span> d<span class="op">.</span><span class="at">sales</span></span>
<span id="cb46-2126"><a href=""></a>    }<span class="op">;</span></span>
<span id="cb46-2127"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb46-2128"><a href=""></a>  </span>
<span id="cb46-2129"><a href=""></a>  <span class="kw">const</span> residuals <span class="op">=</span> residualData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">residual</span>)<span class="op">;</span></span>
<span id="cb46-2130"><a href=""></a>  <span class="kw">const</span> meanResidual <span class="op">=</span> residuals<span class="op">.</span><span class="fu">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> residuals<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb46-2131"><a href=""></a>  <span class="kw">const</span> stdResidual <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(residuals<span class="op">.</span><span class="fu">reduce</span>((sq<span class="op">,</span> n) <span class="kw">=&gt;</span> sq <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(n <span class="op">-</span> meanResidual<span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> (residuals<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>))<span class="op">;</span></span>
<span id="cb46-2132"><a href=""></a>  </span>
<span id="cb46-2133"><a href=""></a>  <span class="kw">const</span> sortedResiduals <span class="op">=</span> [<span class="op">...</span>residuals]<span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">-</span> b)<span class="op">;</span></span>
<span id="cb46-2134"><a href=""></a>  <span class="kw">const</span> qqData <span class="op">=</span> sortedResiduals<span class="op">.</span><span class="fu">map</span>((r<span class="op">,</span> i) <span class="kw">=&gt;</span> {</span>
<span id="cb46-2135"><a href=""></a>    <span class="kw">const</span> theoreticalQuantile <span class="op">=</span> (i <span class="op">+</span> <span class="fl">0.5</span>) <span class="op">/</span> residuals<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb46-2136"><a href=""></a>    <span class="kw">const</span> z <span class="op">=</span> theoreticalQuantile <span class="op">&lt;</span> <span class="fl">0.5</span> </span>
<span id="cb46-2137"><a href=""></a>      <span class="op">?</span> <span class="op">-</span><span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(<span class="op">-</span><span class="dv">2</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span>(theoreticalQuantile))</span>
<span id="cb46-2138"><a href=""></a>      <span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(<span class="op">-</span><span class="dv">2</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span>(<span class="dv">1</span> <span class="op">-</span> theoreticalQuantile))<span class="op">;</span></span>
<span id="cb46-2139"><a href=""></a>    <span class="cf">return</span> {</span>
<span id="cb46-2140"><a href=""></a>      <span class="dt">theoretical</span><span class="op">:</span> z<span class="op">,</span></span>
<span id="cb46-2141"><a href=""></a>      <span class="dt">sample</span><span class="op">:</span> (r <span class="op">-</span> meanResidual) <span class="op">/</span> stdResidual</span>
<span id="cb46-2142"><a href=""></a>    }<span class="op">;</span></span>
<span id="cb46-2143"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb46-2144"><a href=""></a>  </span>
<span id="cb46-2145"><a href=""></a>  <span class="kw">const</span> scaleLocationData <span class="op">=</span> residualData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> ({</span>
<span id="cb46-2146"><a href=""></a>    <span class="dt">fitted</span><span class="op">:</span> d<span class="op">.</span><span class="at">fitted</span><span class="op">,</span></span>
<span id="cb46-2147"><a href=""></a>    <span class="dt">sqrtAbsResidual</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>((d<span class="op">.</span><span class="at">residual</span> <span class="op">-</span> meanResidual) <span class="op">/</span> stdResidual))</span>
<span id="cb46-2148"><a href=""></a>  }))<span class="op">;</span></span>
<span id="cb46-2149"><a href=""></a>  </span>
<span id="cb46-2150"><a href=""></a>  <span class="kw">const</span> meanTemp <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> d<span class="op">.</span><span class="at">temperature</span><span class="op">,</span> <span class="dv">0</span>) <span class="op">/</span> lemonadeData<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb46-2151"><a href=""></a>  <span class="kw">const</span> ssX <span class="op">=</span> lemonadeData<span class="op">.</span><span class="fu">reduce</span>((sum<span class="op">,</span> d) <span class="kw">=&gt;</span> sum <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(d<span class="op">.</span><span class="at">temperature</span> <span class="op">-</span> meanTemp<span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb46-2152"><a href=""></a>  </span>
<span id="cb46-2153"><a href=""></a>  <span class="kw">const</span> leverageData <span class="op">=</span> residualData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> {</span>
<span id="cb46-2154"><a href=""></a>    <span class="kw">const</span> leverage <span class="op">=</span> <span class="dv">1</span><span class="op">/</span>residuals<span class="op">.</span><span class="at">length</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(d<span class="op">.</span><span class="at">temperature</span> <span class="op">-</span> meanTemp<span class="op">,</span> <span class="dv">2</span>) <span class="op">/</span> ssX<span class="op">;</span></span>
<span id="cb46-2155"><a href=""></a>    <span class="kw">const</span> standardizedResidual <span class="op">=</span> (d<span class="op">.</span><span class="at">residual</span> <span class="op">-</span> meanResidual) <span class="op">/</span> stdResidual<span class="op">;</span></span>
<span id="cb46-2156"><a href=""></a>    <span class="cf">return</span> {</span>
<span id="cb46-2157"><a href=""></a>      <span class="dt">leverage</span><span class="op">:</span> leverage<span class="op">,</span></span>
<span id="cb46-2158"><a href=""></a>      <span class="dt">standardizedResidual</span><span class="op">:</span> standardizedResidual<span class="op">,</span></span>
<span id="cb46-2159"><a href=""></a>      <span class="dt">day</span><span class="op">:</span> d<span class="op">.</span><span class="at">day</span></span>
<span id="cb46-2160"><a href=""></a>    }<span class="op">;</span></span>
<span id="cb46-2161"><a href=""></a>  })<span class="op">;</span></span>
<span id="cb46-2162"><a href=""></a>  </span>
<span id="cb46-2163"><a href=""></a>  <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb46-2164"><a href=""></a><span class="vs">    &lt;div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;"&gt;</span></span>
<span id="cb46-2165"><a href=""></a><span class="vs">      </span></span>
<span id="cb46-2166"><a href=""></a><span class="vs">      &lt;!-- Plot 1: Residuals vs. Fitted --&gt;</span></span>
<span id="cb46-2167"><a href=""></a><span class="vs">      &lt;div style="background: #f8f9fa; padding: 15px; border-radius: 8px;"&gt;</span></span>
<span id="cb46-2168"><a href=""></a><span class="vs">        &lt;h4 style="color: #2980b9; margin-top: 0;"&gt;1. Residuals vs. Fitted Values&lt;/h4&gt;</span></span>
<span id="cb46-2169"><a href=""></a><span class="vs">        </span><span class="sc">${</span>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb46-2170"><a href=""></a>          <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb46-2171"><a href=""></a>            Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>]<span class="op">,</span> {<span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"3,3"</span>})<span class="op">,</span></span>
<span id="cb46-2172"><a href=""></a>            Plot<span class="op">.</span><span class="fu">dot</span>(residualData<span class="op">,</span> {</span>
<span id="cb46-2173"><a href=""></a>              <span class="dt">x</span><span class="op">:</span> <span class="st">"fitted"</span><span class="op">,</span> </span>
<span id="cb46-2174"><a href=""></a>              <span class="dt">y</span><span class="op">:</span> <span class="st">"residual"</span><span class="op">,</span> </span>
<span id="cb46-2175"><a href=""></a>              <span class="dt">fill</span><span class="op">:</span> <span class="st">"#3498db"</span><span class="op">,</span> </span>
<span id="cb46-2176"><a href=""></a>              <span class="dt">r</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb46-2177"><a href=""></a>              <span class="dt">title</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="vs">`Day </span><span class="sc">${</span>d<span class="op">.</span><span class="at">day</span><span class="sc">}</span><span class="vs">: e·µ¢ = </span><span class="sc">${</span>d<span class="op">.</span><span class="at">residual</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">1</span>)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb46-2178"><a href=""></a>            })<span class="op">,</span></span>
<span id="cb46-2179"><a href=""></a>            Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb46-2180"><a href=""></a>              residualData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d)<span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a<span class="op">.</span><span class="at">fitted</span> <span class="op">-</span> b<span class="op">.</span><span class="at">fitted</span>)<span class="op">,</span></span>
<span id="cb46-2181"><a href=""></a>              Plot<span class="op">.</span><span class="fu">windowY</span>({<span class="dt">k</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span> <span class="dt">reduce</span><span class="op">:</span> <span class="st">"mean"</span><span class="op">,</span> <span class="dt">x</span><span class="op">:</span> <span class="st">"fitted"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"residual"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})</span>
<span id="cb46-2182"><a href=""></a>            )</span>
<span id="cb46-2183"><a href=""></a>          ]<span class="op">,</span></span>
<span id="cb46-2184"><a href=""></a>          <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Fitted Values (≈∑·µ¢)"</span>}<span class="op">,</span></span>
<span id="cb46-2185"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Residuals (e·µ¢ = y·µ¢ - ≈∑·µ¢)"</span><span class="op">,</span> <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb46-2186"><a href=""></a>          <span class="dt">width</span><span class="op">:</span> <span class="dv">350</span><span class="op">,</span></span>
<span id="cb46-2187"><a href=""></a>          <span class="dt">height</span><span class="op">:</span> <span class="dv">280</span></span>
<span id="cb46-2188"><a href=""></a>        })<span class="sc">}</span></span>
<span id="cb46-2189"><a href=""></a><span class="vs">        &lt;p style="font-size: 12px; color: #7f8c8d; margin-top: 8px;"&gt;</span></span>
<span id="cb46-2190"><a href=""></a><span class="vs">          &lt;strong&gt;Formula:&lt;/strong&gt; e·µ¢ = y·µ¢ - ≈∑·µ¢&lt;br&gt;</span></span>
<span id="cb46-2191"><a href=""></a><span class="vs">          &lt;strong&gt;Checks:&lt;/strong&gt; Linearity &amp; Homoscedasticity&lt;br&gt;</span></span>
<span id="cb46-2192"><a href=""></a><span class="vs">          &lt;strong&gt;Look for:&lt;/strong&gt; Random scatter, no patterns</span></span>
<span id="cb46-2193"><a href=""></a><span class="vs">        &lt;/p&gt;</span></span>
<span id="cb46-2194"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb46-2195"><a href=""></a><span class="vs">      </span></span>
<span id="cb46-2196"><a href=""></a><span class="vs">      &lt;!-- Plot 2: Q-Q Plot --&gt;</span></span>
<span id="cb46-2197"><a href=""></a><span class="vs">      &lt;div style="background: #f8f9fa; padding: 15px; border-radius: 8px;"&gt;</span></span>
<span id="cb46-2198"><a href=""></a><span class="vs">        &lt;h4 style="color: #8e44ad; margin-top: 0;"&gt;2. Normal Q-Q Plot&lt;/h4&gt;</span></span>
<span id="cb46-2199"><a href=""></a><span class="vs">        </span><span class="sc">${</span>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb46-2200"><a href=""></a>          <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb46-2201"><a href=""></a>            Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb46-2202"><a href=""></a>              [{<span class="dt">x</span><span class="op">:</span> <span class="op">-</span><span class="dv">3</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="op">-</span><span class="dv">3</span>}<span class="op">,</span> {<span class="dt">x</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">3</span>}]<span class="op">,</span></span>
<span id="cb46-2203"><a href=""></a>              {<span class="dt">x</span><span class="op">:</span> <span class="st">"x"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"y"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"3,3"</span>}</span>
<span id="cb46-2204"><a href=""></a>            )<span class="op">,</span></span>
<span id="cb46-2205"><a href=""></a>            Plot<span class="op">.</span><span class="fu">dot</span>(qqData<span class="op">,</span> {</span>
<span id="cb46-2206"><a href=""></a>              <span class="dt">x</span><span class="op">:</span> <span class="st">"theoretical"</span><span class="op">,</span> </span>
<span id="cb46-2207"><a href=""></a>              <span class="dt">y</span><span class="op">:</span> <span class="st">"sample"</span><span class="op">,</span> </span>
<span id="cb46-2208"><a href=""></a>              <span class="dt">fill</span><span class="op">:</span> <span class="st">"#9b59b6"</span><span class="op">,</span> </span>
<span id="cb46-2209"><a href=""></a>              <span class="dt">r</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb46-2210"><a href=""></a>              <span class="dt">title</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="vs">`Theoretical: </span><span class="sc">${</span>d<span class="op">.</span><span class="at">theoretical</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">, Sample: </span><span class="sc">${</span>d<span class="op">.</span><span class="at">sample</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb46-2211"><a href=""></a>            })</span>
<span id="cb46-2212"><a href=""></a>          ]<span class="op">,</span></span>
<span id="cb46-2213"><a href=""></a>          <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Theoretical Quantiles"</span>}<span class="op">,</span></span>
<span id="cb46-2214"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Standardized Residuals (r·µ¢)"</span><span class="op">,</span> <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb46-2215"><a href=""></a>          <span class="dt">width</span><span class="op">:</span> <span class="dv">350</span><span class="op">,</span></span>
<span id="cb46-2216"><a href=""></a>          <span class="dt">height</span><span class="op">:</span> <span class="dv">280</span></span>
<span id="cb46-2217"><a href=""></a>        })<span class="sc">}</span></span>
<span id="cb46-2218"><a href=""></a><span class="vs">        &lt;p style="font-size: 12px; color: #7f8c8d; margin-top: 8px;"&gt;</span></span>
<span id="cb46-2219"><a href=""></a><span class="vs">          &lt;strong&gt;Formula:&lt;/strong&gt; r·µ¢ = (e·µ¢ - ƒì) / s‚Çë, s‚Çë = ‚àö[Œ£e·µ¢¬≤/(n-2)]&lt;br&gt;</span></span>
<span id="cb46-2220"><a href=""></a><span class="vs">          &lt;strong&gt;Checks:&lt;/strong&gt; Normality of Residuals&lt;br&gt;</span></span>
<span id="cb46-2221"><a href=""></a><span class="vs">          &lt;strong&gt;Look for:&lt;/strong&gt; Points on diagonal line</span></span>
<span id="cb46-2222"><a href=""></a><span class="vs">        &lt;/p&gt;</span></span>
<span id="cb46-2223"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb46-2224"><a href=""></a><span class="vs">      </span></span>
<span id="cb46-2225"><a href=""></a><span class="vs">      &lt;!-- Plot 3: Scale-Location --&gt;</span></span>
<span id="cb46-2226"><a href=""></a><span class="vs">      &lt;div style="background: #f8f9fa; padding: 15px; border-radius: 8px;"&gt;</span></span>
<span id="cb46-2227"><a href=""></a><span class="vs">        &lt;h4 style="color: #e67e22; margin-top: 0;"&gt;3. Scale-Location Plot&lt;/h4&gt;</span></span>
<span id="cb46-2228"><a href=""></a><span class="vs">        </span><span class="sc">${</span>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb46-2229"><a href=""></a>          <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb46-2230"><a href=""></a>            Plot<span class="op">.</span><span class="fu">dot</span>(scaleLocationData<span class="op">,</span> {</span>
<span id="cb46-2231"><a href=""></a>              <span class="dt">x</span><span class="op">:</span> <span class="st">"fitted"</span><span class="op">,</span> </span>
<span id="cb46-2232"><a href=""></a>              <span class="dt">y</span><span class="op">:</span> <span class="st">"sqrtAbsResidual"</span><span class="op">,</span> </span>
<span id="cb46-2233"><a href=""></a>              <span class="dt">fill</span><span class="op">:</span> <span class="st">"#e67e22"</span><span class="op">,</span> </span>
<span id="cb46-2234"><a href=""></a>              <span class="dt">r</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb46-2235"><a href=""></a>              <span class="dt">title</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="vs">`‚àö|r·µ¢| = </span><span class="sc">${</span>d<span class="op">.</span><span class="at">sqrtAbsResidual</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb46-2236"><a href=""></a>            })<span class="op">,</span></span>
<span id="cb46-2237"><a href=""></a>            Plot<span class="op">.</span><span class="fu">line</span>(</span>
<span id="cb46-2238"><a href=""></a>              scaleLocationData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d)<span class="op">.</span><span class="fu">sort</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a<span class="op">.</span><span class="at">fitted</span> <span class="op">-</span> b<span class="op">.</span><span class="at">fitted</span>)<span class="op">,</span></span>
<span id="cb46-2239"><a href=""></a>              Plot<span class="op">.</span><span class="fu">windowY</span>({<span class="dt">k</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span> <span class="dt">reduce</span><span class="op">:</span> <span class="st">"mean"</span><span class="op">,</span> <span class="dt">x</span><span class="op">:</span> <span class="st">"fitted"</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="st">"sqrtAbsResidual"</span><span class="op">,</span> <span class="dt">stroke</span><span class="op">:</span> <span class="st">"#c0392b"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span>})</span>
<span id="cb46-2240"><a href=""></a>            )</span>
<span id="cb46-2241"><a href=""></a>          ]<span class="op">,</span></span>
<span id="cb46-2242"><a href=""></a>          <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Fitted Values (≈∑·µ¢)"</span>}<span class="op">,</span></span>
<span id="cb46-2243"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"‚àö|Standardized Residuals| = ‚àö|r·µ¢|"</span><span class="op">,</span> <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb46-2244"><a href=""></a>          <span class="dt">width</span><span class="op">:</span> <span class="dv">350</span><span class="op">,</span></span>
<span id="cb46-2245"><a href=""></a>          <span class="dt">height</span><span class="op">:</span> <span class="dv">280</span></span>
<span id="cb46-2246"><a href=""></a>        })<span class="sc">}</span></span>
<span id="cb46-2247"><a href=""></a><span class="vs">        &lt;p style="font-size: 12px; color: #7f8c8d; margin-top: 8px;"&gt;</span></span>
<span id="cb46-2248"><a href=""></a><span class="vs">          &lt;strong&gt;Formula:&lt;/strong&gt; ‚àö|r·µ¢| = ‚àö|(e·µ¢ - ƒì) / s‚Çë|&lt;br&gt;</span></span>
<span id="cb46-2249"><a href=""></a><span class="vs">          &lt;strong&gt;Checks:&lt;/strong&gt; Homoscedasticity&lt;br&gt;</span></span>
<span id="cb46-2250"><a href=""></a><span class="vs">          &lt;strong&gt;Look for:&lt;/strong&gt; Horizontal line, constant spread</span></span>
<span id="cb46-2251"><a href=""></a><span class="vs">        &lt;/p&gt;</span></span>
<span id="cb46-2252"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb46-2253"><a href=""></a><span class="vs">      </span></span>
<span id="cb46-2254"><a href=""></a><span class="vs">      &lt;!-- Plot 4: Residuals vs. Leverage --&gt;</span></span>
<span id="cb46-2255"><a href=""></a><span class="vs">      &lt;div style="background: #f8f9fa; padding: 15px; border-radius: 8px;"&gt;</span></span>
<span id="cb46-2256"><a href=""></a><span class="vs">        &lt;h4 style="color: #27ae60; margin-top: 0;"&gt;4. Residuals vs. Leverage&lt;/h4&gt;</span></span>
<span id="cb46-2257"><a href=""></a><span class="vs">        </span><span class="sc">${</span>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb46-2258"><a href=""></a>          <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb46-2259"><a href=""></a>            Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>]<span class="op">,</span> {<span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">strokeDasharray</span><span class="op">:</span> <span class="st">"3,3"</span>})<span class="op">,</span></span>
<span id="cb46-2260"><a href=""></a>            Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">2</span><span class="op">,</span> <span class="op">-</span><span class="dv">2</span>]<span class="op">,</span> {<span class="dt">stroke</span><span class="op">:</span> <span class="st">"#e74c3c"</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">opacity</span><span class="op">:</span> <span class="fl">0.3</span>})<span class="op">,</span></span>
<span id="cb46-2261"><a href=""></a>            Plot<span class="op">.</span><span class="fu">dot</span>(leverageData<span class="op">,</span> {</span>
<span id="cb46-2262"><a href=""></a>              <span class="dt">x</span><span class="op">:</span> <span class="st">"leverage"</span><span class="op">,</span> </span>
<span id="cb46-2263"><a href=""></a>              <span class="dt">y</span><span class="op">:</span> <span class="st">"standardizedResidual"</span><span class="op">,</span> </span>
<span id="cb46-2264"><a href=""></a>              <span class="dt">fill</span><span class="op">:</span> <span class="st">"#27ae60"</span><span class="op">,</span> </span>
<span id="cb46-2265"><a href=""></a>              <span class="dt">r</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb46-2266"><a href=""></a>              <span class="dt">title</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="vs">`Day </span><span class="sc">${</span>d<span class="op">.</span><span class="at">day</span><span class="sc">}</span><span class="vs">: h·µ¢·µ¢=</span><span class="sc">${</span>d<span class="op">.</span><span class="at">leverage</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)<span class="sc">}</span><span class="vs">, r·µ¢=</span><span class="sc">${</span>d<span class="op">.</span><span class="at">standardizedResidual</span><span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb46-2267"><a href=""></a>            })</span>
<span id="cb46-2268"><a href=""></a>          ]<span class="op">,</span></span>
<span id="cb46-2269"><a href=""></a>          <span class="dt">x</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Leverage (h·µ¢·µ¢)"</span><span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>leverageData<span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">leverage</span>)) <span class="op">*</span> <span class="fl">1.1</span>]}<span class="op">,</span></span>
<span id="cb46-2270"><a href=""></a>          <span class="dt">y</span><span class="op">:</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Standardized Residuals (r·µ¢)"</span><span class="op">,</span> <span class="dt">grid</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">,</span></span>
<span id="cb46-2271"><a href=""></a>          <span class="dt">width</span><span class="op">:</span> <span class="dv">350</span><span class="op">,</span></span>
<span id="cb46-2272"><a href=""></a>          <span class="dt">height</span><span class="op">:</span> <span class="dv">280</span></span>
<span id="cb46-2273"><a href=""></a>        })<span class="sc">}</span></span>
<span id="cb46-2274"><a href=""></a><span class="vs">        &lt;p style="font-size: 12px; color: #7f8c8d; margin-top: 8px;"&gt;</span></span>
<span id="cb46-2275"><a href=""></a><span class="vs">          &lt;strong&gt;Formula:&lt;/strong&gt; h·µ¢·µ¢ = 1/n + (x·µ¢ - xÃÑ)¬≤ / Œ£(x‚±º - xÃÑ)¬≤&lt;br&gt;</span></span>
<span id="cb46-2276"><a href=""></a><span class="vs">          &lt;strong&gt;Checks:&lt;/strong&gt; Influential Observations&lt;br&gt;</span></span>
<span id="cb46-2277"><a href=""></a><span class="vs">          &lt;strong&gt;Look for:&lt;/strong&gt; High leverage + large residuals</span></span>
<span id="cb46-2278"><a href=""></a><span class="vs">        &lt;/p&gt;</span></span>
<span id="cb46-2279"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb46-2280"><a href=""></a><span class="vs">      </span></span>
<span id="cb46-2281"><a href=""></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb46-2282"><a href=""></a><span class="vs">    </span></span>
<span id="cb46-2283"><a href=""></a><span class="vs">    &lt;div style="background: #e8f4f8; padding: 15px; border-radius: 8px; margin-top: 20px;"&gt;</span></span>
<span id="cb46-2284"><a href=""></a><span class="vs">      &lt;h4 style="color: #2c3e50; margin-top: 0;"&gt;üìã Quick Interpretation Guide&lt;/h4&gt;</span></span>
<span id="cb46-2285"><a href=""></a><span class="vs">      &lt;div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;"&gt;</span></span>
<span id="cb46-2286"><a href=""></a><span class="vs">        &lt;div&gt;</span></span>
<span id="cb46-2287"><a href=""></a><span class="vs">          &lt;p style="margin: 5px 0;"&gt;&lt;strong style="color: #2980b9;"&gt;üìê Key Formulas:&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb46-2288"><a href=""></a><span class="vs">          &lt;ul style="margin: 5px 0; font-size: 12px;"&gt;</span></span>
<span id="cb46-2289"><a href=""></a><span class="vs">            &lt;li&gt;&lt;strong&gt;Raw residual:&lt;/strong&gt; e·µ¢ = y·µ¢ - ≈∑·µ¢&lt;/li&gt;</span></span>
<span id="cb46-2290"><a href=""></a><span class="vs">            &lt;li&gt;&lt;strong&gt;Standardized:&lt;/strong&gt; r·µ¢ = (e·µ¢ - ƒì) / s‚Çë&lt;/li&gt;</span></span>
<span id="cb46-2291"><a href=""></a><span class="vs">            &lt;li&gt;&lt;strong&gt;Leverage:&lt;/strong&gt; h·µ¢·µ¢ ‚àà [1/n, 1]&lt;/li&gt;</span></span>
<span id="cb46-2292"><a href=""></a><span class="vs">            &lt;li&gt;&lt;strong&gt;Avg leverage:&lt;/strong&gt; (p+1)/n = 2/n&lt;/li&gt;</span></span>
<span id="cb46-2293"><a href=""></a><span class="vs">          &lt;/ul&gt;</span></span>
<span id="cb46-2294"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb46-2295"><a href=""></a><span class="vs">        &lt;div&gt;</span></span>
<span id="cb46-2296"><a href=""></a><span class="vs">          &lt;p style="margin: 5px 0;"&gt;&lt;strong style="color: #27ae60;"&gt;‚úì Good Signs:&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb46-2297"><a href=""></a><span class="vs">          &lt;ul style="margin: 5px 0; font-size: 12px;"&gt;</span></span>
<span id="cb46-2298"><a href=""></a><span class="vs">            &lt;li&gt;Random scatter in plots 1 &amp; 3&lt;/li&gt;</span></span>
<span id="cb46-2299"><a href=""></a><span class="vs">            &lt;li&gt;Points on diagonal in Q-Q plot&lt;/li&gt;</span></span>
<span id="cb46-2300"><a href=""></a><span class="vs">            &lt;li&gt;No high-leverage outliers&lt;/li&gt;</span></span>
<span id="cb46-2301"><a href=""></a><span class="vs">            &lt;li&gt;Horizontal smoothing lines&lt;/li&gt;</span></span>
<span id="cb46-2302"><a href=""></a><span class="vs">          &lt;/ul&gt;</span></span>
<span id="cb46-2303"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb46-2304"><a href=""></a><span class="vs">        &lt;div&gt;</span></span>
<span id="cb46-2305"><a href=""></a><span class="vs">          &lt;p style="margin: 5px 0;"&gt;&lt;strong style="color: #e74c3c;"&gt;‚úó Warning Signs:&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb46-2306"><a href=""></a><span class="vs">          &lt;ul style="margin: 5px 0; font-size: 12px;"&gt;</span></span>
<span id="cb46-2307"><a href=""></a><span class="vs">            &lt;li&gt;Patterns/curves in residual plots&lt;/li&gt;</span></span>
<span id="cb46-2308"><a href=""></a><span class="vs">            &lt;li&gt;Funnel shapes (heteroscedasticity)&lt;/li&gt;</span></span>
<span id="cb46-2309"><a href=""></a><span class="vs">            &lt;li&gt;Points far from Q-Q diagonal&lt;/li&gt;</span></span>
<span id="cb46-2310"><a href=""></a><span class="vs">            &lt;li&gt;h·µ¢·µ¢ &gt; 2(p+1)/n with |r·µ¢| &gt; 2&lt;/li&gt;</span></span>
<span id="cb46-2311"><a href=""></a><span class="vs">          &lt;/ul&gt;</span></span>
<span id="cb46-2312"><a href=""></a><span class="vs">        &lt;/div&gt;</span></span>
<span id="cb46-2313"><a href=""></a><span class="vs">      &lt;/div&gt;</span></span>
<span id="cb46-2314"><a href=""></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb46-2315"><a href=""></a><span class="vs">  `</span><span class="op">;</span></span>
<span id="cb46-2316"><a href=""></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-46" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="summary-simple-linear-regression" class="slide level2 scrollable">
<h2>üéØ Summary: Simple Linear Regression</h2>
<h3 style="color: white; margin-top: 0;" id="what-weve-learned">üéì What We‚Äôve Learned</h3>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
<h4 style="color: #ffd700; margin-top: 0;" id="the-model">üìê The Model</h4>
<ul>
<li class="fragment">y = Œ≤‚ÇÄ + Œ≤‚ÇÅx + Œµ</li>
<li class="fragment">OLS minimizes SSE</li>
<li class="fragment">Closed-form solution exists</li>
<li class="fragment">Line passes through (xÃÑ, »≥)</li>
</ul>
<h4 style="color: #ffd700; margin-top: 0;" id="evaluation">üìä Evaluation</h4>
<ul>
<li class="fragment">R¬≤ measures fit (0 to 1)</li>
<li class="fragment">Adjusted R¬≤ penalizes complexity</li>
<li class="fragment">SST = SSR + SSE</li>
<li class="fragment">Confidence intervals &amp; hypothesis tests</li>
</ul>
<h4 style="color: #ffd700; margin-top: 0;" id="assumptions-line">‚úÖ Assumptions (LINE)</h4>
<ul>
<li class="fragment"><strong>L</strong>inearity of relationship</li>
<li class="fragment"><strong>I</strong>ndependence of errors</li>
<li class="fragment"><strong>N</strong>ormality of residuals</li>
<li class="fragment"><strong>E</strong>qual variance (homoscedasticity)</li>
</ul>
<h4 style="color: #ffd700; margin-top: 0;" id="diagnostics">üîç Diagnostics</h4>
<ul>
<li class="fragment">Residual plots check assumptions</li>
<li class="fragment">Q-Q plot for normality</li>
<li class="fragment">Leverage identifies influential points</li>
<li class="fragment">4 key diagnostic plots</li>
</ul>
</div>
<div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 8px; margin-top: 20px; border: 2px solid #ffd700; text-align: center;">
<p><strong>üéØ Key Takeaway:</strong> Simple linear regression provides a powerful framework for understanding relationships between two variables - but real-world problems often involve multiple predictors‚Ä¶</p>
</div>
</section>
<section id="next-steps-multiple-linear-regression" class="slide level2 scrollable">
<h2>üöÄ Next Steps: Multiple Linear Regression</h2>
<p><strong>What if sales depend on MULTIPLE factors simultaneously?</strong></p>
<p><span class="math display">\[
\text{Sales} = \beta_0 + \beta_1 \times \text{Temp} + \beta_2 \times \text{Rain} + \beta_3 \times \text{YellowShirt} + \beta_4 \times \text{BigPurchase} + \varepsilon
\]</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb47" data-startfrom="2379" data-source-offset="0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 2378;"><span id="cb47-2379"><a href=""></a><span class="fu">html</span><span class="vs">`</span></span>
<span id="cb47-2380"><a href=""></a><span class="vs">&lt;div style="background: #e8f4f8; padding: 25px; border-radius: 12px; margin: 20px 0;"&gt;</span></span>
<span id="cb47-2381"><a href=""></a></span>
<span id="cb47-2382"><a href=""></a><span class="vs">&lt;div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px;"&gt;</span></span>
<span id="cb47-2383"><a href=""></a></span>
<span id="cb47-2384"><a href=""></a><span class="vs">&lt;div&gt;</span></span>
<span id="cb47-2385"><a href=""></a><span class="vs">&lt;h4 style="color: #2980b9; margin-top: 0;"&gt;üéØ Key Extensions&lt;/h4&gt;</span></span>
<span id="cb47-2386"><a href=""></a><span class="vs">&lt;ul&gt;</span></span>
<span id="cb47-2387"><a href=""></a><span class="vs">&lt;li&gt;&lt;strong&gt;Partial effects:&lt;/strong&gt; Each Œ≤ shows effect "holding others constant"&lt;/li&gt;</span></span>
<span id="cb47-2388"><a href=""></a><span class="vs">&lt;li&gt;&lt;strong&gt;Matrix notation:&lt;/strong&gt; Œ≤ÃÇ = (X·µÄX)‚Åª¬πX·µÄy&lt;/li&gt;</span></span>
<span id="cb47-2389"><a href=""></a><span class="vs">&lt;li&gt;&lt;strong&gt;Same assumptions&lt;/strong&gt; apply (LINE)&lt;/li&gt;</span></span>
<span id="cb47-2390"><a href=""></a><span class="vs">&lt;li&gt;&lt;strong&gt;Standardized coefficients&lt;/strong&gt; compare effect sizes&lt;/li&gt;</span></span>
<span id="cb47-2391"><a href=""></a><span class="vs">&lt;/ul&gt;</span></span>
<span id="cb47-2392"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb47-2393"><a href=""></a></span>
<span id="cb47-2394"><a href=""></a><span class="vs">&lt;div&gt;</span></span>
<span id="cb47-2395"><a href=""></a><span class="vs">&lt;h4 style="color: #27ae60; margin-top: 0;"&gt;üí° What Doesn't Change&lt;/h4&gt;</span></span>
<span id="cb47-2396"><a href=""></a><span class="vs">&lt;ul&gt;</span></span>
<span id="cb47-2397"><a href=""></a><span class="vs">&lt;li&gt;Still minimize SSE (OLS principle)&lt;/li&gt;</span></span>
<span id="cb47-2398"><a href=""></a><span class="vs">&lt;li&gt;Still check diagnostic plots&lt;/li&gt;</span></span>
<span id="cb47-2399"><a href=""></a><span class="vs">&lt;li&gt;Still interpret coefficients carefully&lt;/li&gt;</span></span>
<span id="cb47-2400"><a href=""></a><span class="vs">&lt;li&gt;Still use R¬≤ / Adjusted R¬≤&lt;/li&gt;</span></span>
<span id="cb47-2401"><a href=""></a><span class="vs">&lt;/ul&gt;</span></span>
<span id="cb47-2402"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb47-2403"><a href=""></a></span>
<span id="cb47-2404"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb47-2405"><a href=""></a></span>
<span id="cb47-2406"><a href=""></a><span class="vs">&lt;div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin-top: 20px;"&gt;</span></span>
<span id="cb47-2407"><a href=""></a><span class="vs">&lt;p style="margin: 5px 0;"&gt;&lt;strong&gt;üìö For Further Study:&lt;/strong&gt;&lt;/p&gt;</span></span>
<span id="cb47-2408"><a href=""></a><span class="vs">&lt;ul style="margin: 5px 0; font-size: 14px;"&gt;</span></span>
<span id="cb47-2409"><a href=""></a><span class="vs">&lt;li&gt;Check out the full slides for matrix derivations and interactive examples&lt;/li&gt;</span></span>
<span id="cb47-2410"><a href=""></a><span class="vs">&lt;li&gt;Explore multicollinearity, interaction terms, and model selection&lt;/li&gt;</span></span>
<span id="cb47-2411"><a href=""></a><span class="vs">&lt;li&gt;Practice with real datasets (beyond lemonade stands!)&lt;/li&gt;</span></span>
<span id="cb47-2412"><a href=""></a><span class="vs">&lt;/ul&gt;</span></span>
<span id="cb47-2413"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb47-2414"><a href=""></a></span>
<span id="cb47-2415"><a href=""></a><span class="vs">&lt;/div&gt;</span></span>
<span id="cb47-2416"><a href=""></a><span class="vs">`</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-47" data-nodetype="expression">

</div>
</div>
</div>
</section>
<section id="teaching-philosophy" class="slide level2">
<h2>üåü Teaching Philosophy</h2>
<div style="background: linear-gradient(135deg, #1e3a8a 0%, #7c3aed 100%); color: white; padding: 30px; border-radius: 15px;">
<p><em>‚ÄúEducation is one tree shaking another tree, one cloud pushing another cloud, one soul awakening another soul.‚Äù</em></p>
<p><strong>‚Äî Karl Jaspers</strong></p>
</div>
</section>
<section id="teaching-philosophy-education-as-transformation" class="slide level2 scrollable">
<h2>üåü Teaching Philosophy: Education as Transformation</h2>
<p><br></p>
<div class="fragment">
<h3 id="awe-for-education">üî• <strong>Awe for Education</strong></h3>
<p><em>The Power of Transformation</em></p>
<p>From China to Saudi Arabia to the United States, education opened global opportunities. I‚Äôve witnessed how knowledge bridges cultures and creates new possibilities.</p>
</div>
<div class="fragment">
<h3 id="recent-graduate-perspective">üíù <strong>Recent Graduate Perspective</strong></h3>
<p><em>I Remember What Students Need</em></p>
<p>Graduated &lt; 3 years ago and have started computer science and investment self-learning. I deeply remember:</p>
<ul>
<li class="fragment">The confusion of abstract concepts</li>
<li class="fragment">The joy of ‚Äúaha!‚Äù moments<br>
</li>
<li class="fragment">What makes teaching click</li>
</ul>
</div>
<div class="fragment">
<h3 id="ai-enhanced-future">üöÄ <strong>AI-Enhanced Future</strong></h3>
<p><em>Preparing for Tomorrow</em></p>
<p>AI is revolutionizing everything. Students need:</p>
<ul>
<li class="fragment">Critical thinking &gt; rote skills</li>
<li class="fragment">Human + AI collaboration</li>
<li class="fragment">Adaptability &amp; creativity</li>
</ul>
</div>
</section>
<section id="core-philosophy-1-the-transformative-power-of-education" class="slide level2 scrollable">
<h2>üí´ Core Philosophy 1: The Transformative Power of Education</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment">
<div class="cell" data-reveal="true" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#dbeafe','primaryTextColor':'#1e40af','primaryBorderColor':'#3b82f6','lineColor':'#3b82f6','secondaryColor':'#fef3c7','tertiaryColor':'#d1fae5'}}}%%
graph TB
  A[China's University of Political Science and Law,&lt;br/&gt; China&lt;br/&gt;Free/Almost Free Education before Bachelor,&lt;br/&gt; and Bachelor education in Math and Economics] --&gt;|Gratitude| B[ King Abdullah University of Science and Technology,&lt;br/&gt;  Saudi Arabia&lt;br/&gt;Scholarship-Supported Master &amp; PhD in Statistics]
  B --&gt;|Continued Learning| C[üåç Global Research&lt;br/&gt;St. Jude Children's Research Hospital]
  C --&gt;|Giving Back| D[üë®‚Äçüè´ Teaching&lt;br/&gt;Next Generation]
    
  style A fill:#fef3c7,stroke:#f59e0b,stroke-width:3px
  style B fill:#dbeafe,stroke:#3b82f6,stroke-width:2px
  style C fill:#d1fae5,stroke:#10b981,stroke-width:2px
  style D fill:#fce7f3,stroke:#ec4899,stroke-width:4px
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment" style="background: #fef3c7; padding: 20px; border-radius: 10px; margin: 10px 0; border-left: 5px solid #f59e0b;">
<h4 id="my-story-education-changed-everything">üå± <strong>My Story: Education Changed Everything</strong></h4>
<p><strong>My Mother‚Äôs Wisdom:</strong></p>
<p><em>‚ÄúEven in wealth, don‚Äôt spoil your children; even in poverty, never skimp on education‚Äù</em></p>
<p>My family lived this truth‚Äîno matter our circumstances, education was our most sacred investment.</p>
<p><strong>The Truth I Learned:</strong><br>
Education doesn‚Äôt just teach skills‚Äîit <strong>changes destinies</strong>.</p>
</div>
<div class="fragment" style="background: #dbeafe; padding: 20px; border-radius: 10px; margin: 10px 0; border-left: 5px solid #3b82f6;">
<h4 id="my-teaching-commitment">üéØ <strong>My Teaching Commitment</strong></h4>
<p>Every student in my classroom deserves:</p>
<p>‚ú® <strong>To see their potential</strong><br>
‚ú® <strong>To feel the power of knowledge</strong><br>
‚ú® <strong>To believe they can transform their future</strong></p>
<p><em>I teach with the reverence education deserves.</em></p>
</div>
</div></div>
</section>
<section id="core-philosophy-2-teaching-with-fresh-eyes" class="slide level2 scrollable">
<h2>üéì Core Philosophy 2: Teaching with Fresh Eyes</h2>
<div style="background: linear-gradient(135deg, #e0f2fe 0%, #ddd6fe 100%); padding: 30px; border-radius: 12px; margin: 20px 0;">
<div class="fragment">
<h3 id="the-advantage-of-being-a-recent-graduate-3-years"><strong>The Advantage of Being a Recent Graduate (&lt; 3 years)</strong></h3>
</div>
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 25px;">
<div class="fragment">
<h4 id="i-remember-the-struggle">üß† <strong>I Remember the Struggle</strong></h4>
<div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
<p><strong>As a student, I experienced:</strong></p>
<ul>
<li class="fragment">üò∞ The panic before understanding clicks</li>
<li class="fragment">ü§Ø The overwhelm of new notation</li>
<li class="fragment">üò§ Frustration with ‚Äúobvious‚Äù explanations</li>
<li class="fragment">‚ú® The euphoria of breakthroughs</li>
</ul>
<p><strong>Now as a teacher:</strong> I design lessons to minimize struggle, maximize breakthroughs.</p>
</div>
</div>
<div class="fragment">
<h4 id="i-know-what-actually-helps">üí° <strong>I Know What Actually Helps</strong></h4>
<div class="fragment" style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
<p><strong>Students need:</strong></p>
<p>‚úÖ <strong>Visual intuition</strong> (before theory)<br>
‚úÖ <strong>Why it matters</strong> (motivation first)<br>
‚úÖ <strong>Practical application</strong> (knowledge ‚Üí productivity)</p>
<p><strong>My father‚Äôs wisdom guides my teaching:</strong></p>
<p><em>‚ÄúThe essence of education is not excellent test grades, but how to use knowledge to boost productivity and optimize systems.‚Äù</em></p>
</div>
</div>
</div>
</div>
</section>
<section id="core-philosophy-3-teaching-in-the-ai-era" class="slide level2 scrollable">
<h2>ü§ñ Core Philosophy 3: Teaching in the AI Era</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment" style="background: #f0fdf4; padding: 20px; border-radius: 10px; margin: 10px 0; border-left: 5px solid #10b981;">
<h4 id="the-ai-revolution-is-here">üåä <strong>The AI Revolution is Here</strong></h4>
<p><strong>The landscape is changing:</strong></p>
<ul>
<li class="fragment">ü§ñ AI can code, analyze, explain</li>
<li class="fragment">üìä Technical skills alone aren‚Äôt enough</li>
<li class="fragment">üí° <strong>Human judgment</strong> becomes premium</li>
<li class="fragment">üöÄ Entrepreneurs + AI = exponential impact</li>
</ul>
</div>
<div class="fragment" style="background: #fef2f2; padding: 20px; border-radius: 10px; margin: 10px 0; border-left: 5px solid #ef4444;">
<h4 id="what-this-means-for-teaching">‚ö†Ô∏è <strong>What This Means for Teaching</strong></h4>
<p><strong>Traditional approach = obsolete:</strong></p>
<p>‚ùå Memorizing formulas (AI does this)<br>
‚ùå Routine calculations (AI automates)<br>
‚ùå Following recipes (AI executes)</p>
<p><strong>New imperative:</strong></p>
<p>‚úÖ <strong>Critical thinking</strong>: When to use what<br>
‚úÖ <strong>Problem formulation</strong>: Ask right questions<br>
‚úÖ <strong>Human + AI collaboration</strong>: Amplify intelligence</p>
</div>
<div class="fragment" style="background: #fef3c7; padding: 15px; border-radius: 8px; margin-top: 15px; text-align: center; font-weight: bold; border: 2px dashed #f59e0b;">
<p>Students don‚Äôt just need grades‚Äîthey need to see how knowledge <strong>boosts productivity</strong>, <strong>solves real problems</strong>, and <strong>creates value</strong> in an AI-augmented world.</p>
</div>
</div><div class="column" style="width:50%;">
<div class="fragment" style="background: linear-gradient(135deg, #e0e7ff 0%, #fce7f3 100%); padding: 25px; border-radius: 12px; border: 3px solid #8b5cf6;">
<h4 id="my-ai-enhanced-teaching-philosophy">üéØ <strong>My AI-Enhanced Teaching Philosophy</strong></h4>
<p><strong>Guided by Lao Tzu (~2500 years ago):</strong> <em>(Great truths are always simple)</em></p>
<p><strong>1. üß≠ Teach Fundamental Principles, Not Just Techniques</strong></p>
<ul>
<li class="fragment">Why OLS works (geometry + calculus + linear algebra)</li>
<li class="fragment">Same principles appear in economics, physics, machine learning</li>
<li class="fragment"><strong>Break academic barriers</strong> - statistics connects everything!</li>
</ul>
<p><strong>2. üé® Foster Cross-Disciplinary Thinking</strong></p>
<ul>
<li class="fragment">Today: Math ‚Üí Statistics ‚Üí Medicine ‚Üí Business</li>
<li class="fragment">Fundamental knowledge is universal</li>
<li class="fragment">Innovation happens at intersections</li>
</ul>
<p><strong>3. ü§ù Model Human-AI Collaboration</strong></p>
<ul>
<li class="fragment">I built today‚Äôs slides with AI assistance</li>
<li class="fragment">Used AI for code, but <strong>I</strong> designed ideas and pedagogy</li>
<li class="fragment"><strong>This is the future:</strong> Humans lead, AI assists</li>
</ul>
<p><strong>4. üí™ Focus on Productivity &amp; Real Impact</strong></p>
<ul>
<li class="fragment">Not just ‚Äúget A‚Äôs‚Äù ‚Üí ‚Äúsolve real problems‚Äù</li>
<li class="fragment">How does this optimize pipelines?</li>
<li class="fragment">How does this boost productivity?</li>
<li class="fragment"><strong>Knowledge ‚Üí Application ‚Üí Value</strong></li>
</ul>
</div>
</div></div>
</section>
<section id="my-vision-education-for-the-21st-century" class="slide level2">
<h2>üåà My Vision: Education for the 21st Century</h2>
<p><strong>Bringing It All Together</strong></p>
<div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-top: 20px;">
<div style="background: #fbbf24; color: #1f2937; padding: 20px; border-radius: 10px;">
<p><strong>üî• Transformation</strong></p>
<p>Every lesson honors the power of education to change lives and the potential in every student.</p>
</div>
<div style="background: #34d399; color: #1f2937; padding: 20px; border-radius: 10px;">
<p><strong>üíù Empathy</strong></p>
<p>I teach with empathy because I remember student struggles and care deeply about each learning journey.</p>
</div>
<div style="background: #60a5fa; color: white; padding: 20px; border-radius: 10px;">
<p><strong>üöÄ Innovation</strong></p>
<p>I teach with innovation‚Äîusing AI and interactive methods to prepare students for tomorrow‚Äôs world.</p>
</div>
</div>
</section>
<section id="thank-you" class="slide level2">
<h2>üôè Thank You</h2>
<p><strong>Questions &amp; Discussion</strong></p>
<blockquote>
<p><em>‚ÄúThe great teacher inspires.‚Äù</em> ‚Äî William Arthur Ward</p>
</blockquote>
<p><strong>Let‚Äôs Discuss:</strong></p>
<ul>
<li class="fragment"><p>How do you see AI shaping statistical education?</p></li>
<li class="fragment"><p>What teaching challenges concern you most?</p></li>
<li class="fragment"><p>How can we prepare students for an uncertain future?</p></li>
</ul>
<p><strong>Dr.&nbsp;Zhuo Qu</strong><br>
<em>Transforming lives through education, one student at a time</em></p>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="presentation_interview_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="presentation_interview_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="presentation_interview_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="presentation_interview_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="presentation_interview_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="presentation_interview_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="presentation_interview_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="presentation_interview_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="presentation_interview_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="presentation_interview_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script type="ojs-module-contents">
    eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImxlbW9uYWRlRGF0YSA9IEFycmF5LmZyb20oe2xlbmd0aDogMzF9LCAoXywgaSkgPT4ge1xyXG4gIGNvbnN0IGRheSA9IGAyMDI1LTEwLSR7KGkrMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7XHJcbiAgY29uc3QgdGVtcGVyYXR1cmUgPSBbODAuNSw3OC4yLDgyLjEsNzkuNSw4NC4wLDc3LjMsODUuMiw4MS44LDc5LjAsODMuNCw3NS45LDg0LjYsODIuNSw3NC43LDgwLjIsODYuMSw3Ni40LDc4LjgsNzkuOSw4My4xLDg1LjcsODguNCw4NC4yLDgyLjcsODUuMCw3OC41LDgxLjIsODAuMCw3Ny44LDgzLjksNzQuMF1baV07XHJcbiAgY29uc3QgeWVsbG93X3RzaGlydCA9IFt0cnVlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxmYWxzZSx0cnVlLHRydWUsZmFsc2UsZmFsc2UsdHJ1ZSx0cnVlLGZhbHNlLHRydWUsZmFsc2UsdHJ1ZSxmYWxzZSxmYWxzZV1baV07XHJcbiAgY29uc3QgYmlnX3B1cmNoYXNlID0gWzEwLDUsMCwwLDE1LDAsMjAsMCwwLDUsMCwxMCwwLDAsMCwxMCwwLDAsMCwwLDEwLDE1LDAsMCwwLDAsMjAsMTUsMCw1LDBdW2ldO1xyXG4gIFxyXG4gIGxldCByYWluZmFsbCA9IDA7XHJcbiAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjMpIHtcclxuICAgIGNvbnN0IHUxID0gTWF0aC5yYW5kb20oKTtcclxuICAgIGNvbnN0IHUyID0gTWF0aC5yYW5kb20oKTtcclxuICAgIGNvbnN0IHogPSBNYXRoLnNxcnQoLTIuMCAqIE1hdGgubG9nKHUxKSkgKiBNYXRoLmNvcygyLjAgKiBNYXRoLlBJICogdTIpO1xyXG4gICAgcmFpbmZhbGwgPSBNYXRoLm1heCgwLCArKDE2LjcgKyAzICogeikudG9GaXhlZCgxKSk7XHJcbiAgfVxyXG4gIFxyXG4gIGxldCBzYWxlcyA9IDQwICsgMC43ICogdGVtcGVyYXR1cmUgKyBiaWdfcHVyY2hhc2UgKyAoeWVsbG93X3RzaGlydCA/IDUgOiAwKTtcclxuICBpZiAocmFpbmZhbGwgPiAwKSBzYWxlcyAtPSAxMiArIDAuMyAqIHJhaW5mYWxsO1xyXG4gIFxyXG4gIGNvbnN0IHUxX2VyciA9IE1hdGgucmFuZG9tKCk7XHJcbiAgY29uc3QgdTJfZXJyID0gTWF0aC5yYW5kb20oKTtcclxuICBjb25zdCBlcnJvciA9IDQgKiBNYXRoLnNxcnQoLTIuMCAqIE1hdGgubG9nKHUxX2VycikpICogTWF0aC5jb3MoMi4wICogTWF0aC5QSSAqIHUyX2Vycik7XHJcbiAgc2FsZXMgKz0gZXJyb3I7XHJcbiAgc2FsZXMgPSBNYXRoLnJvdW5kKHNhbGVzKTtcclxuICBcclxuICByZXR1cm4geyBkYXksIHNhbGVzLCB0ZW1wZXJhdHVyZSwgcmFpbmZhbGwsIHllbGxvd190c2hpcnQsIGJpZ19wdXJjaGFzZSB9O1xyXG59KVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJmaXJzdDdEYXlzID0gbGVtb25hZGVEYXRhLnNsaWNlKDAsNylcclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xyXG4gIGNvbnN0IGRhdGEgPSBmaXJzdDdEYXlzLm1hcCgoZCwgaSkgPT4gKHtcclxuICAgIGlkOiBpICsgMSxcclxuICAgIGRheTogZC5kYXksXHJcbiAgICBzYWxlczogZC5zYWxlcyxcclxuICAgIHRlbXBlcmF0dXJlOiBkLnRlbXBlcmF0dXJlLFxyXG4gICAgcHJlY2lwaXRhdGlvbjogZC5yYWluZmFsbCxcclxuICAgIHllbGxvd190c2hpcnQ6IGQueWVsbG93X3RzaGlydCA/IFwiWWVzXCIgOiBcIk5vXCIsXHJcbiAgICBiaWdfcHVyY2hhc2U6IGQuYmlnX3B1cmNoYXNlXHJcbiAgfSkpO1xyXG4gIHJldHVybiBJbnB1dHMudGFibGUoZGF0YSwge1xyXG4gICAgY29sdW1uczogW1wiaWRcIiwgXCJkYXlcIiwgXCJzYWxlc1wiLCBcInRlbXBlcmF0dXJlXCIsIFwicHJlY2lwaXRhdGlvblwiLCBcInllbGxvd190c2hpcnRcIiwgXCJiaWdfcHVyY2hhc2VcIl0sXHJcbiAgICBoZWFkZXI6IHtcclxuICAgICAgaWQ6IFwiRGF5ICNcIixcclxuICAgICAgZGF5OiBcIkRhdGVcIixcclxuICAgICAgc2FsZXM6IFwiU2FsZXNcIixcclxuICAgICAgdGVtcGVyYXR1cmU6IFwiRGFpbHkgQXZlcmFnZSBUZW1wZXJhdHVyZSAo4oiYRilcIixcclxuICAgICAgcHJlY2lwaXRhdGlvbjogXCJEYWlseSBhY2N1bXVsYXRlZCByYWluZmFsbCAobW0pXCIsXHJcbiAgICAgIHllbGxvd190c2hpcnQ6IFwiWWVsbG93IFQtc2hpcnRcIixcclxuICAgICAgYmlnX3B1cmNoYXNlOiBcIkJpZyBQdXJjaGFzZVwiXHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiUGxvdC5wbG90KHtcclxuICBtYXJrczogW1xyXG4gICAgUGxvdC5iYXJZKGZpcnN0N0RheXMsIHt4OiBcImRheVwiLCB5OiBcInNhbGVzXCIsIGZpbGw6IFwiI0ZGQTUwMFwifSlcclxuICBdLFxyXG4gIHg6IHtsYWJlbDogXCJEYXlcIn0sXHJcbiAgeToge2xhYmVsOiBcIk51bWJlciBvZiBMZW1vbmFkZXMgU29sZFwifSxcclxuICB0aXRsZTogXCJMZW1vbmFkZSBTYWxlczogRmlyc3QgNyBEYXlzXCJcclxufSlcclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC01IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidmlld29mIGludGVyY2VwdDAgPSBJbnB1dHMucmFuZ2UoWy0xMCw3MF0sIHt2YWx1ZTo0MCwgc3RlcDoxLCBsYWJlbDpcIkludGVyY2VwdCAozrLigoApXCJ9KVxyXG52aWV3b2Ygc2xvcGUwID0gSW5wdXRzLnJhbmdlKFswLDJdLCB7dmFsdWU6MC43LCBzdGVwOjAuMDEsIGxhYmVsOlwiU2xvcGUgKM6y4oKBKVwifSlcclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC02IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidGVtcCA9IGxlbW9uYWRlRGF0YS5tYXAoZCA9PiBkLnRlbXBlcmF0dXJlKTtcclxuc2FsZXMgPSBsZW1vbmFkZURhdGEubWFwKGQgPT4gZC5zYWxlcyk7XHJcbm9ic2VydmVkTWluID0gTWF0aC5taW4oLi4udGVtcCk7XHJcbm9ic2VydmVkTWF4ID0gTWF0aC5tYXgoLi4udGVtcCk7XHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InNvbGlkTGluZSA9IHtcclxuICBjb25zdCBwb2ludHMgPSBbXTtcclxuICBmb3IgKGxldCB0ID0gb2JzZXJ2ZWRNaW47IHQgPD0gb2JzZXJ2ZWRNYXg7IHQgKz0gMC4xKSB7XHJcbiAgICBwb2ludHMucHVzaCh7dGVtcGVyYXR1cmU6IHQsIHNhbGVzOiBpbnRlcmNlcHQwICsgc2xvcGUwICogdH0pO1xyXG4gIH1cclxuICByZXR1cm4gcG9pbnRzO1xyXG59XHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtOCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImRhc2hlZExpbmVMZWZ0ID0gQXJyYXkuZnJvbShcclxuICB7bGVuZ3RoOiBNYXRoLmZsb29yKChvYnNlcnZlZE1pbiAtIDApIC8gMC4xKX0sXHJcbiAgKF8sIGkpID0+IHtcclxuICAgIGNvbnN0IHQgPSAwICsgaSAqIDAuMTtcclxuICAgIHJldHVybiB7dGVtcGVyYXR1cmU6IHQsIHNhbGVzOiBpbnRlcmNlcHQwICsgc2xvcGUwICogdH07XHJcbiAgfVxyXG4pXHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtOSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImRhc2hlZExpbmVSaWdodCA9IEFycmF5LmZyb20oXHJcbiAge2xlbmd0aDogTWF0aC5mbG9vcigoOTAgLSBvYnNlcnZlZE1heCkgLyAwLjEpfSxcclxuICAoXywgaSkgPT4ge1xyXG4gICAgY29uc3QgdCA9IG9ic2VydmVkTWF4ICsgaSAqIDAuMTtcclxuICAgIHJldHVybiB7dGVtcGVyYXR1cmU6IHQsIHNhbGVzOiBpbnRlcmNlcHQwICsgc2xvcGUwICogdH07XHJcbiAgfVxyXG4pXHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTAiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAqKlRyeSBtb3ZpbmcgdGhlIHNsaWRlcnMhKiogU2VlIGhvdyBjaGFuZ2luZyDOsuKCgCAoaW50ZXJjZXB0KSBhbmQgzrLigoEgKHNsb3BlKSBhZmZlY3RzIHRoZSBmaXQgbGluZS5gXHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTEiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJQbG90LnBsb3Qoe1xyXG4gIG1hcmtzOiBbXHJcbiAgICBQbG90LmRvdChsZW1vbmFkZURhdGEsIHt4OiBcInRlbXBlcmF0dXJlXCIsIHk6IFwic2FsZXNcIiwgZmlsbDogXCIjZTY3ZTIyXCIsIHI6IDQsIHRpdGxlOiBkID0+IGQuZGF5fSksXHJcbiAgICBQbG90LmxpbmUoc29saWRMaW5lLCB7eDogXCJ0ZW1wZXJhdHVyZVwiLCB5OiBcInNhbGVzXCIsIHN0cm9rZTogXCIjMzQ0OTVlXCIsIHN0cm9rZVdpZHRoOiAzfSksXHJcbiAgICBQbG90LmxpbmUoZGFzaGVkTGluZUxlZnQsIHt4OiBcInRlbXBlcmF0dXJlXCIsIHk6IFwic2FsZXNcIiwgc3Ryb2tlOiBcIiMzNDQ5NWVcIiwgc3Ryb2tlV2lkdGg6IDIsIHN0cm9rZURhc2hhcnJheTogXCI2LDRcIn0pLFxyXG4gICAgUGxvdC5saW5lKGRhc2hlZExpbmVSaWdodCwge3g6IFwidGVtcGVyYXR1cmVcIiwgeTogXCJzYWxlc1wiLCBzdHJva2U6IFwiIzM0NDk1ZVwiLCBzdHJva2VXaWR0aDogMiwgc3Ryb2tlRGFzaGFycmF5OiBcIjYsNFwifSksXHJcbiAgICBQbG90LnRleHQoW1xyXG4gICAgICB7dGVtcGVyYXR1cmU6IDIsIHNhbGVzOiAxMjAsIHRleHQ6IGBTYWxlcyA9ICR7aW50ZXJjZXB0MC50b0ZpeGVkKDIpfSArICR7c2xvcGUwLnRvRml4ZWQoMil9IMOXIFRlbXBlcmF0dXJlYH1cclxuICAgIF0sIHtcclxuICAgICAgeDogXCJ0ZW1wZXJhdHVyZVwiLCB5OiBcInNhbGVzXCIsIHRleHQ6IFwidGV4dFwiLCBmb250U2l6ZTogMTgsIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLCBmaWxsOiBcIiMzNDQ5NWVcIiwgZHk6IDIwLCBkeDogMTUwXHJcbiAgICB9KVxyXG4gIF0sXHJcbiAgeDoge2RvbWFpbjogWzAsIDkwXSwgbGFiZWw6IFwiVGVtcGVyYXR1cmUgKMKwRilcIn0sXHJcbiAgeToge2RvbWFpbjogWzAsIDEzMF0sIGxhYmVsOiBcIk51bWJlciBvZiBMZW1vbmFkZXMgU29sZFwifSxcclxuICB3aWR0aDogNjAwLFxyXG4gIGhlaWdodDogNDAwLFxyXG4gIGdyaWQ6IHRydWUsXHJcbiAgdGl0bGU6IFwiU2FsZXMgdnMgVGVtcGVyYXR1cmU6IEFkanVzdCB0aGUgTGluZSFcIixcclxuICB6b29tOiB0cnVlXHJcbn0pXHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ2aWV3b2Ygc2VsZWN0ZWRQb2ludCA9IElucHV0cy5zZWxlY3QoXHJcbiAgbGVtb25hZGVEYXRhLm1hcCgoZCwgaSkgPT4gaSksXHJcbiAge1xyXG4gICAgbGFiZWw6IFwiU2VsZWN0IGEgZGF0YSBwb2ludDpcIixcclxuICAgIGZvcm1hdDogaSA9PiBgRGF5ICR7aSArIDF9ICgke2xlbW9uYWRlRGF0YVtpXS5kYXl9KWBcclxuICB9XHJcbilcclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IntcclxuICBjb25zdCBwb2ludCA9IGxlbW9uYWRlRGF0YVtzZWxlY3RlZFBvaW50XTtcclxuICBjb25zdCBwcmVkaWN0ZWQgPSA0MCArIDAuNyAqIHBvaW50LnRlbXBlcmF0dXJlO1xyXG4gIGNvbnN0IHJlc2lkdWFsID0gcG9pbnQuc2FsZXMgLSBwcmVkaWN0ZWQ7XHJcbiAgXHJcbiAgcmV0dXJuIG1kYFxyXG4jIyMgRGVmaW5pdGlvblxyXG4qKlJlc2lkdWFsKiogPSBPYnNlcnZlZCAtIFByZWRpY3RlZFxyXG5cclxuZeG1oiA9IHnhtaIg4oiSIMW34bWiXHJcblxyXG4jIyMgRXhhbXBsZTogRGF5ICR7c2VsZWN0ZWRQb2ludCArIDF9XHJcbi0gKipPYnNlcnZlZCBTYWxlcyAoeeG1oikqKjogJHtwb2ludC5zYWxlc30gbGVtb25hZGVzXHJcbi0gKipUZW1wZXJhdHVyZSoqOiAke3BvaW50LnRlbXBlcmF0dXJlfcKwRlxyXG4tICoqUHJlZGljdGVkIFNhbGVzICjFt+G1oikqKjogJHtwcmVkaWN0ZWQudG9GaXhlZCgxKX0gbGVtb25hZGVzXHJcbi0gKipSZXNpZHVhbCAoZeG1oikqKjogJHtyZXNpZHVhbC50b0ZpeGVkKDEpfSBsZW1vbmFkZXNcclxuXHJcbiR7cmVzaWR1YWwgPiAwID8gJ+KchSBTb2xkIE1PUkUgdGhhbiBwcmVkaWN0ZWQhJyA6ICfinYwgU29sZCBMRVNTIHRoYW4gcHJlZGljdGVkISd9XHJcbiAgYDtcclxufVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xyXG4gIGNvbnN0IHBvaW50ID0gbGVtb25hZGVEYXRhW3NlbGVjdGVkUG9pbnRdO1xyXG4gIGNvbnN0IHByZWRpY3RlZCA9IDQwICsgMC43ICogcG9pbnQudGVtcGVyYXR1cmU7XHJcbiAgXHJcbiAgcmV0dXJuIFBsb3QucGxvdCh7XHJcbiAgICBtYXJrczogW1xyXG4gICAgICBQbG90LmRvdChcclxuICAgICAgICBsZW1vbmFkZURhdGEuZmlsdGVyKChfLCBpKSA9PiBpICE9PSBzZWxlY3RlZFBvaW50KSxcclxuICAgICAgICB7eDogXCJ0ZW1wZXJhdHVyZVwiLCB5OiBcInNhbGVzXCIsIGZpbGw6IFwiI2U2N2UyMlwiLCByOiA0LCBvcGFjaXR5OiAwLjN9XHJcbiAgICAgICksXHJcbiAgICAgIFBsb3QuZG90KFxyXG4gICAgICAgIFtwb2ludF0sXHJcbiAgICAgICAge3g6IFwidGVtcGVyYXR1cmVcIiwgeTogXCJzYWxlc1wiLCBmaWxsOiBcIiNlNzRjM2NcIiwgcjogOCwgc3Ryb2tlOiBcIiNjMDM5MmJcIiwgc3Ryb2tlV2lkdGg6IDJ9XHJcbiAgICAgICksXHJcbiAgICAgIFBsb3QubGluZShcclxuICAgICAgICBbe3RlbXBlcmF0dXJlOiA3NCwgc2FsZXM6IDQwICsgMC43ICogNzR9LCB7dGVtcGVyYXR1cmU6IDg5LCBzYWxlczogNDAgKyAwLjcgKiA4OX1dLFxyXG4gICAgICAgIHt4OiBcInRlbXBlcmF0dXJlXCIsIHk6IFwic2FsZXNcIiwgc3Ryb2tlOiBcIiMzNDQ5NWVcIiwgc3Ryb2tlV2lkdGg6IDJ9XHJcbiAgICAgICksXHJcbiAgICAgIFBsb3QubGluayhcclxuICAgICAgICBbe1xyXG4gICAgICAgICAgeDE6IHBvaW50LnRlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgeTE6IHBvaW50LnNhbGVzLFxyXG4gICAgICAgICAgeDI6IHBvaW50LnRlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgeTI6IHByZWRpY3RlZFxyXG4gICAgICAgIH1dLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHgxOiBcIngxXCIsIHkxOiBcInkxXCIsIHgyOiBcIngyXCIsIHkyOiBcInkyXCIsXHJcbiAgICAgICAgICBzdHJva2U6IFwiI2U3NGMzY1wiLFxyXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6IDMsXHJcbiAgICAgICAgICBzdHJva2VEYXNoYXJyYXk6IFwiNSw1XCIsXHJcbiAgICAgICAgICBtYXJrZXJFbmQ6IFwiYXJyb3dcIlxyXG4gICAgICAgIH1cclxuICAgICAgKSxcclxuICAgICAgUGxvdC50ZXh0KFxyXG4gICAgICAgIFt7XHJcbiAgICAgICAgICB0ZW1wZXJhdHVyZTogcG9pbnQudGVtcGVyYXR1cmUsXHJcbiAgICAgICAgICBzYWxlczogKHBvaW50LnNhbGVzICsgcHJlZGljdGVkKSAvIDIsXHJcbiAgICAgICAgICB0ZXh0OiBgZeG1oiA9ICR7KHBvaW50LnNhbGVzIC0gcHJlZGljdGVkKS50b0ZpeGVkKDEpfWBcclxuICAgICAgICB9XSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB4OiBcInRlbXBlcmF0dXJlXCIsXHJcbiAgICAgICAgICB5OiBcInNhbGVzXCIsXHJcbiAgICAgICAgICB0ZXh0OiBcInRleHRcIixcclxuICAgICAgICAgIGZvbnRTaXplOiAxNixcclxuICAgICAgICAgIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLFxyXG4gICAgICAgICAgZmlsbDogXCIjZTc0YzNjXCIsXHJcbiAgICAgICAgICBkeDogMTBcclxuICAgICAgICB9XHJcbiAgICAgICksXHJcbiAgICAgIFBsb3QudGV4dChcclxuICAgICAgICBbe1xyXG4gICAgICAgICAgdGVtcGVyYXR1cmU6IHBvaW50LnRlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgc2FsZXM6IHBvaW50LnNhbGVzLFxyXG4gICAgICAgICAgdGV4dDogYCh44bWiPSR7cG9pbnQudGVtcGVyYXR1cmV9LCB54bWiPSR7cG9pbnQuc2FsZXN9KWBcclxuICAgICAgICB9XSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICB4OiBcInRlbXBlcmF0dXJlXCIsXHJcbiAgICAgICAgICB5OiBcInNhbGVzXCIsXHJcbiAgICAgICAgICB0ZXh0OiBcInRleHRcIixcclxuICAgICAgICAgIGZvbnRTaXplOiAxNixcclxuICAgICAgICAgIGZpbGw6IFwiI2U3NGMzY1wiLFxyXG4gICAgICAgICAgZHk6IC0xNFxyXG4gICAgICAgIH1cclxuICAgICAgKSxcclxuICAgICAgUGxvdC50ZXh0KFxyXG4gICAgICAgIFt7XHJcbiAgICAgICAgICB0ZW1wZXJhdHVyZTogcG9pbnQudGVtcGVyYXR1cmUsXHJcbiAgICAgICAgICBzYWxlczogcHJlZGljdGVkLFxyXG4gICAgICAgICAgdGV4dDogYCh44bWiPSR7cG9pbnQudGVtcGVyYXR1cmV9LCDFt+G1oj0ke3ByZWRpY3RlZC50b0ZpeGVkKDEpfSlgXHJcbiAgICAgICAgfV0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgeDogXCJ0ZW1wZXJhdHVyZVwiLFxyXG4gICAgICAgICAgeTogXCJzYWxlc1wiLFxyXG4gICAgICAgICAgdGV4dDogXCJ0ZXh0XCIsXHJcbiAgICAgICAgICBmb250U2l6ZTogMTYsXHJcbiAgICAgICAgICBmaWxsOiBcIiMzNDQ5NWVcIixcclxuICAgICAgICAgIGR5OiAxNFxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG4gICAgXSxcclxuICAgIHg6IHtsYWJlbDogXCJUZW1wZXJhdHVyZSAowrBGKVwifSxcclxuICAgIHk6IHtsYWJlbDogXCJTYWxlc1wifSxcclxuICAgIHdpZHRoOiA3MDAsXHJcbiAgICBoZWlnaHQ6IDYwMCxcclxuICAgIGdyaWQ6IHRydWVcclxuICB9KTtcclxufVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE1IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoic3NyQ2FsY3MgPSB7XHJcbiAgY29uc3QgbiA9IGxlbW9uYWRlRGF0YS5sZW5ndGg7XHJcbiAgY29uc3QgbWVhblRlbXAgPSBsZW1vbmFkZURhdGEucmVkdWNlKChzdW0sIGQpID0+IHN1bSArIGQudGVtcGVyYXR1cmUsIDApIC8gbjtcclxuICBjb25zdCBtZWFuU2FsZXMgPSBsZW1vbmFkZURhdGEucmVkdWNlKChzdW0sIGQpID0+IHN1bSArIGQuc2FsZXMsIDApIC8gbjtcclxuICBcclxuICBsZXQgbnVtZXJhdG9yID0gMDtcclxuICBsZXQgZGVub21pbmF0b3IgPSAwO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbiAgICBudW1lcmF0b3IgKz0gKGxlbW9uYWRlRGF0YVtpXS50ZW1wZXJhdHVyZSAtIG1lYW5UZW1wKSAqIChsZW1vbmFkZURhdGFbaV0uc2FsZXMgLSBtZWFuU2FsZXMpO1xyXG4gICAgZGVub21pbmF0b3IgKz0gKGxlbW9uYWRlRGF0YVtpXS50ZW1wZXJhdHVyZSAtIG1lYW5UZW1wKSAqKiAyO1xyXG4gIH1cclxuICBcclxuICBjb25zdCBzbG9wZSA9IG51bWVyYXRvciAvIGRlbm9taW5hdG9yO1xyXG4gIGNvbnN0IGludGVyY2VwdCA9IG1lYW5TYWxlcyAtIHNsb3BlICogbWVhblRlbXA7XHJcbiAgXHJcbiAgY29uc3Qgc3NyID0gbGVtb25hZGVEYXRhLnJlZHVjZSgoc3VtLCBkKSA9PiB7XHJcbiAgICBjb25zdCBwcmVkID0gaW50ZXJjZXB0ICsgc2xvcGUgKiBkLnRlbXBlcmF0dXJlO1xyXG4gICAgcmV0dXJuIHN1bSArIChkLnNhbGVzIC0gcHJlZCkgKiogMjtcclxuICB9LCAwKTtcclxuICBcclxuICByZXR1cm4geyBzbG9wZSwgaW50ZXJjZXB0LCBzc3IgfTtcclxufVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgKipNaW5pbWl6ZXMgU1NFKio6IM6jKHnhtaIgLSDFt+G1oinCslxyXG5cclxuKipPcHRpbWFsIExpbmUqKjogU2FsZXMgPSAke3NzckNhbGNzLmludGVyY2VwdC50b0ZpeGVkKDIpfSArICR7c3NyQ2FsY3Muc2xvcGUudG9GaXhlZCgzKX0gw5cgVGVtcGVyYXR1cmVcclxuXHJcbioqU1NFKio6ICR7c3NyQ2FsY3Muc3NyLnRvRml4ZWQoMil9XHJcblxyXG4qKkNoYXJhY3RlcmlzdGljKio6IEhlYXZpbHkgcGVuYWxpemVzIGxhcmdlIGVycm9ycyAob3V0bGllcnMgaGF2ZSBiaWcgaW1wYWN0KWBcclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IntcclxuICBjb25zdCB0ZW1wcyA9IGxlbW9uYWRlRGF0YS5tYXAoZCA9PiBkLnRlbXBlcmF0dXJlKTtcclxuICBjb25zdCBtaW5UZW1wID0gTWF0aC5taW4oLi4udGVtcHMpO1xyXG4gIGNvbnN0IG1heFRlbXAgPSBNYXRoLm1heCguLi50ZW1wcyk7XHJcbiAgY29uc3QgZml0dGVkTGluZSA9IFtcclxuICAgIHt0ZW1wZXJhdHVyZTogbWluVGVtcCwgc2FsZXM6IHNzckNhbGNzLmludGVyY2VwdCArIHNzckNhbGNzLnNsb3BlICogbWluVGVtcH0sXHJcbiAgICB7dGVtcGVyYXR1cmU6IG1heFRlbXAsIHNhbGVzOiBzc3JDYWxjcy5pbnRlcmNlcHQgKyBzc3JDYWxjcy5zbG9wZSAqIG1heFRlbXB9XHJcbiAgXTtcclxuXHJcbiAgcmV0dXJuIFBsb3QucGxvdCh7XHJcbiAgICBtYXJrczogW1xyXG4gICAgICBQbG90LmRvdChsZW1vbmFkZURhdGEsIHt4OiBcInRlbXBlcmF0dXJlXCIsIHk6IFwic2FsZXNcIiwgZmlsbDogXCIjZTY3ZTIyXCIsIHI6IDR9KSxcclxuICAgICAgUGxvdC5saW5lKGZpdHRlZExpbmUsIHt4OiBcInRlbXBlcmF0dXJlXCIsIHk6IFwic2FsZXNcIiwgc3Ryb2tlOiBcIiMzNDk4ZGJcIiwgc3Ryb2tlV2lkdGg6IDN9KSxcclxuICAgICAgLy8gQWRkIGZvcm11bGEgYW5ub3RhdGlvblxyXG4gICAgICBQbG90LnRleHQoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHRlbXBlcmF0dXJlOiBtaW5UZW1wICsgMixcclxuICAgICAgICAgIHNhbGVzOiBzc3JDYWxjcy5pbnRlcmNlcHQgKyBzc3JDYWxjcy5zbG9wZSAqIChtaW5UZW1wICsgMikgKyA4LFxyXG4gICAgICAgICAgdGV4dDogYE1pbmltaXplIFNTRTogeSA9ICR7c3NyQ2FsY3MuaW50ZXJjZXB0LnRvRml4ZWQoMil9ICsgJHtzc3JDYWxjcy5zbG9wZS50b0ZpeGVkKDMpfSDDlyBUZW1wYFxyXG4gICAgICAgIH1cclxuICAgICAgXSwge1xyXG4gICAgICAgIHg6IFwidGVtcGVyYXR1cmVcIiwgeTogXCJzYWxlc1wiLCB0ZXh0OiBcInRleHRcIiwgXHJcbiAgICAgICAgZm9udFNpemU6IDEzLCBmb250V2VpZ2h0OiBcImJvbGRcIiwgZmlsbDogXCIjMzQ5OGRiXCIsIHRleHRBbmNob3I6IFwic3RhcnRcIlxyXG4gICAgICB9KVxyXG4gICAgXSxcclxuICAgIHg6IHtsYWJlbDogXCJUZW1wZXJhdHVyZSAowrBGKVwifSxcclxuICAgIHk6IHtsYWJlbDogXCJTYWxlc1wifSxcclxuICAgIHdpZHRoOiA3MDAsXHJcbiAgICBoZWlnaHQ6IDQwMCxcclxuICAgIGdyaWQ6IHRydWVcclxuICB9KTtcclxufVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE4IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoic2FyQ2FsY3MgPSB7XHJcbiAgY29uc3Qgc2xvcGUgPSAwLjY1O1xyXG4gIGNvbnN0IGludGVyY2VwdCA9IDQ1O1xyXG4gIFxyXG4gIGNvbnN0IHNhciA9IGxlbW9uYWRlRGF0YS5yZWR1Y2UoKHN1bSwgZCkgPT4ge1xyXG4gICAgY29uc3QgcHJlZCA9IGludGVyY2VwdCArIHNsb3BlICogZC50ZW1wZXJhdHVyZTtcclxuICAgIHJldHVybiBzdW0gKyBNYXRoLmFicyhkLnNhbGVzIC0gcHJlZCk7XHJcbiAgfSwgMCk7XHJcbiAgXHJcbiAgcmV0dXJuIHsgc2xvcGUsIGludGVyY2VwdCwgc2FyIH07XHJcbn1cclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xOSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCoqTWluaW1pemVzIFNBRSoqOiDOo3x54bWiIC0gxbfhtaJ8XHJcblxyXG4qKk9wdGltYWwgTGluZSoqOiBTYWxlcyDiiYggJHtzYXJDYWxjcy5pbnRlcmNlcHQudG9GaXhlZCgyKX0gKyAke3NhckNhbGNzLnNsb3BlLnRvRml4ZWQoMyl9IMOXIFRlbXBlcmF0dXJlXHJcblxyXG4qKlNBRSoqOiAke3NhckNhbGNzLnNhci50b0ZpeGVkKDIpfVxyXG5cclxuKipDaGFyYWN0ZXJpc3RpYyoqOiBNb3JlIHJvYnVzdCB0byBvdXRsaWVycyAobWVkaWFuIHJlZ3Jlc3Npb24pYFxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xyXG4gIGNvbnN0IHRlbXBzID0gbGVtb25hZGVEYXRhLm1hcChkID0+IGQudGVtcGVyYXR1cmUpO1xyXG4gIGNvbnN0IG1pblRlbXAgPSBNYXRoLm1pbiguLi50ZW1wcyk7XHJcbiAgY29uc3QgbWF4VGVtcCA9IE1hdGgubWF4KC4uLnRlbXBzKTtcclxuICBjb25zdCBmaXR0ZWRMaW5lID0gW1xyXG4gICAge3RlbXBlcmF0dXJlOiBtaW5UZW1wLCBzYWxlczogc2FyQ2FsY3MuaW50ZXJjZXB0ICsgc2FyQ2FsY3Muc2xvcGUgKiBtaW5UZW1wfSxcclxuICAgIHt0ZW1wZXJhdHVyZTogbWF4VGVtcCwgc2FsZXM6IHNhckNhbGNzLmludGVyY2VwdCArIHNhckNhbGNzLnNsb3BlICogbWF4VGVtcH1cclxuICBdO1xyXG5cclxuICByZXR1cm4gUGxvdC5wbG90KHtcclxuICAgIG1hcmtzOiBbXHJcbiAgICAgIFBsb3QuZG90KGxlbW9uYWRlRGF0YSwge3g6IFwidGVtcGVyYXR1cmVcIiwgeTogXCJzYWxlc1wiLCBmaWxsOiBcIiNlNjdlMjJcIiwgcjogNH0pLFxyXG4gICAgICBQbG90LmxpbmUoZml0dGVkTGluZSwge3g6IFwidGVtcGVyYXR1cmVcIiwgeTogXCJzYWxlc1wiLCBzdHJva2U6IFwiIzJlY2M3MVwiLCBzdHJva2VXaWR0aDogM30pLFxyXG4gICAgICAvLyBBZGQgZm9ybXVsYSBhbm5vdGF0aW9uXHJcbiAgICAgIFBsb3QudGV4dChbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGVtcGVyYXR1cmU6IG1pblRlbXAgKyAyLFxyXG4gICAgICAgICAgc2FsZXM6IHNhckNhbGNzLmludGVyY2VwdCArIHNhckNhbGNzLnNsb3BlICogKG1pblRlbXAgKyAyKSArIDgsXHJcbiAgICAgICAgICB0ZXh0OiBgTWluaW1pemUgU0FFOiB5ID0gJHtzYXJDYWxjcy5pbnRlcmNlcHQudG9GaXhlZCgyKX0gKyAke3NhckNhbGNzLnNsb3BlLnRvRml4ZWQoMyl9IMOXIFRlbXBgXHJcbiAgICAgICAgfVxyXG4gICAgICBdLCB7XHJcbiAgICAgICAgeDogXCJ0ZW1wZXJhdHVyZVwiLCB5OiBcInNhbGVzXCIsIHRleHQ6IFwidGV4dFwiLCBcclxuICAgICAgICBmb250U2l6ZTogMTMsIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLCBmaWxsOiBcIiMyZWNjNzFcIiwgdGV4dEFuY2hvcjogXCJzdGFydFwiXHJcbiAgICAgIH0pXHJcbiAgICBdLFxyXG4gICAgeDoge2xhYmVsOiBcIlRlbXBlcmF0dXJlICjCsEYpXCJ9LFxyXG4gICAgeToge2xhYmVsOiBcIlNhbGVzXCJ9LFxyXG4gICAgd2lkdGg6IDcwMCxcclxuICAgIGhlaWdodDogNDAwLFxyXG4gICAgZ3JpZDogdHJ1ZVxyXG4gIH0pO1xyXG59XHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjEiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ7XHJcbiAgY29uc3QgbiA9IGxlbW9uYWRlRGF0YS5sZW5ndGg7XHJcbiAgY29uc3QgbWVhblRlbXAgPSBsZW1vbmFkZURhdGEucmVkdWNlKChzdW0sIGQpID0+IHN1bSArIGQudGVtcGVyYXR1cmUsIDApIC8gbjtcclxuICBjb25zdCBtZWFuU2FsZXMgPSBsZW1vbmFkZURhdGEucmVkdWNlKChzdW0sIGQpID0+IHN1bSArIGQuc2FsZXMsIDApIC8gbjtcclxuICBcclxuICByZXR1cm4gbWRgKipNaW5pbWl6ZXMgU1JFKio6IM6jKHnhtaIgLSDFt+G1oilcclxuXHJcbioqUHJvYmxlbSoqOiBUaGlzIGRvZXNuJ3Qgd29yayEg4pqg77iPXHJcblxyXG4qKldoeT8qKiBQb3NpdGl2ZSBhbmQgbmVnYXRpdmUgcmVzaWR1YWxzIGNhbmNlbCBvdXQuIEFueSBsaW5lIHRocm91Z2ggdGhlIGNlbnRyb2lkICh4zIQgPSAke21lYW5UZW1wLnRvRml4ZWQoMil9wrBGLCDIsyA9ICR7bWVhblNhbGVzLnRvRml4ZWQoMil9KSBoYXMgU1JFIOKJiCAwLlxyXG5cclxuKipSZXN1bHQqKjogSW5maW5pdGUgc29sdXRpb25zIC0gbm90IHVzZWZ1bCBmb3IgZmluZGluZyB0aGUgXCJiZXN0XCIgZml0IWA7XHJcbn1cclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IntcclxuICBjb25zdCBuID0gbGVtb25hZGVEYXRhLmxlbmd0aDtcclxuICBjb25zdCBtZWFuVGVtcCA9IGxlbW9uYWRlRGF0YS5yZWR1Y2UoKHN1bSwgZCkgPT4gc3VtICsgZC50ZW1wZXJhdHVyZSwgMCkgLyBuO1xyXG4gIGNvbnN0IG1lYW5TYWxlcyA9IGxlbW9uYWRlRGF0YS5yZWR1Y2UoKHN1bSwgZCkgPT4gc3VtICsgZC5zYWxlcywgMCkgLyBuO1xyXG4gIGNvbnN0IHNsb3BlcyA9IFswLjMsIDAuNjUsIDEuMF07XHJcbiAgY29uc3QgdGVtcHMgPSBsZW1vbmFkZURhdGEubWFwKGQgPT4gZC50ZW1wZXJhdHVyZSk7XHJcbiAgY29uc3QgbWluVGVtcCA9IE1hdGgubWluKC4uLnRlbXBzKTtcclxuICBjb25zdCBtYXhUZW1wID0gTWF0aC5tYXgoLi4udGVtcHMpO1xyXG4gIFxyXG4gIHJldHVybiBQbG90LnBsb3Qoe1xyXG4gICAgbWFya3M6IFtcclxuICAgICAgUGxvdC5kb3QobGVtb25hZGVEYXRhLCB7eDogXCJ0ZW1wZXJhdHVyZVwiLCB5OiBcInNhbGVzXCIsIGZpbGw6IFwiI2U2N2UyMlwiLCByOiA0fSksXHJcbiAgICAgIC8vIEhpZ2hsaWdodCB0aGUgY2VudHJvaWQgcG9pbnRcclxuICAgICAgUGxvdC5kb3QoXHJcbiAgICAgICAgW3t0ZW1wZXJhdHVyZTogbWVhblRlbXAsIHNhbGVzOiBtZWFuU2FsZXN9XSxcclxuICAgICAgICB7eDogXCJ0ZW1wZXJhdHVyZVwiLCB5OiBcInNhbGVzXCIsIGZpbGw6IFwiI2U3NGMzY1wiLCByOiA4LCBzdHJva2U6IFwiI2MwMzkyYlwiLCBzdHJva2VXaWR0aDogMn1cclxuICAgICAgKSxcclxuICAgICAgLy8gQWRkIHRleHQgYW5ub3RhdGlvbiBmb3IgY2VudHJvaWRcclxuICAgICAgUGxvdC50ZXh0KFxyXG4gICAgICAgIFt7dGVtcGVyYXR1cmU6IG1lYW5UZW1wLCBzYWxlczogbWVhblNhbGVzLCB0ZXh0OiBgKHjMhD0ke21lYW5UZW1wLnRvRml4ZWQoMSl9LCDIsz0ke21lYW5TYWxlcy50b0ZpeGVkKDEpfSlgfV0sXHJcbiAgICAgICAge3g6IFwidGVtcGVyYXR1cmVcIiwgeTogXCJzYWxlc1wiLCB0ZXh0OiBcInRleHRcIiwgZm9udFNpemU6IDE0LCBmb250V2VpZ2h0OiBcImJvbGRcIiwgZmlsbDogXCIjZTc0YzNjXCIsIGR5OiAtMTV9XHJcbiAgICAgICksXHJcbiAgICAgIC4uLnNsb3Blcy5tYXAoKHNsb3BlLCBpKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW50ZXJjZXB0ID0gbWVhblNhbGVzIC0gc2xvcGUgKiBtZWFuVGVtcDtcclxuICAgICAgICByZXR1cm4gUGxvdC5saW5lKFxyXG4gICAgICAgICAgW1xyXG4gICAgICAgICAgICB7dGVtcGVyYXR1cmU6IG1pblRlbXAsIHNhbGVzOiBpbnRlcmNlcHQgKyBzbG9wZSAqIG1pblRlbXB9LFxyXG4gICAgICAgICAgICB7dGVtcGVyYXR1cmU6IG1heFRlbXAsIHNhbGVzOiBpbnRlcmNlcHQgKyBzbG9wZSAqIG1heFRlbXB9XHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB4OiBcInRlbXBlcmF0dXJlXCIsIFxyXG4gICAgICAgICAgICB5OiBcInNhbGVzXCIsIFxyXG4gICAgICAgICAgICBzdHJva2U6IFwiIzk1YTVhNlwiLCBcclxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDIsXHJcbiAgICAgICAgICAgIHN0cm9rZURhc2hhcnJheTogXCI1LDVcIixcclxuICAgICAgICAgICAgb3BhY2l0eTogMC42XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgfSksXHJcbiAgICAgIC8vIEFkZCBhbm5vdGF0aW9uIHNob3dpbmcgb25lIGV4YW1wbGVcclxuICAgICAgUGxvdC50ZXh0KFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0ZW1wZXJhdHVyZTogbWluVGVtcCArIDIsXHJcbiAgICAgICAgICBzYWxlczogKG1lYW5TYWxlcyAtIHNsb3Blc1sxXSAqIG1lYW5UZW1wKSArIHNsb3Blc1sxXSAqIChtaW5UZW1wICsgMikgKyA4LFxyXG4gICAgICAgICAgdGV4dDogYFNSRSDiiYggMCBmb3IgYWxsIGxpbmVzIHRocm91Z2ggKHjMhCwgyLMpYFxyXG4gICAgICAgIH1cclxuICAgICAgXSwge1xyXG4gICAgICAgIHg6IFwidGVtcGVyYXR1cmVcIiwgeTogXCJzYWxlc1wiLCB0ZXh0OiBcInRleHRcIiwgXHJcbiAgICAgICAgZm9udFNpemU6IDEzLCBmb250V2VpZ2h0OiBcImJvbGRcIiwgZmlsbDogXCIjOTVhNWE2XCIsIHRleHRBbmNob3I6IFwic3RhcnRcIlxyXG4gICAgICB9KVxyXG4gICAgXSxcclxuICAgIHg6IHtsYWJlbDogXCJUZW1wZXJhdHVyZSAowrBGKVwifSxcclxuICAgIHk6IHtsYWJlbDogXCJTYWxlc1wifSxcclxuICAgIHdpZHRoOiA3MDAsXHJcbiAgICBoZWlnaHQ6IDQwMCxcclxuICAgIGdyaWQ6IHRydWVcclxuICB9KTtcclxufVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIzIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xyXG4gIGNvbnN0IG4gPSBsZW1vbmFkZURhdGEubGVuZ3RoO1xyXG4gIGNvbnN0IG1lYW5UZW1wID0gbGVtb25hZGVEYXRhLnJlZHVjZSgoc3VtLCBkKSA9PiBzdW0gKyBkLnRlbXBlcmF0dXJlLCAwKSAvIG47XHJcbiAgY29uc3QgbWVhblNhbGVzID0gbGVtb25hZGVEYXRhLnJlZHVjZSgoc3VtLCBkKSA9PiBzdW0gKyBkLnNhbGVzLCAwKSAvIG47XHJcbiAgXHJcbiAgY29uc3QgdGVtcHMgPSBsZW1vbmFkZURhdGEubWFwKGQgPT4gZC50ZW1wZXJhdHVyZSk7XHJcbiAgY29uc3QgbWluVGVtcCA9IE1hdGgubWluKC4uLnRlbXBzKTtcclxuICBjb25zdCBtYXhUZW1wID0gTWF0aC5tYXgoLi4udGVtcHMpO1xyXG4gIFxyXG4gIC8vIFNTRSBsaW5lIChmcm9tIHNzckNhbGNzKVxyXG4gIGNvbnN0IHNzZVNsb3BlID0gc3NyQ2FsY3Muc2xvcGU7XHJcbiAgY29uc3Qgc3NlSW50ZXJjZXB0ID0gc3NyQ2FsY3MuaW50ZXJjZXB0O1xyXG4gIGNvbnN0IHNzZVZhbHVlID0gc3NyQ2FsY3Muc3NyO1xyXG4gIFxyXG4gIC8vIFNBRSBsaW5lIChmcm9tIHNhckNhbGNzKVxyXG4gIGNvbnN0IHNhZVNsb3BlID0gc2FyQ2FsY3Muc2xvcGU7XHJcbiAgY29uc3Qgc2FlSW50ZXJjZXB0ID0gc2FyQ2FsY3MuaW50ZXJjZXB0O1xyXG4gIGNvbnN0IHNhZVZhbHVlID0gc2FyQ2FsY3Muc2FyO1xyXG4gIFxyXG4gIC8vIFR3byBleGFtcGxlIFNSRSBsaW5lc1xyXG4gIGNvbnN0IHNyZVNsb3BlcyA9IFswLjQsIDAuOV07XHJcbiAgY29uc3Qgc3JlTGluZXMgPSBzcmVTbG9wZXMubWFwKHNsb3BlID0+ICh7XHJcbiAgICBzbG9wZTogc2xvcGUsXHJcbiAgICBpbnRlcmNlcHQ6IG1lYW5TYWxlcyAtIHNsb3BlICogbWVhblRlbXBcclxuICB9KSk7XHJcbiAgXHJcbiAgcmV0dXJuIGh0bWxgXHJcbiAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlO1wiPlxyXG4gICAgICAke1Bsb3QucGxvdCh7XHJcbiAgICAgICAgbWFya3M6IFtcclxuICAgICAgICAgIC8vIERhdGEgcG9pbnRzXHJcbiAgICAgICAgICBQbG90LmRvdChsZW1vbmFkZURhdGEsIHt4OiBcInRlbXBlcmF0dXJlXCIsIHk6IFwic2FsZXNcIiwgZmlsbDogXCIjZTY3ZTIyXCIsIHI6IDR9KSxcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQ2VudHJvaWQgcG9pbnRcclxuICAgICAgICAgIFBsb3QuZG90KFxyXG4gICAgICAgICAgICBbe3RlbXBlcmF0dXJlOiBtZWFuVGVtcCwgc2FsZXM6IG1lYW5TYWxlc31dLFxyXG4gICAgICAgICAgICB7eDogXCJ0ZW1wZXJhdHVyZVwiLCB5OiBcInNhbGVzXCIsIGZpbGw6IFwiI2U3NGMzY1wiLCByOiA4LCBzdHJva2U6IFwiI2MwMzkyYlwiLCBzdHJva2VXaWR0aDogMn1cclxuICAgICAgICAgICksXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFNTRSBsaW5lIChibHVlIHNvbGlkKVxyXG4gICAgICAgICAgUGxvdC5saW5lKFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAge3RlbXBlcmF0dXJlOiBtaW5UZW1wLCBzYWxlczogc3NlSW50ZXJjZXB0ICsgc3NlU2xvcGUgKiBtaW5UZW1wfSxcclxuICAgICAgICAgICAgICB7dGVtcGVyYXR1cmU6IG1heFRlbXAsIHNhbGVzOiBzc2VJbnRlcmNlcHQgKyBzc2VTbG9wZSAqIG1heFRlbXB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIHt4OiBcInRlbXBlcmF0dXJlXCIsIHk6IFwic2FsZXNcIiwgc3Ryb2tlOiBcIiMzNDk4ZGJcIiwgc3Ryb2tlV2lkdGg6IDN9XHJcbiAgICAgICAgICApLFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBTQUUgbGluZSAoZ3JlZW4gc29saWQpXHJcbiAgICAgICAgICBQbG90LmxpbmUoXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICB7dGVtcGVyYXR1cmU6IG1pblRlbXAsIHNhbGVzOiBzYWVJbnRlcmNlcHQgKyBzYWVTbG9wZSAqIG1pblRlbXB9LFxyXG4gICAgICAgICAgICAgIHt0ZW1wZXJhdHVyZTogbWF4VGVtcCwgc2FsZXM6IHNhZUludGVyY2VwdCArIHNhZVNsb3BlICogbWF4VGVtcH1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAge3g6IFwidGVtcGVyYXR1cmVcIiwgeTogXCJzYWxlc1wiLCBzdHJva2U6IFwiIzJlY2M3MVwiLCBzdHJva2VXaWR0aDogM31cclxuICAgICAgICAgICksXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFNSRSBleGFtcGxlIGxpbmVzIChncmF5IGRhc2hlZClcclxuICAgICAgICAgIC4uLnNyZUxpbmVzLm1hcCgobGluZSwgaSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUGxvdC5saW5lKFxyXG4gICAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgIHt0ZW1wZXJhdHVyZTogbWluVGVtcCwgc2FsZXM6IGxpbmUuaW50ZXJjZXB0ICsgbGluZS5zbG9wZSAqIG1pblRlbXB9LFxyXG4gICAgICAgICAgICAgICAge3RlbXBlcmF0dXJlOiBtYXhUZW1wLCBzYWxlczogbGluZS5pbnRlcmNlcHQgKyBsaW5lLnNsb3BlICogbWF4VGVtcH1cclxuICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHg6IFwidGVtcGVyYXR1cmVcIiwgXHJcbiAgICAgICAgICAgICAgICB5OiBcInNhbGVzXCIsIFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlOiBcIiM5NWE1YTZcIiwgXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMixcclxuICAgICAgICAgICAgICAgIHN0cm9rZURhc2hhcnJheTogXCI1LDVcIixcclxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBDZW50cm9pZCBsYWJlbFxyXG4gICAgICAgICAgUGxvdC50ZXh0KFxyXG4gICAgICAgICAgICBbe3RlbXBlcmF0dXJlOiBtZWFuVGVtcCwgc2FsZXM6IG1lYW5TYWxlcywgdGV4dDogYCh4zIQsIMizKWB9XSxcclxuICAgICAgICAgICAge3g6IFwidGVtcGVyYXR1cmVcIiwgeTogXCJzYWxlc1wiLCB0ZXh0OiBcInRleHRcIiwgZm9udFNpemU6IDEzLCBmb250V2VpZ2h0OiBcImJvbGRcIiwgZmlsbDogXCIjZTc0YzNjXCIsIGR5OiAtMTV9XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgXSxcclxuICAgICAgICB4OiB7bGFiZWw6IFwiVGVtcGVyYXR1cmUgKMKwRilcIn0sXHJcbiAgICAgICAgeToge2xhYmVsOiBcIlNhbGVzXCJ9LFxyXG4gICAgICAgIHdpZHRoOiA3MDAsXHJcbiAgICAgICAgaGVpZ2h0OiA0NTAsXHJcbiAgICAgICAgZ3JpZDogdHJ1ZVxyXG4gICAgICB9KX1cclxuICAgICAgXHJcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGJvdHRvbTogNDBweDsgcmlnaHQ6IDIwcHg7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiA1cHg7IGZvbnQtc2l6ZTogMTJweDsgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcIj5cclxuICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDhweDsgZm9udC1zaXplOiAxM3B4O1wiPkxlZ2VuZDwvZGl2PlxyXG4gICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiA1cHg7XCI+XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwid2lkdGg6IDMwcHg7IGhlaWdodDogM3B4OyBiYWNrZ3JvdW5kOiAjMzQ5OGRiOyBtYXJnaW4tcmlnaHQ6IDhweDtcIj48L2Rpdj5cclxuICAgICAgICAgIDxzcGFuPjxzdHJvbmc+U1NFOjwvc3Ryb25nPiB5ID0gJHtzc2VJbnRlcmNlcHQudG9GaXhlZCgyKX0gKyAke3NzZVNsb3BlLnRvRml4ZWQoMyl9eCAoU1NFID0gJHtzc2VWYWx1ZS50b0ZpeGVkKDEpfSk8L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDVweDtcIj5cclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJ3aWR0aDogMzBweDsgaGVpZ2h0OiAzcHg7IGJhY2tncm91bmQ6ICMyZWNjNzE7IG1hcmdpbi1yaWdodDogOHB4O1wiPjwvZGl2PlxyXG4gICAgICAgICAgPHNwYW4+PHN0cm9uZz5TQUU6PC9zdHJvbmc+IHkgPSAke3NhZUludGVyY2VwdC50b0ZpeGVkKDIpfSArICR7c2FlU2xvcGUudG9GaXhlZCgzKX14IChTQUUgPSAke3NhZVZhbHVlLnRvRml4ZWQoMSl9KTwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogNXB4O1wiPlxyXG4gICAgICAgICAgPGRpdiBzdHlsZT1cIndpZHRoOiAzMHB4OyBoZWlnaHQ6IDJweDsgYmFja2dyb3VuZDogIzk1YTVhNjsgYm9yZGVyLXRvcDogMnB4IGRhc2hlZCAjOTVhNWE2OyBtYXJnaW4tcmlnaHQ6IDhweDtcIj48L2Rpdj5cclxuICAgICAgICAgIDxzcGFuPjxzdHJvbmc+U1JFOjwvc3Ryb25nPiB5ID0gJHtzcmVMaW5lc1swXS5pbnRlcmNlcHQudG9GaXhlZCgyKX0gKyAke3NyZUxpbmVzWzBdLnNsb3BlLnRvRml4ZWQoMil9eCAoU1JFIOKJiCAwKTwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjtcIj5cclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJ3aWR0aDogMzBweDsgaGVpZ2h0OiAycHg7IGJhY2tncm91bmQ6ICM5NWE1YTY7IGJvcmRlci10b3A6IDJweCBkYXNoZWQgIzk1YTVhNjsgbWFyZ2luLXJpZ2h0OiA4cHg7XCI+PC9kaXY+XHJcbiAgICAgICAgICA8c3Bhbj48c3Ryb25nPlNSRTo8L3N0cm9uZz4geSA9ICR7c3JlTGluZXNbMV0uaW50ZXJjZXB0LnRvRml4ZWQoMil9ICsgJHtzcmVMaW5lc1sxXS5zbG9wZS50b0ZpeGVkKDIpfXggKFNSRSDiiYggMCk8L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6IDhweDsgZm9udC1zdHlsZTogaXRhbGljOyBjb2xvcjogIzY2NjsgZm9udC1zaXplOiAxMXB4O1wiPlxyXG4gICAgICAgICAgQWxsIFNSRSBsaW5lcyBwYXNzIHRocm91Z2ggKHjMhCwgyLMpXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgYDtcclxufVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTI0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaHRtbGBcclxuPGRpdiBjbGFzcz1cImZyYWdtZW50XCI+XHJcbjxwPjxzdHJvbmc+UXVlc3Rpb246PC9zdHJvbmc+IFdoYXQgaGFwcGVucyB3aGVuIHdlIGFkZCBtb3JlIHByZWRpY3RvcnMgdG8gb3VyIG1vZGVsPyDwn6SUPC9wPlxyXG48L2Rpdj5cclxuXHJcbjxkaXYgY2xhc3M9XCJmcmFnbWVudFwiPlxyXG48cD48c3Ryb25nPklzc3VlOjwvc3Ryb25nPiBBZGRpbmcgQU5ZIHZhcmlhYmxlIChldmVuIHJhbmRvbSBub2lzZSkgd2lsbCA8c3Ryb25nPm5ldmVyIGRlY3JlYXNlPC9zdHJvbmc+IFLCsiE8L3A+XHJcbjx1bD5cclxuPGxpPk1vcmUgcHJlZGljdG9ycyDihpIgTW9kZWwgYmVjb21lcyBtb3JlIGZsZXhpYmxlIOKGkiBMb3dlciBTU0Ug4oaSIEhpZ2hlciBSwrI8L2xpPlxyXG48bGk+VGhpcyBjYW4gbGVhZCB0byA8c3Ryb25nPm92ZXJmaXR0aW5nPC9zdHJvbmc+IGFuZCBzcHVyaW91cyByZWxhdGlvbnNoaXBzPC9saT5cclxuPGxpPkV4YW1wbGU6IEFkZGluZyB6b2RpYWMgc2lnbiwgbHVja3kgbnVtYmVyLCBvciByYW5kb20gbm9pc2Ugd2lsbCBpbmNyZWFzZSBSwrIhPC9saT5cclxuPC91bD5cclxuPC9kaXY+XHJcbmBcclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Imh0bWxgXHJcbjxkaXYgY2xhc3M9XCJmcmFnbWVudFwiPlxyXG48cD5BZGp1c3RlZCBSwrIgPHN0cm9uZz5wZW5hbGl6ZXM8L3N0cm9uZz4gYWRkaW5nIHdlYWsgcHJlZGljdG9ycyB0aHJvdWdoIHRoZSA8c3Ryb25nPmRlZ3JlZXMgb2YgZnJlZWRvbSBhZGp1c3RtZW50PC9zdHJvbmc+PC9wPlxyXG48L2Rpdj5cclxuYFxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTI2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaHRtbGBcclxuPHRhYmxlIHN0eWxlPVwid2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbjogMjBweCAwO1wiPlxyXG48dHIgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZWNmMGYxOyBmb250LXdlaWdodDogYm9sZDtcIj5cclxuPHRkIHN0eWxlPVwicGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2JkYzNjNztcIj48L3RkPlxyXG48dGQgc3R5bGU9XCJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjYmRjM2M3O1wiPlLCsjwvdGQ+XHJcbjx0ZCBzdHlsZT1cInBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7XCI+QWRqdXN0ZWQgUsKyPC90ZD5cclxuPC90cj5cclxuPHRyPlxyXG48dGQgc3R5bGU9XCJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjYmRjM2M3O1wiPjxzdHJvbmc+Rm9ybXVsYTwvc3Ryb25nPjwvdGQ+XHJcbjx0ZCBzdHlsZT1cInBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7XCI+MSAtIFNTRS9TU1Q8L3RkPlxyXG48dGQgc3R5bGU9XCJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjYmRjM2M3O1wiPjEgLSBbU1NFLyhuLXAtMSldIC8gW1NTVC8obi0xKV08L3RkPlxyXG48L3RyPlxyXG48dHI+XHJcbjx0ZCBzdHlsZT1cInBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7XCI+PHN0cm9uZz5BZGRpbmcgdmFyaWFibGVzPC9zdHJvbmc+PC90ZD5cclxuPHRkIHN0eWxlPVwicGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2JkYzNjNzsgYmFja2dyb3VuZDogI2Y4ZDdkYTtcIj5BbHdheXMgaW5jcmVhc2VzIOKaoO+4jzwvdGQ+XHJcbjx0ZCBzdHlsZT1cInBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7IGJhY2tncm91bmQ6ICNkNGVkZGE7XCI+Q2FuIGRlY3JlYXNlIGlmIHZhcmlhYmxlIGlzIHdlYWsg4pyTPC90ZD5cclxuPC90cj5cclxuPHRyPlxyXG48dGQgc3R5bGU9XCJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjYmRjM2M3O1wiPjxzdHJvbmc+UGVuYWxpemVzIGNvbXBsZXhpdHk8L3N0cm9uZz48L3RkPlxyXG48dGQgc3R5bGU9XCJwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjYmRjM2M3OyBiYWNrZ3JvdW5kOiAjZjhkN2RhO1wiPk5vIOKaoO+4jzwvdGQ+XHJcbjx0ZCBzdHlsZT1cInBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7IGJhY2tncm91bmQ6ICNkNGVkZGE7XCI+WWVzICh2aWEgZGVncmVlcyBvZiBmcmVlZG9tKSDinJM8L3RkPlxyXG48L3RyPlxyXG48dHI+XHJcbjx0ZCBzdHlsZT1cInBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7XCI+PHN0cm9uZz5Vc2UgZm9yIG1vZGVsIHNlbGVjdGlvbjwvc3Ryb25nPjwvdGQ+XHJcbjx0ZCBzdHlsZT1cInBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7IGJhY2tncm91bmQ6ICNmOGQ3ZGE7XCI+UG9vciBjaG9pY2Ug4pqg77iPPC90ZD5cclxuPHRkIHN0eWxlPVwicGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2JkYzNjNzsgYmFja2dyb3VuZDogI2Q0ZWRkYTtcIj5CZXR0ZXIgY2hvaWNlIOKckzwvdGQ+XHJcbjwvdHI+XHJcbjwvdGFibGU+XHJcblxyXG48ZGl2IGNsYXNzPVwiZnJhZ21lbnRcIiBzdHlsZT1cImJhY2tncm91bmQ6ICNmZmYzY2Q7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLXRvcDogMjBweDtcIj5cclxuPHA+PHN0cm9uZz5LZXkgVGFrZWF3YXk6PC9zdHJvbmc+IFVzZSA8c3Ryb25nPkFkanVzdGVkIFLCsjwvc3Ryb25nPiB3aGVuIGNvbXBhcmluZyBtb2RlbHMgd2l0aCBkaWZmZXJlbnQgbnVtYmVycyBvZiBwcmVkaWN0b3JzITwvcD5cclxuPC9kaXY+XHJcbmBcclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Imh0bWxgXHJcbjxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZThmNGY4OyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbjogMTVweCAwO1wiPlxyXG48cCBzdHlsZT1cImZvbnQtc2l6ZTogMTVweDsgbWFyZ2luOiA1cHggMDtcIj5cclxuPHN0cm9uZz5EZWdyZWVzIG9mIEZyZWVkb20gKGRmKTwvc3Ryb25nPiByZXByZXNlbnQgdGhlIG51bWJlciBvZiBpbmRlcGVuZGVudCBwaWVjZXMgb2YgaW5mb3JtYXRpb24gYXZhaWxhYmxlIHRvIGVzdGltYXRlIGEgcGFyYW1ldGVyIG9yIG1lYXN1cmUgdmFyaWFiaWxpdHkuXHJcbjwvcD5cclxuPHAgc3R5bGU9XCJmb250LXNpemU6IDE1cHg7IG1hcmdpbjogNXB4IDA7XCI+XHJcbjxzdHJvbmc+SW50dWl0aW9uOjwvc3Ryb25nPiBkZiA9IChudW1iZXIgb2Ygb2JzZXJ2YXRpb25zKSAtIChudW1iZXIgb2YgcGFyYW1ldGVycyBlc3RpbWF0ZWQpXHJcbjwvcD5cclxuPHAgc3R5bGU9XCJmb250LXNpemU6IDE0cHg7IG1hcmdpbjogNXB4IDA7IGNvbG9yOiAjN2Y4YzhkO1wiPlxyXG5UaGluayBvZiBpdCBhczogXCJIb3cgbWFueSBkYXRhIHBvaW50cyBhcmUgZnJlZSB0byB2YXJ5IGFmdGVyIHdlJ3ZlIHVzZWQgc29tZSB0byBlc3RpbWF0ZSBvdXIgbW9kZWwgcGFyYW1ldGVycz9cIlxyXG48L3A+XHJcbjwvZGl2PlxyXG5gXHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJodG1sYFxyXG48ZGl2IGNsYXNzPVwiZnJhZ21lbnRcIj5cclxuPHA+PHN0cm9uZz5DYXNlIDE6IFNpbXBsZSBSZWdyZXNzaW9uIChwID0gMSk8L3N0cm9uZz48L3A+XHJcbjxwPkFkanVzdG1lbnQgZmFjdG9yOiA8c3Ryb25nPm4gLSAxIC0gMSA9IG4gLSAyPC9zdHJvbmc+PC9wPlxyXG48L2Rpdj5cclxuYFxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTI5IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xyXG4gIHJldHVybiBodG1sYFxyXG48ZGl2IGNsYXNzPVwiZnJhZ21lbnRcIj5cclxuPHA+PHN0cm9uZz5XaHkgbiAtIDI/PC9zdHJvbmc+IEFueSAyIHBvaW50cyBwZXJmZWN0bHkgZGV0ZXJtaW5lIGEgbGluZSE8L3A+XHJcbjxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBnYXA6IDIwcHg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7XCI+XHJcbjxkaXYgc3R5bGU9XCJmbGV4OiAxO1wiPlxyXG4ke1Bsb3QucGxvdCh7XHJcbiAgbWFya3M6IFtcclxuICAgIFBsb3QuZG90KFt7eDogMiwgeTogM30sIHt4OiA1LCB5OiA3fV0sIHt4OiBcInhcIiwgeTogXCJ5XCIsIGZpbGw6IFwiI2U3NGMzY1wiLCByOiA4fSksXHJcbiAgICBQbG90LmxpbmUoW3t4OiAwLCB5OiAwLjZ9LCB7eDogNywgeTogOS40fV0sIHt4OiBcInhcIiwgeTogXCJ5XCIsIHN0cm9rZTogXCIjMzQ5OGRiXCIsIHN0cm9rZVdpZHRoOiAzfSksXHJcbiAgICBQbG90LnRleHQoW3t4OiAzLjUsIHk6IDgsIHRleHQ6IFwiUGVyZmVjdCBmaXQgd2l0aCAyIHBvaW50cyFcIn1dLCBcclxuICAgICAge3g6IFwieFwiLCB5OiBcInlcIiwgdGV4dDogXCJ0ZXh0XCIsIGZvbnRTaXplOiAxNCwgZmlsbDogXCIjZTc0YzNjXCIsIGZvbnRXZWlnaHQ6IFwiYm9sZFwifSlcclxuICBdLFxyXG4gIHg6IHtsYWJlbDogXCJ4XCIsIGRvbWFpbjogWzAsIDddfSxcclxuICB5OiB7bGFiZWw6IFwieVwiLCBkb21haW46IFswLCAxMF19LFxyXG4gIHdpZHRoOiAzMDAsXHJcbiAgaGVpZ2h0OiAyNTAsXHJcbiAgZ3JpZDogdHJ1ZVxyXG59KX1cclxuPC9kaXY+XHJcbjxkaXYgc3R5bGU9XCJmbGV4OiAxO1wiPlxyXG48cCBzdHlsZT1cImZvbnQtc2l6ZTogMTRweDtcIj5cclxuLSBXaXRoIDxzdHJvbmc+MiBkYXRhIHBvaW50czwvc3Ryb25nPiwgd2UgZXN0aW1hdGUgMiBwYXJhbWV0ZXJzICjOsuKCgCwgzrLigoEpPGJyPlxyXG4tIFRoZSBsaW5lIHBhc3NlcyB0aHJvdWdoIGJvdGggcG9pbnRzIGV4YWN0bHk8YnI+XHJcbi0gPHN0cm9uZz5ObyBkZWdyZWVzIG9mIGZyZWVkb20gbGVmdCE8L3N0cm9uZz4gKDIgLSAyID0gMCk8YnI+XHJcbi0gTmVlZCBhdCBsZWFzdCBuID0gMyBmb3IgbWVhbmluZ2Z1bCBpbmZlcmVuY2U8YnI+XHJcbi0gVGh1czogZGYgPSA8c3Ryb25nPm4gLSAyPC9zdHJvbmc+XHJcbjwvcD5cclxuPC9kaXY+XHJcbjwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxufVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTMwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaHRtbGBcclxuPGRpdiBjbGFzcz1cImZyYWdtZW50XCI+XHJcbjxwPjxzdHJvbmc+Q2FzZSAyOiBNdWx0aXBsZSBSZWdyZXNzaW9uIHdpdGggMiBwcmVkaWN0b3JzIChwID0gMik8L3N0cm9uZz48L3A+XHJcbjxwPkFkanVzdG1lbnQgZmFjdG9yOiA8c3Ryb25nPm4gLSAyIC0gMSA9IG4gLSAzPC9zdHJvbmc+PC9wPlxyXG48L2Rpdj5cclxuYFxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTMxIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xyXG4gIHJldHVybiBodG1sYFxyXG48ZGl2IGNsYXNzPVwiZnJhZ21lbnRcIj5cclxuPHA+PHN0cm9uZz5XaHkgbiAtIDM/PC9zdHJvbmc+IEFueSAzIHBvaW50cyBwZXJmZWN0bHkgZGV0ZXJtaW5lIGEgcGxhbmUhPC9wPlxyXG48ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgZ2FwOiAyMHB4OyBhbGlnbi1pdGVtczogY2VudGVyO1wiPlxyXG48ZGl2IHN0eWxlPVwiZmxleDogMTtcIj5cclxuPGRpdiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTsgd2lkdGg6IDMwMHB4OyBoZWlnaHQ6IDI1MHB4OyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBib3JkZXI6IDJweCBzb2xpZCAjMzQ5OGRiOyBib3JkZXItcmFkaXVzOiA4cHg7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyO1wiPlxyXG48c3ZnIHdpZHRoPVwiMjgwXCIgaGVpZ2h0PVwiMjMwXCIgdmlld0JveD1cIjAgMCAyODAgMjMwXCI+XHJcbjwhLS0gM0QgcGxhbmUgcmVwcmVzZW50YXRpb24gLS0+XHJcbjxwb2x5Z29uIHBvaW50cz1cIjUwLDE4MCAyMzAsMTgwIDIxMCw4MCA3MCw4MFwiIGZpbGw9XCIjMzQ5OGRiXCIgb3BhY2l0eT1cIjAuM1wiIHN0cm9rZT1cIiMzNDk4ZGJcIiBzdHJva2Utd2lkdGg9XCIyXCIvPlxyXG48IS0tIDMgcG9pbnRzIG9uIHRoZSBwbGFuZSAtLT5cclxuPGNpcmNsZSBjeD1cIjgwXCIgY3k9XCIxNjBcIiByPVwiNlwiIGZpbGw9XCIjZTc0YzNjXCIvPlxyXG48Y2lyY2xlIGN4PVwiMTgwXCIgY3k9XCIxNDBcIiByPVwiNlwiIGZpbGw9XCIjZTc0YzNjXCIvPlxyXG48Y2lyY2xlIGN4PVwiMTQwXCIgY3k9XCIxMDBcIiByPVwiNlwiIGZpbGw9XCIjZTc0YzNjXCIvPlxyXG48IS0tIExhYmVscyAtLT5cclxuPHRleHQgeD1cIjgwXCIgeT1cIjE4MFwiIGZvbnQtc2l6ZT1cIjEyXCIgZmlsbD1cIiNlNzRjM2NcIiBmb250LXdlaWdodD1cImJvbGRcIj4oeOKCgSwgeOKCgiwgeSnigoE8L3RleHQ+XHJcbjx0ZXh0IHg9XCIxODBcIiB5PVwiMTYwXCIgZm9udC1zaXplPVwiMTJcIiBmaWxsPVwiI2U3NGMzY1wiIGZvbnQtd2VpZ2h0PVwiYm9sZFwiPih44oKBLCB44oKCLCB5KeKCgjwvdGV4dD5cclxuPHRleHQgeD1cIjE0MFwiIHk9XCI5MFwiIGZvbnQtc2l6ZT1cIjEyXCIgZmlsbD1cIiNlNzRjM2NcIiBmb250LXdlaWdodD1cImJvbGRcIj4oeOKCgSwgeOKCgiwgeSnigoM8L3RleHQ+XHJcbjx0ZXh0IHg9XCIxMjBcIiB5PVwiMjAwXCIgZm9udC1zaXplPVwiMTRcIiBmaWxsPVwiIzM0OThkYlwiIGZvbnQtd2VpZ2h0PVwiYm9sZFwiPkZpdHRlZCBQbGFuZTwvdGV4dD5cclxuPCEtLSBBeGVzIC0tPlxyXG48bGluZSB4MT1cIjIwXCIgeTE9XCIyMDBcIiB4Mj1cIjEyMFwiIHkyPVwiMjAwXCIgc3Ryb2tlPVwiIzdmOGM4ZFwiIHN0cm9rZS13aWR0aD1cIjJcIiBtYXJrZXItZW5kPVwidXJsKCNhcnJvd2hlYWQpXCIvPlxyXG48dGV4dCB4PVwiMTI1XCIgeT1cIjIwNVwiIGZvbnQtc2l6ZT1cIjExXCIgZmlsbD1cIiM3ZjhjOGRcIj544oKBPC90ZXh0PlxyXG48bGluZSB4MT1cIjIwXCIgeTE9XCIyMDBcIiB4Mj1cIjIwXCIgeTI9XCIxMDBcIiBzdHJva2U9XCIjN2Y4YzhkXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIG1hcmtlci1lbmQ9XCJ1cmwoI2Fycm93aGVhZClcIi8+XHJcbjx0ZXh0IHg9XCI1XCIgeT1cIjk1XCIgZm9udC1zaXplPVwiMTFcIiBmaWxsPVwiIzdmOGM4ZFwiPnk8L3RleHQ+XHJcbjxsaW5lIHgxPVwiMjBcIiB5MT1cIjIwMFwiIHgyPVwiNjBcIiB5Mj1cIjIyMFwiIHN0cm9rZT1cIiM3ZjhjOGRcIiBzdHJva2Utd2lkdGg9XCIyXCIgbWFya2VyLWVuZD1cInVybCgjYXJyb3doZWFkKVwiLz5cclxuPHRleHQgeD1cIjY1XCIgeT1cIjIyNVwiIGZvbnQtc2l6ZT1cIjExXCIgZmlsbD1cIiM3ZjhjOGRcIj544oKCPC90ZXh0PlxyXG48ZGVmcz5cclxuPG1hcmtlciBpZD1cImFycm93aGVhZFwiIG1hcmtlcldpZHRoPVwiMTBcIiBtYXJrZXJIZWlnaHQ9XCIxMFwiIHJlZlg9XCI5XCIgcmVmWT1cIjNcIiBvcmllbnQ9XCJhdXRvXCI+XHJcbjxwb2x5Z29uIHBvaW50cz1cIjAgMCwgMTAgMywgMCA2XCIgZmlsbD1cIiM3ZjhjOGRcIi8+XHJcbjwvbWFya2VyPlxyXG48L2RlZnM+XHJcbjwvc3ZnPlxyXG48L2Rpdj5cclxuPC9kaXY+XHJcbjxkaXYgc3R5bGU9XCJmbGV4OiAxO1wiPlxyXG48cCBzdHlsZT1cImZvbnQtc2l6ZTogMTRweDtcIj5cclxuLSBXaXRoIDxzdHJvbmc+MyBkYXRhIHBvaW50czwvc3Ryb25nPiwgd2UgZXN0aW1hdGUgMyBwYXJhbWV0ZXJzICjOsuKCgCwgzrLigoEsIM6y4oKCKTxicj5cclxuLSBUaGUgcGxhbmUgcGFzc2VzIHRocm91Z2ggYWxsIDMgcG9pbnRzIGV4YWN0bHk8YnI+XHJcbi0gPHN0cm9uZz5ObyBkZWdyZWVzIG9mIGZyZWVkb20gbGVmdCE8L3N0cm9uZz4gKDMgLSAzID0gMCk8YnI+XHJcbi0gTmVlZCBhdCBsZWFzdCBuID0gNCBmb3IgbWVhbmluZ2Z1bCBpbmZlcmVuY2U8YnI+XHJcbi0gVGh1czogZGYgPSA8c3Ryb25nPm4gLSAzPC9zdHJvbmc+XHJcbjwvcD5cclxuPC9kaXY+XHJcbjwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxufVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTMyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaHRtbGBcclxuPGRpdiBjbGFzcz1cImZyYWdtZW50XCI+XHJcbjxwPjxzdHJvbmc+R2VuZXJhbCBQYXR0ZXJuOiBGb3IgcCBwcmVkaWN0b3JzPC9zdHJvbmc+PC9wPlxyXG48ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogI2U4ZjRmODsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW46IDE1cHggMDtcIj5cclxuPHAgc3R5bGU9XCJmb250LXNpemU6IDE2cHg7IG1hcmdpbjogMTBweCAwO1wiPlxyXG4tIFdlIGVzdGltYXRlIDxzdHJvbmc+cCArIDEgcGFyYW1ldGVyczwvc3Ryb25nPjogzrLigoAsIM6y4oKBLCDOsuKCgiwgLi4uLCDOsuKCmjxicj5cclxuLSBOZWVkIGF0IGxlYXN0IDxzdHJvbmc+biA9IHAgKyAxPC9zdHJvbmc+IHBvaW50cyB0byBmaXQgdGhlIG1vZGVsPGJyPlxyXG4tIERlZ3JlZXMgb2YgZnJlZWRvbTogPHN0cm9uZz5kZiA9IG4gLSAocCArIDEpID0gbiAtIHAgLSAxPC9zdHJvbmc+PGJyPlxyXG4tIFRoaXMgcmVwcmVzZW50cyB0aGUgbnVtYmVyIG9mIG9ic2VydmF0aW9ucyBcImZyZWUgdG8gdmFyeVwiIGFmdGVyIGVzdGltYXRpbmcgYWxsIHBhcmFtZXRlcnNcclxuPC9wPlxyXG48L2Rpdj5cclxuPC9kaXY+XHJcblxyXG48ZGl2IGNsYXNzPVwiZnJhZ21lbnRcIj5cclxuPHA+PHN0cm9uZz7wn5KhIEtleSBJbnNpZ2h0Ojwvc3Ryb25nPjwvcD5cclxuPHAgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZDRlZGRhOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7XCI+XHJcbkFkanVzdGVkIFLCsiB1c2VzIDxzdHJvbmc+KG4gLSBwIC0gMSk8L3N0cm9uZz4gdG8gcGVuYWxpemUgbW9kZWxzIHdpdGggbW9yZSBwcmVkaWN0b3JzLiBBcyBwIGluY3JlYXNlcywgZGYgZGVjcmVhc2VzLCBtYWtpbmcgdGhlIHBlbmFsdHkgbGFyZ2VyLiBUaGlzIHByZXZlbnRzIG92ZXJmaXR0aW5nIVxyXG48L3A+XHJcbjwvZGl2PlxyXG5gXHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMzMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ2aWV3b2YgaW50ZXJjZXB0UGxheSA9IElucHV0cy5yYW5nZShbLTUwLDEwMF0sIHt2YWx1ZTo0MCwgc3RlcDoxLCBsYWJlbDpcIkludGVyY2VwdCAozrLigoApXCJ9KVxyXG52aWV3b2Ygc2xvcGVQbGF5ID0gSW5wdXRzLnJhbmdlKFswLDNdLCB7dmFsdWU6MC43LCBzdGVwOjAuMDEsIGxhYmVsOlwiU2xvcGUgKM6y4oKBKVwifSlcclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zNCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IntcclxuICAvLyBVc2UgZXhpc3RpbmcgbGVtb25hZGVEYXRhXHJcbiAgY29uc3QgbiA9IGxlbW9uYWRlRGF0YS5sZW5ndGg7XHJcbiAgY29uc3QgdGVtcCA9IGxlbW9uYWRlRGF0YS5tYXAoZCA9PiBkLnRlbXBlcmF0dXJlKTtcclxuICBjb25zdCBzYWxlcyA9IGxlbW9uYWRlRGF0YS5tYXAoZCA9PiBkLnNhbGVzKTtcclxuICBcclxuICAvLyBDYWxjdWxhdGUgZml0dGVkIHZhbHVlcyB1c2luZyBzbGlkZXIgcGFyYW1ldGVyc1xyXG4gIGNvbnN0IGZpdFkgPSB0ZW1wLm1hcCh0ID0+IGludGVyY2VwdFBsYXkgKyBzbG9wZVBsYXkgKiB0KTtcclxuICBcclxuICAvLyBDYWxjdWxhdGUgT0xTIGVzdGltYXRlcyAob3B0aW1hbClcclxuICBjb25zdCB4YmFyID0gdGVtcC5yZWR1Y2UoKGEsYikgPT4gYStiLCAwKSAvIG47XHJcbiAgY29uc3QgeWJhciA9IHNhbGVzLnJlZHVjZSgoYSxiKSA9PiBhK2IsIDApIC8gbjtcclxuICBcclxuICBsZXQgbnVtID0gMCwgZGVuID0gMDtcclxuICBmb3IobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7IFxyXG4gICAgbnVtICs9ICh0ZW1wW2ldIC0geGJhcikgKiAoc2FsZXNbaV0gLSB5YmFyKTsgXHJcbiAgICBkZW4gKz0gKHRlbXBbaV0gLSB4YmFyKSAqICh0ZW1wW2ldIC0geGJhcik7XHJcbiAgfVxyXG4gIFxyXG4gIGNvbnN0IGIxX29wdGltYWwgPSBudW0gLyBkZW47XHJcbiAgY29uc3QgYjBfb3B0aW1hbCA9IHliYXIgLSBiMV9vcHRpbWFsICogeGJhcjtcclxuICBjb25zdCBmaXRZX29wdGltYWwgPSB0ZW1wLm1hcCh0ID0+IGIwX29wdGltYWwgKyBiMV9vcHRpbWFsICogdCk7XHJcbiAgXHJcbiAgLy8gQ29tcHV0ZSBTU0UsIFNTVCwgUsKyIGZvciB1c2VyJ3MgbGluZVxyXG4gIGNvbnN0IFNTRSA9IHNhbGVzLnJlZHVjZSgoYWNjLCB5aSwgaSkgPT4gYWNjICsgTWF0aC5wb3coeWkgLSBmaXRZW2ldLCAyKSwgMCk7XHJcbiAgY29uc3QgU1NUID0gc2FsZXMucmVkdWNlKChhY2MsIHlpKSA9PiBhY2MgKyBNYXRoLnBvdyh5aSAtIHliYXIsIDIpLCAwKTtcclxuICBjb25zdCBSMiA9IDEgLSBTU0UgLyBTU1Q7XHJcbiAgY29uc3QgcCA9IDE7IC8vIHNpbmdsZSBwcmVkaWN0b3JcclxuICBjb25zdCBSMl9hZGogPSAxIC0gKDEgLSBSMikgKiAobiAtIDEpIC8gKG4gLSBwIC0gMSk7XHJcbiAgXHJcbiAgLy8gQ29tcHV0ZSBmb3Igb3B0aW1hbCBsaW5lXHJcbiAgY29uc3QgU1NFX29wdGltYWwgPSBzYWxlcy5yZWR1Y2UoKGFjYywgeWksIGkpID0+IGFjYyArIE1hdGgucG93KHlpIC0gZml0WV9vcHRpbWFsW2ldLCAyKSwgMCk7XHJcbiAgY29uc3QgUjJfb3B0aW1hbCA9IDEgLSBTU0Vfb3B0aW1hbCAvIFNTVDtcclxuICBjb25zdCBSMl9hZGpfb3B0aW1hbCA9IDEgLSAoMSAtIFIyX29wdGltYWwpICogKG4gLSAxKSAvIChuIC0gcCAtIDEpO1xyXG4gIFxyXG4gIC8vIFByZXBhcmUgZGF0YSBmb3IgcGxvdHRpbmdcclxuICBjb25zdCBzY2F0dGVyRGF0YSA9IGxlbW9uYWRlRGF0YS5tYXAoZCA9PiAoe3RlbXA6IGQudGVtcGVyYXR1cmUsIHNhbGVzOiBkLnNhbGVzfSkpO1xyXG4gIGNvbnN0IGxpbmVEYXRhID0gdGVtcC5tYXAoKHQsIGkpID0+ICh7dGVtcDogdCwgc2FsZXM6IGZpdFlbaV19KSk7XHJcbiAgY29uc3QgbGluZURhdGFfb3B0aW1hbCA9IHRlbXAubWFwKCh0LCBpKSA9PiAoe3RlbXA6IHQsIHNhbGVzOiBmaXRZX29wdGltYWxbaV19KSk7XHJcbiAgXHJcbiAgcmV0dXJuIGh0bWxgXHJcbiAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgZ2FwOiAyMHB4OyBtYXJnaW46IDIwcHggMDtcIj5cclxuICAgICAgPGRpdiBzdHlsZT1cImZsZXg6IDI7XCI+XHJcbiAgICAgICAgJHtQbG90LnBsb3Qoe1xyXG4gICAgICAgICAgbWFya3M6IFtcclxuICAgICAgICAgICAgUGxvdC5kb3Qoc2NhdHRlckRhdGEsIHt4OiBcInRlbXBcIiwgeTogXCJzYWxlc1wiLCBmaWxsOiBcIiNlNjdlMjJcIiwgcjogNH0pLFxyXG4gICAgICAgICAgICBQbG90LmxpbmUobGluZURhdGEsIHt4OiBcInRlbXBcIiwgeTogXCJzYWxlc1wiLCBzdHJva2U6IFwiI2U3NGMzY1wiLCBzdHJva2VXaWR0aDogM30pLFxyXG4gICAgICAgICAgICBQbG90LmxpbmUobGluZURhdGFfb3B0aW1hbCwge3g6IFwidGVtcFwiLCB5OiBcInNhbGVzXCIsIHN0cm9rZTogXCIjMjdhZTYwXCIsIHN0cm9rZVdpZHRoOiAzLCBzdHJva2VEYXNoYXJyYXk6IFwiOCw0XCJ9KVxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIHg6IHtsYWJlbDogXCJUZW1wZXJhdHVyZSAowrBGKVwifSxcclxuICAgICAgICAgIHk6IHtsYWJlbDogXCJTYWxlc1wifSxcclxuICAgICAgICAgIHdpZHRoOiA1MDAsXHJcbiAgICAgICAgICBoZWlnaHQ6IDQwMCxcclxuICAgICAgICAgIGdyaWQ6IHRydWVcclxuICAgICAgICB9KX1cclxuICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDogMTBweDsgZm9udC1zaXplOiAxMnB4O1wiPlxyXG4gICAgICAgICAgPHNwYW4gc3R5bGU9XCJjb2xvcjogI2U3NGMzYztcIj7ilIHilIHilIE8L3NwYW4+IFlvdXIgTGluZSAmbmJzcDsmbmJzcDtcclxuICAgICAgICAgIDxzcGFuIHN0eWxlPVwiY29sb3I6ICMyN2FlNjA7XCI+LSAtIC08L3NwYW4+IE9wdGltYWwgT0xTIExpbmVcclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIFxyXG4gICAgICA8ZGl2IHN0eWxlPVwiZmxleDogMTtcIj5cclxuICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogMTVweDsgYmFja2dyb3VuZDogI2ZmZjNjZDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW4tYm90dG9tOiAxNXB4O1wiPlxyXG4gICAgICAgICAgPGg0IHN0eWxlPVwibWFyZ2luLXRvcDogMDsgY29sb3I6ICNlNzRjM2M7XCI+8J+TiiBZb3VyIExpbmU8L2g0PlxyXG4gICAgICAgICAgPHA+PHN0cm9uZz7OsuKCgCA9PC9zdHJvbmc+ICR7aW50ZXJjZXB0UGxheS50b0ZpeGVkKDIpfTwvcD5cclxuICAgICAgICAgIDxwPjxzdHJvbmc+zrLigoEgPTwvc3Ryb25nPiAke3Nsb3BlUGxheS50b0ZpeGVkKDMpfTwvcD5cclxuICAgICAgICAgIDxociBzdHlsZT1cIm1hcmdpbjogMTBweCAwO1wiPlxyXG4gICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDE2cHg7XCI+PHN0cm9uZz5SwrIgPTwvc3Ryb25nPiA8c3BhbiBzdHlsZT1cImNvbG9yOiAjZTc0YzNjOyBmb250LXNpemU6IDE4cHg7XCI+JHtSMi50b0ZpeGVkKDQpfTwvc3Bhbj48L3A+XHJcbiAgICAgICAgICA8cCBzdHlsZT1cImZvbnQtc2l6ZTogMTZweDtcIj48c3Ryb25nPkFkaiBSwrIgPTwvc3Ryb25nPiA8c3BhbiBzdHlsZT1cImNvbG9yOiAjZTc0YzNjOyBmb250LXNpemU6IDE4cHg7XCI+JHtSMl9hZGoudG9GaXhlZCg0KX08L3NwYW4+PC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIFxyXG4gICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAxNXB4OyBiYWNrZ3JvdW5kOiAjZDRlZGRhOyBib3JkZXItcmFkaXVzOiA4cHg7XCI+XHJcbiAgICAgICAgICA8aDQgc3R5bGU9XCJtYXJnaW4tdG9wOiAwOyBjb2xvcjogIzI3YWU2MDtcIj7inKggT3B0aW1hbCBPTFMgTGluZTwvaDQ+XHJcbiAgICAgICAgICA8cD48c3Ryb25nPs6y4oKAID08L3N0cm9uZz4gJHtiMF9vcHRpbWFsLnRvRml4ZWQoMil9PC9wPlxyXG4gICAgICAgICAgPHA+PHN0cm9uZz7OsuKCgSA9PC9zdHJvbmc+ICR7YjFfb3B0aW1hbC50b0ZpeGVkKDMpfTwvcD5cclxuICAgICAgICAgIDxociBzdHlsZT1cIm1hcmdpbjogMTBweCAwO1wiPlxyXG4gICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDE2cHg7XCI+PHN0cm9uZz5SwrIgPTwvc3Ryb25nPiA8c3BhbiBzdHlsZT1cImNvbG9yOiAjMjdhZTYwOyBmb250LXNpemU6IDE4cHg7XCI+JHtSMl9vcHRpbWFsLnRvRml4ZWQoNCl9PC9zcGFuPjwvcD5cclxuICAgICAgICAgIDxwIHN0eWxlPVwiZm9udC1zaXplOiAxNnB4O1wiPjxzdHJvbmc+QWRqIFLCsiA9PC9zdHJvbmc+IDxzcGFuIHN0eWxlPVwiY29sb3I6ICMyN2FlNjA7IGZvbnQtc2l6ZTogMThweDtcIj4ke1IyX2Fkal9vcHRpbWFsLnRvRml4ZWQoNCl9PC9zcGFuPjwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDogMTVweDsgcGFkZGluZzogMTBweDsgYmFja2dyb3VuZDogI2U4ZjRmODsgYm9yZGVyLXJhZGl1czogOHB4O1wiPlxyXG4gICAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDEycHg7IG1hcmdpbjogNXB4IDA7XCI+PHN0cm9uZz5uID08L3N0cm9uZz4gJHtufSBvYnNlcnZhdGlvbnM8L3A+XHJcbiAgICAgICAgICA8cCBzdHlsZT1cImZvbnQtc2l6ZTogMTJweDsgbWFyZ2luOiA1cHggMDtcIj48c3Ryb25nPnAgPTwvc3Ryb25nPiAke3B9IHByZWRpY3RvcjwvcD5cclxuICAgICAgICAgIDxwIHN0eWxlPVwiZm9udC1zaXplOiAxMnB4OyBtYXJnaW46IDVweCAwO1wiPjxzdHJvbmc+ZGYgPTwvc3Ryb25nPiAke24gLSBwIC0gMX0gZGVncmVlcyBvZiBmcmVlZG9tPC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIFxyXG4gICAgICAgIDxwIHN0eWxlPVwiZm9udC1zaXplOiAxMnB4OyBjb2xvcjogIzdmOGM4ZDsgbWFyZ2luLXRvcDogMTVweDtcIj5cclxuICAgICAgICAgIPCfkqEgQWRqdXN0IHNsaWRlcnMgdG8gc2VlIGhvdyBSwrIgYW5kIEFkanVzdGVkIFLCsiBjaGFuZ2UhXHJcbiAgICAgICAgPC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIGA7XHJcbn1cclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBpbnRlcmNlcHRFeHBsb3JlciA9IElucHV0cy5yYW5nZShbLTEwMCwxMDBdLCB7dmFsdWU6NDAsIHN0ZXA6MSwgbGFiZWw6XCJJbnRlcmNlcHQgKM6y4oKAKVwifSlcclxudmlld29mIHNsb3BlRXhwbG9yZXIgPSBJbnB1dHMucmFuZ2UoWy0zLDNdLCB7dmFsdWU6MC43LCBzdGVwOjAuMDEsIGxhYmVsOlwiU2xvcGUgKM6y4oKBKVwifSlcclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zNiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im9wdGltYWxMaW5lID0ge1xyXG4gIGNvbnN0IG4gPSBsZW1vbmFkZURhdGEubGVuZ3RoO1xyXG4gIGNvbnN0IG1lYW5UZW1wID0gbGVtb25hZGVEYXRhLnJlZHVjZSgoc3VtLCBkKSA9PiBzdW0gKyBkLnRlbXBlcmF0dXJlLCAwKSAvIG47XHJcbiAgY29uc3QgbWVhblNhbGVzID0gbGVtb25hZGVEYXRhLnJlZHVjZSgoc3VtLCBkKSA9PiBzdW0gKyBkLnNhbGVzLCAwKSAvIG47XHJcbiAgXHJcbiAgbGV0IG51bWVyYXRvciA9IDA7XHJcbiAgbGV0IGRlbm9taW5hdG9yID0gMDtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgbnVtZXJhdG9yICs9IChsZW1vbmFkZURhdGFbaV0udGVtcGVyYXR1cmUgLSBtZWFuVGVtcCkgKiAobGVtb25hZGVEYXRhW2ldLnNhbGVzIC0gbWVhblNhbGVzKTtcclxuICAgIGRlbm9taW5hdG9yICs9IChsZW1vbmFkZURhdGFbaV0udGVtcGVyYXR1cmUgLSBtZWFuVGVtcCkgKiogMjtcclxuICB9XHJcbiAgXHJcbiAgY29uc3Qgc2xvcGUgPSBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcclxuICBjb25zdCBpbnRlcmNlcHQgPSBtZWFuU2FsZXMgLSBzbG9wZSAqIG1lYW5UZW1wO1xyXG4gIFxyXG4gIHJldHVybiB7IHNsb3BlLCBpbnRlcmNlcHQgfTtcclxufVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTM3IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xyXG4gIGNvbnN0IG1lYW5TYWxlcyA9IGxlbW9uYWRlRGF0YS5yZWR1Y2UoKHN1bSwgZCkgPT4gc3VtICsgZC5zYWxlcywgMCkgLyBsZW1vbmFkZURhdGEubGVuZ3RoO1xyXG4gIGNvbnN0IHNzdCA9IGxlbW9uYWRlRGF0YS5yZWR1Y2UoKHN1bSwgZCkgPT4gc3VtICsgKGQuc2FsZXMgLSBtZWFuU2FsZXMpICoqIDIsIDApO1xyXG4gIFxyXG4gIGxldCBzc2VFeHBsb3JlciA9IDA7XHJcbiAgbGV0IHNzckV4cGxvcmVyID0gMDtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbW9uYWRlRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgcHJlZGljdGVkID0gaW50ZXJjZXB0RXhwbG9yZXIgKyBzbG9wZUV4cGxvcmVyICogbGVtb25hZGVEYXRhW2ldLnRlbXBlcmF0dXJlO1xyXG4gICAgc3NlRXhwbG9yZXIgKz0gKGxlbW9uYWRlRGF0YVtpXS5zYWxlcyAtIHByZWRpY3RlZCkgKiogMjtcclxuICAgIHNzckV4cGxvcmVyICs9IChwcmVkaWN0ZWQgLSBtZWFuU2FsZXMpICoqIDI7XHJcbiAgfVxyXG4gIGNvbnN0IHJTcXVhcmVkRXhwbG9yZXIgPSBzc3JFeHBsb3JlciAvIHNzdDtcclxuICBcclxuICBsZXQgc3NlT3B0aW1hbCA9IDA7XHJcbiAgbGV0IHNzck9wdGltYWwgPSAwO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVtb25hZGVEYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCBwcmVkaWN0ZWQgPSBvcHRpbWFsTGluZS5pbnRlcmNlcHQgKyBvcHRpbWFsTGluZS5zbG9wZSAqIGxlbW9uYWRlRGF0YVtpXS50ZW1wZXJhdHVyZTtcclxuICAgIHNzZU9wdGltYWwgKz0gKGxlbW9uYWRlRGF0YVtpXS5zYWxlcyAtIHByZWRpY3RlZCkgKiogMjtcclxuICAgIHNzck9wdGltYWwgKz0gKHByZWRpY3RlZCAtIG1lYW5TYWxlcykgKiogMjtcclxuICB9XHJcbiAgY29uc3QgclNxdWFyZWRPcHRpbWFsID0gc3NyT3B0aW1hbCAvIHNzdDtcclxuXHJcbiAgY29uc3QgdGVtcHMgPSBsZW1vbmFkZURhdGEubWFwKGQgPT4gZC50ZW1wZXJhdHVyZSk7XHJcbiAgY29uc3QgbWluVGVtcCA9IE1hdGgubWluKC4uLnRlbXBzKTtcclxuICBjb25zdCBtYXhUZW1wID0gTWF0aC5tYXgoLi4udGVtcHMpO1xyXG4gIGNvbnN0IHRleHRYID0gbWF4VGVtcCAtIDU7XHJcbiAgY29uc3QgZXhwbG9yZXJZID0gaW50ZXJjZXB0RXhwbG9yZXIgKyBzbG9wZUV4cGxvcmVyICogdGV4dFg7XHJcbiAgY29uc3Qgb3B0aW1hbFkgPSBvcHRpbWFsTGluZS5pbnRlcmNlcHQgKyBvcHRpbWFsTGluZS5zbG9wZSAqIHRleHRYO1xyXG4gIFxyXG4gIHJldHVybiBodG1sYFxyXG4gICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgbWluLWhlaWdodDogNjAwcHg7XCI+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJmbGV4OiAxOyBtaW4td2lkdGg6IDA7XCI+XHJcbiAgICAgICAgPGgzIHN0eWxlPVwiY29sb3I6ICMzNDQ5NWU7IG1hcmdpbi10b3A6IDA7XCI+8J+TiiBZb3VyIEV4cGxvcmVyIExpbmU8L2gzPlxyXG4gICAgICAgIDxwPjxzdHJvbmc+TGluZTo8L3N0cm9uZz4gU2FsZXMgPSAke2ludGVyY2VwdEV4cGxvcmVyLnRvRml4ZWQoMil9ICsgJHtzbG9wZUV4cGxvcmVyLnRvRml4ZWQoMyl9IMOXIFRlbXBlcmF0dXJlPC9wPlxyXG4gICAgICAgIDx0YWJsZSBzdHlsZT1cIndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBmb250LXNpemU6IDE0cHg7XCI+XHJcbiAgICAgICAgICA8dHIgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZWNmMGYxO1wiPlxyXG4gICAgICAgICAgICA8dGggc3R5bGU9XCJwYWRkaW5nOiA4cHg7IHRleHQtYWxpZ246IGxlZnQ7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7XCI+TWV0cmljPC90aD5cclxuICAgICAgICAgICAgPHRoIHN0eWxlPVwicGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiByaWdodDsgYm9yZGVyOiAxcHggc29saWQgI2JkYzNjNztcIj5WYWx1ZTwvdGg+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7XCI+U1NUIChUb3RhbCk8L3RkPlxyXG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IHRleHQtYWxpZ246IHJpZ2h0OyBib3JkZXI6IDFweCBzb2xpZCAjYmRjM2M3O1wiPiR7c3N0LnRvRml4ZWQoMil9PC90ZD5cclxuICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2JkYzNjNztcIj5TU1IgKFJlZ3Jlc3Npb24pPC90ZD5cclxuICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiByaWdodDsgYm9yZGVyOiAxcHggc29saWQgI2JkYzNjNztcIj4ke3NzckV4cGxvcmVyLnRvRml4ZWQoMil9PC90ZD5cclxuICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2JkYzNjNztcIj5TU0UgKEVycm9yKTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7XCI+JHtzc2VFeHBsb3Jlci50b0ZpeGVkKDIpfTwvdGQ+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgPHRyIHN0eWxlPVwiYmFja2dyb3VuZDogI2VjZjBmMTsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+XHJcbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2JkYzNjNztcIj5SwrI8L3RkPlxyXG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IHRleHQtYWxpZ246IHJpZ2h0OyBib3JkZXI6IDFweCBzb2xpZCAjYmRjM2M3O1wiPiR7clNxdWFyZWRFeHBsb3Jlci50b0ZpeGVkKDQpfTwvdGQ+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgIDwvdGFibGU+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICBcclxuICAgICAgPGRpdiBzdHlsZT1cImZsZXg6IDE7IG1pbi13aWR0aDogMDtcIj5cclxuICAgICAgICA8aDMgc3R5bGU9XCJjb2xvcjogIzI3YWU2MDsgbWFyZ2luLXRvcDogMDtcIj7inKggT3B0aW1hbCBMaW5lIChPTFMpPC9oMz5cclxuICAgICAgICA8cD48c3Ryb25nPkxpbmU6PC9zdHJvbmc+IFNhbGVzID0gJHtvcHRpbWFsTGluZS5pbnRlcmNlcHQudG9GaXhlZCgyKX0gKyAke29wdGltYWxMaW5lLnNsb3BlLnRvRml4ZWQoMyl9IMOXIFRlbXBlcmF0dXJlPC9wPlxyXG4gICAgICAgIDx0YWJsZSBzdHlsZT1cIndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBmb250LXNpemU6IDE0cHg7XCI+XHJcbiAgICAgICAgICA8dHIgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZDVmNGU2O1wiPlxyXG4gICAgICAgICAgICA8dGggc3R5bGU9XCJwYWRkaW5nOiA4cHg7IHRleHQtYWxpZ246IGxlZnQ7IGJvcmRlcjogMXB4IHNvbGlkICMyN2FlNjA7XCI+TWV0cmljPC90aD5cclxuICAgICAgICAgICAgPHRoIHN0eWxlPVwicGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiByaWdodDsgYm9yZGVyOiAxcHggc29saWQgIzI3YWU2MDtcIj5WYWx1ZTwvdGg+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICMyN2FlNjA7XCI+U1NUIChUb3RhbCk8L3RkPlxyXG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IHRleHQtYWxpZ246IHJpZ2h0OyBib3JkZXI6IDFweCBzb2xpZCAjMjdhZTYwO1wiPiR7c3N0LnRvRml4ZWQoMil9PC90ZD5cclxuICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgIzI3YWU2MDtcIj5TU1IgKFJlZ3Jlc3Npb24pPC90ZD5cclxuICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiByaWdodDsgYm9yZGVyOiAxcHggc29saWQgIzI3YWU2MDtcIj4ke3Nzck9wdGltYWwudG9GaXhlZCgyKX08L3RkPlxyXG4gICAgICAgICAgPC90cj5cclxuICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjMjdhZTYwO1wiPlNTRSAoRXJyb3IpPC90ZD5cclxuICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiByaWdodDsgYm9yZGVyOiAxcHggc29saWQgIzI3YWU2MDtcIj4ke3NzZU9wdGltYWwudG9GaXhlZCgyKX08L3RkPlxyXG4gICAgICAgICAgPC90cj5cclxuICAgICAgICAgIDx0ciBzdHlsZT1cImJhY2tncm91bmQ6ICNkNWY0ZTY7IGZvbnQtd2VpZ2h0OiBib2xkO1wiPlxyXG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICMyN2FlNjA7XCI+UsKyPC90ZD5cclxuICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiByaWdodDsgYm9yZGVyOiAxcHggc29saWQgIzI3YWU2MDtcIj4ke3JTcXVhcmVkT3B0aW1hbC50b0ZpeGVkKDQpfTwvdGQ+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgIDwvdGFibGU+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICBcclxuICAgICAgPGRpdiBzdHlsZT1cImZsZXg6IDEuMjsgbWluLXdpZHRoOiAwO1wiPlxyXG4gICAgICAgIDxoMyBzdHlsZT1cImNvbG9yOiAjMjk4MGI5OyBtYXJnaW4tdG9wOiAwO1wiPvCfk4ggTGl2ZSBWaXN1YWxpemF0aW9uPC9oMz5cclxuICAgICAgICA8ZGl2IHN0eWxlPVwiaGVpZ2h0OiA0MDBweDtcIj5cclxuICAgICAgICAgICR7UGxvdC5wbG90KHtcclxuICAgICAgICAgICAgbWFya3M6IFtcclxuICAgICAgICAgICAgICBQbG90LmRvdChsZW1vbmFkZURhdGEsIHt4OiBcInRlbXBlcmF0dXJlXCIsIHk6IFwic2FsZXNcIiwgZmlsbDogXCIjZTY3ZTIyXCIsIHI6IDN9KSxcclxuICAgICAgICAgICAgICBQbG90LnJ1bGVZKFttZWFuU2FsZXNdLCB7c3Ryb2tlOiBcIiNlNzRjM2NcIiwgc3Ryb2tlV2lkdGg6IDIsIHN0cm9rZURhc2hhcnJheTogXCI1LDVcIn0pLFxyXG4gICAgICAgICAgICAgIFBsb3QubGluZShcclxuICAgICAgICAgICAgICAgIFt7dGVtcGVyYXR1cmU6IG1pblRlbXAsIHNhbGVzOiBpbnRlcmNlcHRFeHBsb3JlciArIHNsb3BlRXhwbG9yZXIgKiBtaW5UZW1wfSxcclxuICAgICAgICAgICAgICAgICB7dGVtcGVyYXR1cmU6IG1heFRlbXAsIHNhbGVzOiBpbnRlcmNlcHRFeHBsb3JlciArIHNsb3BlRXhwbG9yZXIgKiBtYXhUZW1wfV0sXHJcbiAgICAgICAgICAgICAgICB7eDogXCJ0ZW1wZXJhdHVyZVwiLCB5OiBcInNhbGVzXCIsIHN0cm9rZTogXCIjMzQ0OTVlXCIsIHN0cm9rZVdpZHRoOiAzfVxyXG4gICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgUGxvdC5saW5lKFxyXG4gICAgICAgICAgICAgICAgW3t0ZW1wZXJhdHVyZTogbWluVGVtcCwgc2FsZXM6IG9wdGltYWxMaW5lLmludGVyY2VwdCArIG9wdGltYWxMaW5lLnNsb3BlICogbWluVGVtcH0sXHJcbiAgICAgICAgICAgICAgICAge3RlbXBlcmF0dXJlOiBtYXhUZW1wLCBzYWxlczogb3B0aW1hbExpbmUuaW50ZXJjZXB0ICsgb3B0aW1hbExpbmUuc2xvcGUgKiBtYXhUZW1wfV0sXHJcbiAgICAgICAgICAgICAgICB7eDogXCJ0ZW1wZXJhdHVyZVwiLCB5OiBcInNhbGVzXCIsIHN0cm9rZTogXCIjMjdhZTYwXCIsIHN0cm9rZVdpZHRoOiAzLCBzdHJva2VEYXNoYXJyYXk6IFwiOCw0XCJ9XHJcbiAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICBQbG90LmxpbmsoXHJcbiAgICAgICAgICAgICAgICBsZW1vbmFkZURhdGEubWFwKGQgPT4gKHtcclxuICAgICAgICAgICAgICAgICAgeDE6IGQudGVtcGVyYXR1cmUsXHJcbiAgICAgICAgICAgICAgICAgIHkxOiBkLnNhbGVzLFxyXG4gICAgICAgICAgICAgICAgICB4MjogZC50ZW1wZXJhdHVyZSxcclxuICAgICAgICAgICAgICAgICAgeTI6IGludGVyY2VwdEV4cGxvcmVyICsgc2xvcGVFeHBsb3JlciAqIGQudGVtcGVyYXR1cmVcclxuICAgICAgICAgICAgICAgIH0pKSxcclxuICAgICAgICAgICAgICAgIHt4MTogXCJ4MVwiLCB5MTogXCJ5MVwiLCB4MjogXCJ4MlwiLCB5MjogXCJ5MlwiLCBzdHJva2U6IFwiIzM0OThkYlwiLCBzdHJva2VXaWR0aDogMSwgb3BhY2l0eTogMC41fVxyXG4gICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgUGxvdC50ZXh0KFxyXG4gICAgICAgICAgICAgICAgW3t4OiB0ZXh0WCwgeTogZXhwbG9yZXJZLCB0ZXh0OiBgWW91ciBMaW5lYH1dLFxyXG4gICAgICAgICAgICAgICAge3g6IFwieFwiLCB5OiBcInlcIiwgdGV4dDogXCJ0ZXh0XCIsIGZpbGw6IFwiIzM0NDk1ZVwiLCBmb250U2l6ZTogMTIsIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLCBkeDogMTUsIGR5OiA4fVxyXG4gICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgUGxvdC50ZXh0KFxyXG4gICAgICAgICAgICAgICAgW3t4OiB0ZXh0WCwgeTogb3B0aW1hbFksIHRleHQ6IGBPcHRpbWFsIE9MU2B9XSxcclxuICAgICAgICAgICAgICAgIHt4OiBcInhcIiwgeTogXCJ5XCIsIHRleHQ6IFwidGV4dFwiLCBmaWxsOiBcIiMyN2FlNjBcIiwgZm9udFNpemU6IDEyLCBmb250V2VpZ2h0OiBcImJvbGRcIiwgZHg6IDE1LCBkeTogLTh9XHJcbiAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICB4OiB7bGFiZWw6IFwiVGVtcGVyYXR1cmUgKMKwRilcIn0sXHJcbiAgICAgICAgICAgIHk6IHtsYWJlbDogXCJTYWxlcyAoJClcIn0sXHJcbiAgICAgICAgICAgIHdpZHRoOiAzNTAsXHJcbiAgICAgICAgICAgIGhlaWdodDogMzUwLFxyXG4gICAgICAgICAgICBtYXJnaW5Ub3A6IDEwLFxyXG4gICAgICAgICAgICBtYXJnaW5Cb3R0b206IDMwLFxyXG4gICAgICAgICAgICBtYXJnaW5MZWZ0OiA0NSxcclxuICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IDEwLFxyXG4gICAgICAgICAgICBncmlkOiB0cnVlXHJcbiAgICAgICAgICB9KX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG59XHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMzgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJodG1sYFxyXG48cD5Gb3Igb3VyIGxlbW9uYWRlIG1vZGVsOiA8c3Ryb25nPlNhbGVzID0gJHtzc3JDYWxjcy5pbnRlcmNlcHQudG9GaXhlZCgyKX0gKyAke3NzckNhbGNzLnNsb3BlLnRvRml4ZWQoMyl9IMOXIFRlbXBlcmF0dXJlPC9zdHJvbmc+PC9wPlxyXG5cclxuPGRpdiBjbGFzcz1cImZyYWdtZW50XCI+XHJcbjxwPjxzdHJvbmc+SW50ZXJjZXB0ICjOsuKCgCA9ICR7c3NyQ2FsY3MuaW50ZXJjZXB0LnRvRml4ZWQoMil9KTo8L3N0cm9uZz48L3A+XHJcbjx1bD5cclxuPGxpPkV4cGVjdGVkIHNhbGVzIHdoZW4gdGVtcGVyYXR1cmUgaXMgMMKwRjwvbGk+XHJcbjxsaT48c3Ryb25nPlF1ZXN0aW9uOjwvc3Ryb25nPiBEb2VzIHRoaXMgbWFrZSBwcmFjdGljYWwgc2Vuc2U/IPCfpJQ8L2xpPlxyXG48bGk+T2Z0ZW4ganVzdCBhIG1hdGhlbWF0aWNhbCBhbmNob3IsIG5vdCBhbHdheXMgaW50ZXJwcmV0YWJsZSBpbiBjb250ZXh0PC9saT5cclxuPC91bD5cclxuPC9kaXY+XHJcblxyXG48ZGl2IGNsYXNzPVwiZnJhZ21lbnRcIj5cclxuPHA+PHN0cm9uZz5TbG9wZSAozrLigoEgPSAke3NzckNhbGNzLnNsb3BlLnRvRml4ZWQoMyl9KTo8L3N0cm9uZz48L3A+XHJcbjx1bD5cclxuPGxpPkZvciBlYWNoIDHCsEYgaW5jcmVhc2UgaW4gdGVtcGVyYXR1cmUsIHNhbGVzIGluY3JlYXNlIGJ5IH4ke3NzckNhbGNzLnNsb3BlLnRvRml4ZWQoMil9IGxlbW9uYWRlczwvbGk+XHJcbjxsaT5UaGlzIGlzIG91ciA8c3Ryb25nPm1hcmdpbmFsIGVmZmVjdDwvc3Ryb25nPiBvZiB0ZW1wZXJhdHVyZTwvbGk+XHJcbjwvdWw+XHJcbjwvZGl2PlxyXG5cclxuPGRpdiBjbGFzcz1cImZyYWdtZW50XCI+XHJcbjxwPjxzdHJvbmc+UHJhY3RpY2UgUXVlc3Rpb246PC9zdHJvbmc+IElmIHRlbXBlcmF0dXJlIGdvZXMgZnJvbSA4MMKwRiB0byA4NcKwRiwgaG93IG11Y2ggZG8gc2FsZXMgaW5jcmVhc2U/IPCfpJQ8L3A+XHJcbjwvZGl2PlxyXG5cclxuPGRpdiBjbGFzcz1cImZyYWdtZW50XCI+XHJcbjx1bD5cclxuPGxpPjxzdHJvbmc+QW5zd2VyOjwvc3Ryb25nPiA1IMOXICR7c3NyQ2FsY3Muc2xvcGUudG9GaXhlZCgzKX0g4omIICR7KDUgKiBzc3JDYWxjcy5zbG9wZSkudG9GaXhlZCgxKX0gbW9yZSBsZW1vbmFkZXM8L2xpPlxyXG48L3VsPlxyXG48L2Rpdj5cclxuYFxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTM5IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiLy8gQ2FsY3VsYXRlIGNvbmZpZGVuY2UgaW50ZXJ2YWxzIGZvciByZWdyZXNzaW9uIGNvZWZmaWNpZW50c1xyXG5jaUNhbGNzID0ge1xyXG4gIGNvbnN0IG4gPSBsZW1vbmFkZURhdGEubGVuZ3RoO1xyXG4gIGNvbnN0IG1lYW5UZW1wID0gbGVtb25hZGVEYXRhLnJlZHVjZSgoc3VtLCBkKSA9PiBzdW0gKyBkLnRlbXBlcmF0dXJlLCAwKSAvIG47XHJcbiAgXHJcbiAgLy8gQ2FsY3VsYXRlIHJlc2lkdWFscyBhbmQgU1NFXHJcbiAgbGV0IHNzZSA9IDA7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgIGNvbnN0IHByZWQgPSBzc3JDYWxjcy5pbnRlcmNlcHQgKyBzc3JDYWxjcy5zbG9wZSAqIGxlbW9uYWRlRGF0YVtpXS50ZW1wZXJhdHVyZTtcclxuICAgIHNzZSArPSBNYXRoLnBvdyhsZW1vbmFkZURhdGFbaV0uc2FsZXMgLSBwcmVkLCAyKTtcclxuICB9XHJcbiAgXHJcbiAgLy8gU3RhbmRhcmQgZXJyb3Igb2YgcmVncmVzc2lvblxyXG4gIGNvbnN0IHMgPSBNYXRoLnNxcnQoc3NlIC8gKG4gLSAyKSk7XHJcbiAgXHJcbiAgLy8gU3VtIG9mIHNxdWFyZWQgZGV2aWF0aW9ucyBvZiB4XHJcbiAgY29uc3Qgc3NYID0gbGVtb25hZGVEYXRhLnJlZHVjZSgoc3VtLCBkKSA9PiBzdW0gKyBNYXRoLnBvdyhkLnRlbXBlcmF0dXJlIC0gbWVhblRlbXAsIDIpLCAwKTtcclxuICBcclxuICAvLyBTdGFuZGFyZCBlcnJvciBvZiBzbG9wZVxyXG4gIGNvbnN0IHNlQmV0YTEgPSBzIC8gTWF0aC5zcXJ0KHNzWCk7XHJcbiAgXHJcbiAgLy8gdC1jcml0aWNhbCB2YWx1ZSBmb3IgOTUlIENJIChhcHByb3hpbWF0ZSB3aXRoIHogPSAxLjk2IGZvciBsYXJnZSBuKVxyXG4gIGNvbnN0IHRDcml0ID0gMS45NjsgLy8gRm9yIGxhcmdlIHNhbXBsZXMsIHVzZSAyLjA0MiBmb3Igbj0zMFxyXG4gIFxyXG4gIC8vIENvbmZpZGVuY2UgaW50ZXJ2YWwgZm9yIHNsb3BlXHJcbiAgY29uc3QgY2lfbG93ZXIgPSBzc3JDYWxjcy5zbG9wZSAtIHRDcml0ICogc2VCZXRhMTtcclxuICBjb25zdCBjaV91cHBlciA9IHNzckNhbGNzLnNsb3BlICsgdENyaXQgKiBzZUJldGExO1xyXG4gIGNvbnN0IG1hcmdpbiA9IHRDcml0ICogc2VCZXRhMTtcclxuICBcclxuICByZXR1cm4geyBcclxuICAgIHNlQmV0YTE6IHNlQmV0YTEsIFxyXG4gICAgY2lfbG93ZXI6IGNpX2xvd2VyLCBcclxuICAgIGNpX3VwcGVyOiBjaV91cHBlcixcclxuICAgIG1hcmdpbjogbWFyZ2luXHJcbiAgfTtcclxufVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTQwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaHRtbGBcclxuPHA+QmV5b25kIGZpbmRpbmcgdGhlIGJlc3QtZml0IGxpbmUsIHdlIGFzazogPHN0cm9uZz5JcyB0aGUgcmVsYXRpb25zaGlwIHJlYWwgb3IganVzdCByYW5kb20gbm9pc2U/PC9zdHJvbmc+PC9wPlxyXG5cclxuPGRpdiBjbGFzcz1cImZyYWdtZW50XCI+XHJcbjxwPjxzdHJvbmc+Q29uZmlkZW5jZSBJbnRlcnZhbHM6PC9zdHJvbmc+PC9wPlxyXG48dWw+XHJcbjxsaT7OsuKCgSA9ICR7c3NyQ2FsY3Muc2xvcGUudG9GaXhlZCgzKX0gwrEgJHtjaUNhbGNzLm1hcmdpbi50b0ZpeGVkKDMpfSAoOTUlIENJKTwvbGk+XHJcbjxsaT5XZSdyZSA5NSUgY29uZmlkZW50IHRoZSB0cnVlIGVmZmVjdCBpcyBiZXR3ZWVuICR7Y2lDYWxjcy5jaV9sb3dlci50b0ZpeGVkKDMpfSBhbmQgJHtjaUNhbGNzLmNpX3VwcGVyLnRvRml4ZWQoMyl9PC9saT5cclxuPGxpPlRoZSBpbnRlcnZhbCAke2NpQ2FsY3MuY2lfbG93ZXIgPiAwID8gXCJkb2Vzbid0IGNvbnRhaW4gMCwgc3VnZ2VzdGluZyBhIHJlYWwgZWZmZWN0IVwiIDogXCJjb250YWlucyAwLCBzdWdnZXN0aW5nIG5vIHNpZ25pZmljYW50IGVmZmVjdC5cIn08L2xpPlxyXG48L3VsPlxyXG48L2Rpdj5cclxuXHJcbjxkaXYgY2xhc3M9XCJmcmFnbWVudFwiPlxyXG48cD48c3Ryb25nPkh5cG90aGVzaXMgVGVzdGluZzo8L3N0cm9uZz48L3A+XHJcbjx1bD5cclxuPGxpPkjigoA6IM6y4oKBID0gMCAodGVtcGVyYXR1cmUgaGFzIDxzdHJvbmc+bm88L3N0cm9uZz4gZWZmZWN0KTwvbGk+XHJcbjxsaT5I4oKBOiDOsuKCgSDiiaAgMCAodGVtcGVyYXR1cmUgPHN0cm9uZz5kb2VzPC9zdHJvbmc+IGFmZmVjdCBzYWxlcyk8L2xpPlxyXG48L3VsPlxyXG48L2Rpdj5cclxuXHJcbjxkaXYgY2xhc3M9XCJmcmFnbWVudFwiPlxyXG48cD48c3Ryb25nPlF1ZXN0aW9uOjwvc3Ryb25nPiBCYXNlZCBvbiBvdXIgQ0kgWyR7Y2lDYWxjcy5jaV9sb3dlci50b0ZpeGVkKDMpfSwgJHtjaUNhbGNzLmNpX3VwcGVyLnRvRml4ZWQoMyl9XSwgY2FuIHdlIHJlamVjdCBI4oKAPyDwn6SUPC9wPlxyXG48L2Rpdj5cclxuXHJcbjxkaXYgY2xhc3M9XCJmcmFnbWVudFwiPlxyXG48dWw+XHJcbjxsaT48c3Ryb25nPkFuc3dlcjo8L3N0cm9uZz4gJHtjaUNhbGNzLmNpX2xvd2VyID4gMCA/IFwiWWVzISBUaGUgOTUlIGNvbmZpZGVuY2UgaW50ZXJ2YWwgZXhjbHVkZXMgMCwgc28gd2UgcmVqZWN0IHRoZSBudWxsIGh5cG90aGVzaXMuXCIgOiBcIk5vLCB0aGUgaW50ZXJ2YWwgaW5jbHVkZXMgMCwgc28gd2UgZmFpbCB0byByZWplY3QgdGhlIG51bGwgaHlwb3RoZXNpcy5cIn08L2xpPlxyXG48L3VsPlxyXG48L2Rpdj5cclxuYFxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTQxIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xyXG5jb25zdCB0ZW1wcyA9IGxlbW9uYWRlRGF0YS5tYXAoZCA9PiBkLnRlbXBlcmF0dXJlKTtcclxuY29uc3QgbWluVGVtcCA9IE1hdGgubWluKC4uLnRlbXBzKTtcclxuY29uc3QgbWF4VGVtcCA9IE1hdGgubWF4KC4uLnRlbXBzKTtcclxuY29uc3QgbWVhblNhbGVzID0gbGVtb25hZGVEYXRhLnJlZHVjZSgoc3VtLCBkKSA9PiBzdW0gKyBkLnNhbGVzLCAwKSAvIGxlbW9uYWRlRGF0YS5sZW5ndGg7XHJcblxyXG5sZXQgbnVtZXJhdG9yID0gMCwgZGVub21pbmF0b3IgPSAwO1xyXG5mb3IgKGxldCBpID0gMDsgaSA8IGxlbW9uYWRlRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gIG51bWVyYXRvciArPSAobGVtb25hZGVEYXRhW2ldLnRlbXBlcmF0dXJlIC0gKG1pblRlbXArbWF4VGVtcCkvMikgKiAobGVtb25hZGVEYXRhW2ldLnNhbGVzIC0gbWVhblNhbGVzKTtcclxuICBkZW5vbWluYXRvciArPSAobGVtb25hZGVEYXRhW2ldLnRlbXBlcmF0dXJlIC0gKG1pblRlbXArbWF4VGVtcCkvMikgKiogMjtcclxufVxyXG5jb25zdCBvbHNTbG9wZSA9IG51bWVyYXRvciAvIGRlbm9taW5hdG9yO1xyXG5jb25zdCBvbHNJbnRlcmNlcHQgPSBtZWFuU2FsZXMgLSBvbHNTbG9wZSAqICgobWluVGVtcCttYXhUZW1wKS8yKTtcclxuXHJcbnJldHVybiBQbG90LnBsb3Qoe1xyXG4gIG1hcmtzOiBbXHJcbiAgICBQbG90LmRvdChsZW1vbmFkZURhdGEsIHt4OiBcInRlbXBlcmF0dXJlXCIsIHk6IFwic2FsZXNcIiwgZmlsbDogXCIjZTY3ZTIyXCIsIHI6IDR9KSxcclxuICAgIFBsb3QubGluZShcclxuICAgICAgW3t0ZW1wZXJhdHVyZTogbWluVGVtcCwgc2FsZXM6IG9sc0ludGVyY2VwdCArIG9sc1Nsb3BlICogbWluVGVtcH0sXHJcbiAgICAgICB7dGVtcGVyYXR1cmU6IG1heFRlbXAsIHNhbGVzOiBvbHNJbnRlcmNlcHQgKyBvbHNTbG9wZSAqIG1heFRlbXB9XSxcclxuICAgICAge3g6IFwidGVtcGVyYXR1cmVcIiwgeTogXCJzYWxlc1wiLCBzdHJva2U6IFwiIzI3YWU2MFwiLCBzdHJva2VXaWR0aDogMywgc3Ryb2tlRGFzaGFycmF5OiBcIjgsNFwifVxyXG4gICAgKSxcclxuICAgIFBsb3QudGV4dChbXHJcbiAgICAgIHtcclxuICAgICAgICB0ZW1wZXJhdHVyZTogbWluVGVtcCArIChtYXhUZW1wLW1pblRlbXApKjAuODUsXHJcbiAgICAgICAgc2FsZXM6IG9sc0ludGVyY2VwdCArIG9sc1Nsb3BlICogKG1pblRlbXAgKyAobWF4VGVtcC1taW5UZW1wKSowLjg1KSxcclxuICAgICAgICB0ZXh0OiBgT0xTIExpbmVgXHJcbiAgICAgIH1cclxuICAgIF0sIHtcclxuICAgICAgeDogXCJ0ZW1wZXJhdHVyZVwiLCB5OiBcInNhbGVzXCIsIHRleHQ6IFwidGV4dFwiLCBmb250U2l6ZTogMTQsIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLCBmaWxsOiBcIiMyN2FlNjBcIiwgZHk6IC0xOFxyXG4gICAgfSlcclxuICBdLFxyXG4gIHg6IHtsYWJlbDogXCJUZW1wZXJhdHVyZSAowrBGKVwifSxcclxuICB5OiB7bGFiZWw6IFwiU2FsZXMgKCQpXCJ9LFxyXG4gIHdpZHRoOiA0MDAsXHJcbiAgaGVpZ2h0OiA0MDAsXHJcbiAgZ3JpZDogdHJ1ZVxyXG59KTtcclxufVxyXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTQyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoie1xyXG4gIGNvbnN0IHJlc2lkdWFsRGF0YSA9IGxlbW9uYWRlRGF0YS5tYXAoKGQsIGluZGV4KSA9PiB7XHJcbiAgICBjb25zdCBwcmVkaWN0ZWQgPSBvcHRpbWFsTGluZS5pbnRlcmNlcHQgKyBvcHRpbWFsTGluZS5zbG9wZSAqIGQudGVtcGVyYXR1cmU7XHJcbiAgICBjb25zdCByZXNpZHVhbCA9IGQuc2FsZXMgLSBwcmVkaWN0ZWQ7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkYXk6IGQuZGF5LFxyXG4gICAgICBkYXlJbmRleDogaW5kZXggKyAxLFxyXG4gICAgICByZXNpZHVhbDogcmVzaWR1YWwsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiBkLnRlbXBlcmF0dXJlXHJcbiAgICB9O1xyXG4gIH0pO1xyXG4gIFxyXG4gIHJldHVybiBodG1sYFxyXG4gICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGdhcDogMjBweDsgbWFyZ2luOiAyMHB4IDA7XCI+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJmbGV4OiAxO1wiPlxyXG4gICAgICAgIDxoNCBzdHlsZT1cImNvbG9yOiAjMjk4MGI5OyBtYXJnaW4tdG9wOiAwO1wiPlJlc2lkdWFscyB2cy4gVGltZSAoRGF5KTwvaDQ+XHJcbiAgICAgICAgJHtQbG90LnBsb3Qoe1xyXG4gICAgICAgICAgbWFya3M6IFtcclxuICAgICAgICAgICAgUGxvdC5ydWxlWShbMF0sIHtzdHJva2U6IFwiI2U3NGMzY1wiLCBzdHJva2VXaWR0aDogMSwgc3Ryb2tlRGFzaGFycmF5OiBcIjMsM1wifSksXHJcbiAgICAgICAgICAgIFBsb3QubGluZShyZXNpZHVhbERhdGEsIHtcclxuICAgICAgICAgICAgICB4OiBcImRheUluZGV4XCIsIFxyXG4gICAgICAgICAgICAgIHk6IFwicmVzaWR1YWxcIiwgXHJcbiAgICAgICAgICAgICAgc3Ryb2tlOiBcIiMzNDk4ZGJcIixcclxuICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMlxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgUGxvdC5kb3QocmVzaWR1YWxEYXRhLCB7XHJcbiAgICAgICAgICAgICAgeDogXCJkYXlJbmRleFwiLCBcclxuICAgICAgICAgICAgICB5OiBcInJlc2lkdWFsXCIsIFxyXG4gICAgICAgICAgICAgIGZpbGw6IFwiIzM0OThkYlwiLCBcclxuICAgICAgICAgICAgICByOiA2LFxyXG4gICAgICAgICAgICAgIHRpdGxlOiBkID0+IGBEYXkgJHtkLmRheX06ICR7ZC5yZXNpZHVhbC50b0ZpeGVkKDEpfWBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICB4OiB7bGFiZWw6IFwiRGF5XCJ9LFxyXG4gICAgICAgICAgeToge2xhYmVsOiBcIlJlc2lkdWFscyAoZeG1oilcIiwgZ3JpZDogdHJ1ZX0sXHJcbiAgICAgICAgICB3aWR0aDogNDAwLFxyXG4gICAgICAgICAgaGVpZ2h0OiAzMDBcclxuICAgICAgICB9KX1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIFxyXG4gICAgICA8ZGl2IHN0eWxlPVwiZmxleDogMTtcIj5cclxuICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogI2U4ZjRmODsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBoZWlnaHQ6IDMwMHB4O1wiPlxyXG4gICAgICAgICAgPGg0IHN0eWxlPVwiY29sb3I6ICMyOTgwYjk7IG1hcmdpbi10b3A6IDA7XCI+4pyFIEluZGVwZW5kZW5jZSBQcmluY2lwbGU8L2g0PlxyXG4gICAgICAgICAgPHA+PHN0cm9uZz5XaGF0IHdlIGNoZWNrOjwvc3Ryb25nPiBObyBzeXN0ZW1hdGljIHBhdHRlcm4gb3ZlciB0aW1lIG9yIG9ic2VydmF0aW9uIG9yZGVyLjwvcD5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbjogMTVweCAwO1wiPlxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6ICMyN2FlNjA7IGZvbnQtd2VpZ2h0OiBib2xkO1wiPuKckyBHb29kIChJbmRlcGVuZGVudCk6PC9kaXY+XHJcbiAgICAgICAgICAgIDx1bCBzdHlsZT1cIm1hcmdpbjogOHB4IDA7IGNvbG9yOiAjMjdhZTYwOyBmb250LXNpemU6IDE0cHg7XCI+XHJcbiAgICAgICAgICAgICAgPGxpPlJhbmRvbSBzY2F0dGVyIGFyb3VuZCB6ZXJvPC9saT5cclxuICAgICAgICAgICAgICA8bGk+Tm8gdHJlbmRzIG9yIGN5Y2xlczwvbGk+XHJcbiAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbjogMTVweCAwO1wiPlxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6ICNlNzRjM2M7IGZvbnQtd2VpZ2h0OiBib2xkO1wiPuKclyBQcm9ibGVtIChEZXBlbmRlbnQpOjwvZGl2PlxyXG4gICAgICAgICAgICA8dWwgc3R5bGU9XCJtYXJnaW46IDhweCAwOyBjb2xvcjogI2U3NGMzYzsgZm9udC1zaXplOiAxNHB4O1wiPlxyXG4gICAgICAgICAgICAgIDxsaT5VcHdhcmQvZG93bndhcmQgdHJlbmRzPC9saT5cclxuICAgICAgICAgICAgICA8bGk+UmVndWxhciBjeWNsZXMgb3Igc2Vhc29uYWxpdHk8L2xpPlxyXG4gICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxwIHN0eWxlPVwiZm9udC1zdHlsZTogaXRhbGljOyBjb2xvcjogIzdmOGM4ZDsgZm9udC1zaXplOiAxNHB4O1wiPlxyXG4gICAgICAgICAgICA8c3Ryb25nPldoeSBpdCBtYXR0ZXJzOjwvc3Ryb25nPiBWaW9sYXRpb25zIHN1Z2dlc3Qgb21pdHRlZCB2YXJpYWJsZXMgb3IgdGltZS1iYXNlZCBlZmZlY3RzLlxyXG4gICAgICAgICAgPC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIGA7XHJcbn1cclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00MyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IntcclxuICBjb25zdCByZXNpZHVhbERhdGEgPSBsZW1vbmFkZURhdGEubWFwKGQgPT4ge1xyXG4gICAgY29uc3QgcHJlZGljdGVkID0gb3B0aW1hbExpbmUuaW50ZXJjZXB0ICsgb3B0aW1hbExpbmUuc2xvcGUgKiBkLnRlbXBlcmF0dXJlO1xyXG4gICAgY29uc3QgcmVzaWR1YWwgPSBkLnNhbGVzIC0gcHJlZGljdGVkO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZml0dGVkOiBwcmVkaWN0ZWQsXHJcbiAgICAgIHJlc2lkdWFsOiByZXNpZHVhbCxcclxuICAgICAgZGF5OiBkLmRheVxyXG4gICAgfTtcclxuICB9KTtcclxuICBcclxuICByZXR1cm4gaHRtbGBcclxuICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBnYXA6IDIwcHg7IG1hcmdpbjogMjBweCAwO1wiPlxyXG4gICAgICA8ZGl2IHN0eWxlPVwiZmxleDogMTtcIj5cclxuICAgICAgICA8aDQgc3R5bGU9XCJjb2xvcjogIzI5ODBiOTsgbWFyZ2luLXRvcDogMDtcIj5SZXNpZHVhbHMgdnMuIEZpdHRlZCBWYWx1ZXM8L2g0PlxyXG4gICAgICAgICR7UGxvdC5wbG90KHtcclxuICAgICAgICAgIG1hcmtzOiBbXHJcbiAgICAgICAgICAgIFBsb3QucnVsZVkoWzBdLCB7c3Ryb2tlOiBcIiNlNzRjM2NcIiwgc3Ryb2tlV2lkdGg6IDEsIHN0cm9rZURhc2hhcnJheTogXCIzLDNcIn0pLFxyXG4gICAgICAgICAgICBQbG90LmRvdChyZXNpZHVhbERhdGEsIHtcclxuICAgICAgICAgICAgICB4OiBcImZpdHRlZFwiLCBcclxuICAgICAgICAgICAgICB5OiBcInJlc2lkdWFsXCIsIFxyXG4gICAgICAgICAgICAgIGZpbGw6IFwiI2U2N2UyMlwiLCBcclxuICAgICAgICAgICAgICByOiA2LFxyXG4gICAgICAgICAgICAgIHRpdGxlOiBkID0+IGBl4bWiID0gJHtkLnJlc2lkdWFsLnRvRml4ZWQoMSl9YFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIHg6IHtsYWJlbDogXCJGaXR0ZWQgVmFsdWVzICjFt+G1oilcIn0sXHJcbiAgICAgICAgICB5OiB7bGFiZWw6IFwiUmVzaWR1YWxzIChl4bWiKVwiLCBncmlkOiB0cnVlfSxcclxuICAgICAgICAgIHdpZHRoOiA0MDAsXHJcbiAgICAgICAgICBoZWlnaHQ6IDMwMFxyXG4gICAgICAgIH0pfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgXHJcbiAgICAgIDxkaXYgc3R5bGU9XCJmbGV4OiAxO1wiPlxyXG4gICAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZmVmOWU3OyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGhlaWdodDogMzAwcHg7XCI+XHJcbiAgICAgICAgICA8aDQgc3R5bGU9XCJjb2xvcjogI2YzOWMxMjsgbWFyZ2luLXRvcDogMDtcIj7wn5OPIEhvbW9zY2VkYXN0aWNpdHkgUHJpbmNpcGxlPC9oND5cclxuICAgICAgICAgIDxwPjxzdHJvbmc+V2hhdCB3ZSBjaGVjazo8L3N0cm9uZz4gQ29uc3RhbnQgc3ByZWFkIG9mIHJlc2lkdWFscyBhY3Jvc3MgYWxsIGZpdHRlZCB2YWx1ZXMuPC9wPlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luOiAxNXB4IDA7XCI+XHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJjb2xvcjogIzI3YWU2MDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+4pyTIEdvb2QgKEhvbW9zY2VkYXN0aWMpOjwvZGl2PlxyXG4gICAgICAgICAgICA8dWwgc3R5bGU9XCJtYXJnaW46IDhweCAwOyBjb2xvcjogIzI3YWU2MDsgZm9udC1zaXplOiAxNHB4O1wiPlxyXG4gICAgICAgICAgICAgIDxsaT5Db25zdGFudCB2ZXJ0aWNhbCBzcHJlYWQ8L2xpPlxyXG4gICAgICAgICAgICAgIDxsaT5ObyBmdW5uZWwvY29uZSBzaGFwZXM8L2xpPlxyXG4gICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW46IDE1cHggMDtcIj5cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImNvbG9yOiAjZTc0YzNjOyBmb250LXdlaWdodDogYm9sZDtcIj7inJcgUHJvYmxlbSAoSGV0ZXJvc2NlZGFzdGljKTo8L2Rpdj5cclxuICAgICAgICAgICAgPHVsIHN0eWxlPVwibWFyZ2luOiA4cHggMDsgY29sb3I6ICNlNzRjM2M7IGZvbnQtc2l6ZTogMTRweDtcIj5cclxuICAgICAgICAgICAgICA8bGk+RnVubmVsIHNoYXBlIChzcHJlYWQgY2hhbmdlcyk8L2xpPlxyXG4gICAgICAgICAgICAgIDxsaT5TeXN0ZW1hdGljIHBhdHRlcm4gaW4gc3ByZWFkPC9saT5cclxuICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICA8cCBzdHlsZT1cImZvbnQtc3R5bGU6IGl0YWxpYzsgY29sb3I6ICM3ZjhjOGQ7IGZvbnQtc2l6ZTogMTRweDtcIj5cclxuICAgICAgICAgICAgPHN0cm9uZz5XaHkgaXQgbWF0dGVyczo8L3N0cm9uZz4gTWFrZXMgc3RhbmRhcmQgZXJyb3JzIHVucmVsaWFibGUsIGFmZmVjdHMgaHlwb3RoZXNpcyB0ZXN0cy5cclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG59XHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNDQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ7XHJcbiAgY29uc3QgcmVzaWR1YWxEYXRhID0gbGVtb25hZGVEYXRhLm1hcChkID0+IHtcclxuICAgIGNvbnN0IHByZWRpY3RlZCA9IG9wdGltYWxMaW5lLmludGVyY2VwdCArIG9wdGltYWxMaW5lLnNsb3BlICogZC50ZW1wZXJhdHVyZTtcclxuICAgIGNvbnN0IHJlc2lkdWFsID0gZC5zYWxlcyAtIHByZWRpY3RlZDtcclxuICAgIHJldHVybiB7IHJlc2lkdWFsOiByZXNpZHVhbCwgZGF5OiBkLmRheSB9O1xyXG4gIH0pO1xyXG4gIFxyXG4gIGNvbnN0IHJlc2lkdWFscyA9IHJlc2lkdWFsRGF0YS5tYXAoZCA9PiBkLnJlc2lkdWFsKTtcclxuICBjb25zdCBtZWFuUmVzaWR1YWwgPSByZXNpZHVhbHMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgLyByZXNpZHVhbHMubGVuZ3RoO1xyXG4gIGNvbnN0IHN0ZFJlc2lkdWFsID0gTWF0aC5zcXJ0KHJlc2lkdWFscy5yZWR1Y2UoKHNxLCBuKSA9PiBzcSArIE1hdGgucG93KG4gLSBtZWFuUmVzaWR1YWwsIDIpLCAwKSAvIChyZXNpZHVhbHMubGVuZ3RoIC0gMSkpO1xyXG4gIFxyXG4gIGNvbnN0IGJpbkNvdW50ID0gMTA7XHJcbiAgY29uc3QgbWluUmVzaWR1YWwgPSBNYXRoLm1pbiguLi5yZXNpZHVhbHMpO1xyXG4gIGNvbnN0IG1heFJlc2lkdWFsID0gTWF0aC5tYXgoLi4ucmVzaWR1YWxzKTtcclxuICBjb25zdCBiaW5XaWR0aCA9IChtYXhSZXNpZHVhbCAtIG1pblJlc2lkdWFsKSAvIGJpbkNvdW50O1xyXG4gIFxyXG4gIGNvbnN0IGJpbnMgPSBBcnJheS5mcm9tKHtsZW5ndGg6IGJpbkNvdW50fSwgKF8sIGkpID0+IHtcclxuICAgIGNvbnN0IGJpblN0YXJ0ID0gbWluUmVzaWR1YWwgKyBpICogYmluV2lkdGg7XHJcbiAgICBjb25zdCBiaW5FbmQgPSBiaW5TdGFydCArIGJpbldpZHRoO1xyXG4gICAgY29uc3QgY291bnQgPSByZXNpZHVhbHMuZmlsdGVyKHIgPT4gciA+PSBiaW5TdGFydCAmJiByIDwgYmluRW5kKS5sZW5ndGg7XHJcbiAgICBjb25zdCBkZW5zaXR5ID0gY291bnQgLyAocmVzaWR1YWxzLmxlbmd0aCAqIGJpbldpZHRoKTtcclxuICAgIHJldHVybiB7IGJpblN0YXJ0LCBiaW5FbmQsIGRlbnNpdHkgfTtcclxuICB9KTtcclxuICBcclxuICBjb25zdCBub3JtYWxDdXJ2ZSA9IFtdO1xyXG4gIGZvciAobGV0IHggPSBtaW5SZXNpZHVhbCAtIDU7IHggPD0gbWF4UmVzaWR1YWwgKyA1OyB4ICs9IDAuNSkge1xyXG4gICAgbm9ybWFsQ3VydmUucHVzaCh7XHJcbiAgICAgIHg6IHgsXHJcbiAgICAgIGRlbnNpdHk6ICgxIC8gKHN0ZFJlc2lkdWFsICogTWF0aC5zcXJ0KDIgKiBNYXRoLlBJKSkpICogXHJcbiAgICAgICAgICAgICAgIE1hdGguZXhwKC0wLjUgKiBNYXRoLnBvdygoeCAtIG1lYW5SZXNpZHVhbCkgLyBzdGRSZXNpZHVhbCwgMikpXHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGh0bWxgXHJcbiAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgZ2FwOiAyMHB4OyBtYXJnaW46IDIwcHggMDtcIj5cclxuICAgICAgPGRpdiBzdHlsZT1cImZsZXg6IDE7XCI+XHJcbiAgICAgICAgPGg0IHN0eWxlPVwiY29sb3I6ICMyOTgwYjk7IG1hcmdpbi10b3A6IDA7XCI+RGlzdHJpYnV0aW9uIG9mIFJlc2lkdWFsczwvaDQ+XHJcbiAgICAgICAgJHtQbG90LnBsb3Qoe1xyXG4gICAgICAgICAgbWFya3M6IFtcclxuICAgICAgICAgICAgUGxvdC5yZWN0WShcclxuICAgICAgICAgICAgICBiaW5zLm1hcChiaW4gPT4gKHtcclxuICAgICAgICAgICAgICAgIHgxOiBiaW4uYmluU3RhcnQsXHJcbiAgICAgICAgICAgICAgICB4MjogYmluLmJpbkVuZCxcclxuICAgICAgICAgICAgICAgIGRlbnNpdHk6IGJpbi5kZW5zaXR5XHJcbiAgICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICAgIHt4MTogXCJ4MVwiLCB4MjogXCJ4MlwiLCB5OiBcImRlbnNpdHlcIiwgZmlsbDogXCIjOWI1OWI2XCIsIGZpbGxPcGFjaXR5OiAwLjd9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIFBsb3QucnVsZVkoWzBdLCB7c3Ryb2tlOiBcIiNlNzRjM2NcIiwgc3Ryb2tlV2lkdGg6IDF9KSxcclxuICAgICAgICAgICAgUGxvdC5saW5lWShcclxuICAgICAgICAgICAgICBub3JtYWxDdXJ2ZSxcclxuICAgICAgICAgICAgICB7eDogXCJ4XCIsIHk6IFwiZGVuc2l0eVwiLCBzdHJva2U6IFwiIzJjM2U1MFwiLCBzdHJva2VXaWR0aDogMiwgc3Ryb2tlRGFzaGFycmF5OiBcIjMsM1wifVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgeDoge2xhYmVsOiBcIlJlc2lkdWFsIFZhbHVlXCJ9LFxyXG4gICAgICAgICAgeToge2xhYmVsOiBcIkRlbnNpdHlcIiwgZ3JpZDogdHJ1ZX0sXHJcbiAgICAgICAgICB3aWR0aDogNDAwLFxyXG4gICAgICAgICAgaGVpZ2h0OiAzMDBcclxuICAgICAgICB9KX1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIFxyXG4gICAgICA8ZGl2IHN0eWxlPVwiZmxleDogMTtcIj5cclxuICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogI2Y0ZWNmNzsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBoZWlnaHQ6IDMwMHB4O1wiPlxyXG4gICAgICAgICAgPGg0IHN0eWxlPVwiY29sb3I6ICM4ZTQ0YWQ7IG1hcmdpbi10b3A6IDA7XCI+8J+TiiBOb3JtYWxpdHkgUHJpbmNpcGxlPC9oND5cclxuICAgICAgICAgIDxwPjxzdHJvbmc+V2hhdCB3ZSBjaGVjazo8L3N0cm9uZz4gUmVzaWR1YWxzIGZvbGxvdyBhcHByb3hpbWF0ZWx5IG5vcm1hbCBkaXN0cmlidXRpb24uPC9wPlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luOiAxNXB4IDA7XCI+XHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJjb2xvcjogIzI3YWU2MDsgZm9udC13ZWlnaHQ6IGJvbGQ7XCI+4pyTIEdvb2QgKE5vcm1hbCk6PC9kaXY+XHJcbiAgICAgICAgICAgIDx1bCBzdHlsZT1cIm1hcmdpbjogOHB4IDA7IGNvbG9yOiAjMjdhZTYwOyBmb250LXNpemU6IDE0cHg7XCI+XHJcbiAgICAgICAgICAgICAgPGxpPkhpc3RvZ3JhbSBtYXRjaGVzIG5vcm1hbCBjdXJ2ZTwvbGk+XHJcbiAgICAgICAgICAgICAgPGxpPlN5bW1ldHJpYyBhcm91bmQgemVybzwvbGk+XHJcbiAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbjogMTVweCAwO1wiPlxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6ICNlNzRjM2M7IGZvbnQtd2VpZ2h0OiBib2xkO1wiPuKclyBQcm9ibGVtIChOb24tbm9ybWFsKTo8L2Rpdj5cclxuICAgICAgICAgICAgPHVsIHN0eWxlPVwibWFyZ2luOiA4cHggMDsgY29sb3I6ICNlNzRjM2M7IGZvbnQtc2l6ZTogMTRweDtcIj5cclxuICAgICAgICAgICAgICA8bGk+SGVhdnkgc2tldyBvciBtdWx0aXBsZSBwZWFrczwvbGk+XHJcbiAgICAgICAgICAgICAgPGxpPkV4dHJlbWUgb3V0bGllcnM8L2xpPlxyXG4gICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxwIHN0eWxlPVwiZm9udC1zdHlsZTogaXRhbGljOyBjb2xvcjogIzdmOGM4ZDsgZm9udC1zaXplOiAxM3B4O1wiPlxyXG4gICAgICAgICAgICA8c3Ryb25nPlN0YXRzOjwvc3Ryb25nPiBNZWFuID0gJHttZWFuUmVzaWR1YWwudG9GaXhlZCgyKX0sIFNEID0gJHtzdGRSZXNpZHVhbC50b0ZpeGVkKDIpfSwgbiA9ICR7cmVzaWR1YWxzLmxlbmd0aH1cclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG59XHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNDUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJodG1sYFxyXG48c3R5bGU+XHJcbiAgLm1hdGNoaW5nLWNvbnRhaW5lciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZ2FwOiAxMDBweDtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIG1hcmdpbjogNDBweCAwO1xyXG4gICAgcGFkZGluZzogMjBweDtcclxuICB9XHJcbiAgLm1hdGNoaW5nLWNvbHVtbiB7XHJcbiAgICBmbGV4OiAxO1xyXG4gIH1cclxuICAubWF0Y2hpbmctaXRlbSB7XHJcbiAgICBwYWRkaW5nOiAxNXB4O1xyXG4gICAgbWFyZ2luOiAxNXB4IDA7XHJcbiAgICBib3JkZXI6IDJweCBzb2xpZCAjMzQ5OGRiO1xyXG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gICAgYmFja2dyb3VuZDogI2VjZjBmMTtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICB9XHJcbiAgLmxpbmUtY2FudmFzIHtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHRvcDogMDtcclxuICAgIGxlZnQ6IDA7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xyXG4gIH1cclxuPC9zdHlsZT5cclxuXHJcbjxwPjxzdHJvbmc+UXVlc3Rpb246PC9zdHJvbmc+IE1hdGNoIGVhY2ggYXNzdW1wdGlvbiB0byBpdHMgY29uc2VxdWVuY2Ugd2hlbiB2aW9sYXRlZDo8L3A+XHJcblxyXG48ZGl2IHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlO1wiPlxyXG4gIDxkaXYgY2xhc3M9XCJtYXRjaGluZy1jb250YWluZXJcIj5cclxuICAgIDxkaXYgY2xhc3M9XCJtYXRjaGluZy1jb2x1bW5cIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIm1hdGNoaW5nLWl0ZW1cIiBzdHlsZT1cImJhY2tncm91bmQ6ICNlM2YyZmQ7XCI+XHJcbiAgICAgICAgPHN0cm9uZz4xLiBMaW5lYXJpdHkgdmlvbGF0aW9uPC9zdHJvbmc+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwibWF0Y2hpbmctaXRlbVwiIHN0eWxlPVwiYmFja2dyb3VuZDogI2UzZjJmZDtcIj5cclxuICAgICAgICA8c3Ryb25nPjIuIEluZGVwZW5kZW5jZSB2aW9sYXRpb248L3N0cm9uZz5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJtYXRjaGluZy1pdGVtXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZTNmMmZkO1wiPlxyXG4gICAgICAgIDxzdHJvbmc+My4gSG9tb3NjZWRhc3RpY2l0eSB2aW9sYXRpb248L3N0cm9uZz5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJtYXRjaGluZy1pdGVtXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZTNmMmZkO1wiPlxyXG4gICAgICAgIDxzdHJvbmc+NC4gTm9ybWFsaXR5IHZpb2xhdGlvbjwvc3Ryb25nPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgXHJcbiAgICA8ZGl2IGNsYXNzPVwibWF0Y2hpbmctY29sdW1uXCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJtYXRjaGluZy1pdGVtXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZmZmM2UwO1wiPlxyXG4gICAgICAgIDxzdHJvbmc+KEEpPC9zdHJvbmc+IEJpYXNlZCBjb2VmZmljaWVudCBlc3RpbWF0ZXNcclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJtYXRjaGluZy1pdGVtXCIgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZmZmM2UwO1wiPlxyXG4gICAgICAgIDxzdHJvbmc+KEIpPC9zdHJvbmc+IFVucmVsaWFibGUgc3RhbmRhcmQgZXJyb3JzXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwibWF0Y2hpbmctaXRlbVwiIHN0eWxlPVwiYmFja2dyb3VuZDogI2ZmZjNlMDtcIj5cclxuICAgICAgICA8c3Ryb25nPihDKTwvc3Ryb25nPiBJbnZhbGlkIGh5cG90aGVzaXMgdGVzdHMgKGVzcGVjaWFsbHkgZm9yIHNtYWxsIHNhbXBsZXMpXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwibWF0Y2hpbmctaXRlbVwiIHN0eWxlPVwiYmFja2dyb3VuZDogI2ZmZjNlMDtcIj5cclxuICAgICAgICA8c3Ryb25nPihEKTwvc3Ryb25nPiBJbmNvcnJlY3QgcHJlZGljdGlvbnMgYW5kIFLCslxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgXHJcbiAgICA8Y2FudmFzIGNsYXNzPVwibGluZS1jYW52YXMgZnJhZ21lbnRcIiBpZD1cImxpbmUxXCIgd2lkdGg9XCI4MDBcIiBoZWlnaHQ9XCI0MDBcIj48L2NhbnZhcz5cclxuICAgIDxjYW52YXMgY2xhc3M9XCJsaW5lLWNhbnZhcyBmcmFnbWVudFwiIGlkPVwibGluZTJcIiB3aWR0aD1cIjgwMFwiIGhlaWdodD1cIjQwMFwiPjwvY2FudmFzPlxyXG4gICAgPGNhbnZhcyBjbGFzcz1cImxpbmUtY2FudmFzIGZyYWdtZW50XCIgaWQ9XCJsaW5lM1wiIHdpZHRoPVwiODAwXCIgaGVpZ2h0PVwiNDAwXCI+PC9jYW52YXM+XHJcbiAgICA8Y2FudmFzIGNsYXNzPVwibGluZS1jYW52YXMgZnJhZ21lbnRcIiBpZD1cImxpbmU0XCIgd2lkdGg9XCI4MDBcIiBoZWlnaHQ9XCI0MDBcIj48L2NhbnZhcz5cclxuICA8L2Rpdj5cclxuPC9kaXY+XHJcblxyXG48ZGl2IGNsYXNzPVwiZnJhZ21lbnRcIiBzdHlsZT1cIm1hcmdpbi10b3A6IDIwcHg7IHBhZGRpbmc6IDE1cHg7IGJhY2tncm91bmQ6ICNkNWY0ZTY7IGJvcmRlci1yYWRpdXM6IDhweDtcIj5cclxuICA8cD48c3Ryb25nPuKckyBDb3JyZWN0IEFuc3dlcnM6PC9zdHJvbmc+PC9wPlxyXG4gIDx1bCBzdHlsZT1cIm1hcmdpbjogNXB4IDA7XCI+XHJcbiAgICA8bGk+PHN0cm9uZz4xIOKGkiBEOjwvc3Ryb25nPiBMaW5lYXJpdHkgdmlvbGF0aW9uIGxlYWRzIHRvIGluY29ycmVjdCBwcmVkaWN0aW9ucyBhbmQgUsKyPC9saT5cclxuICAgIDxsaT48c3Ryb25nPjIg4oaSIEE6PC9zdHJvbmc+IEluZGVwZW5kZW5jZSB2aW9sYXRpb24gbGVhZHMgdG8gYmlhc2VkIGNvZWZmaWNpZW50IGVzdGltYXRlczwvbGk+XHJcbiAgICA8bGk+PHN0cm9uZz4zIOKGkiBCOjwvc3Ryb25nPiBIb21vc2NlZGFzdGljaXR5IHZpb2xhdGlvbiBsZWFkcyB0byB1bnJlbGlhYmxlIHN0YW5kYXJkIGVycm9yczwvbGk+XHJcbiAgICA8bGk+PHN0cm9uZz40IOKGkiBDOjwvc3Ryb25nPiBOb3JtYWxpdHkgdmlvbGF0aW9uIGxlYWRzIHRvIGludmFsaWQgaHlwb3RoZXNpcyB0ZXN0czwvbGk+XHJcbiAgPC91bD5cclxuPC9kaXY+XHJcblxyXG48c2NyaXB0PlxyXG4oZnVuY3Rpb24oKSB7XHJcbiAgZnVuY3Rpb24gZHJhd0xpbmUoY2FudmFzSWQsIHkxUGVyY2VudCwgeTJQZXJjZW50LCBjb2xvcikge1xyXG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FudmFzSWQpO1xyXG4gICAgaWYgKCFjYW52YXMpIHJldHVybjtcclxuICAgIFxyXG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBjb25zdCB3aWR0aCA9IGNhbnZhcy53aWR0aDtcclxuICAgIGNvbnN0IGhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICBcclxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvciB8fCAnI2U3NGMzYyc7XHJcbiAgICBjdHgubGluZVdpZHRoID0gNDtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIGN0eC5tb3ZlVG8od2lkdGggKiAwLjQyLCBoZWlnaHQgKiB5MVBlcmNlbnQpO1xyXG4gICAgY3R4LmxpbmVUbyh3aWR0aCAqIDAuNTgsIGhlaWdodCAqIHkyUGVyY2VudCk7XHJcbiAgICBjdHguc3Ryb2tlKCk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIERyYXcgbGluZXMgd2l0aCBhIGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHlcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIGRyYXdMaW5lKCdsaW5lMScsIDAuMTUsIDAuODUsICcjZTc0YzNjJyk7IC8vIFExIHRvIERcclxuICAgIGRyYXdMaW5lKCdsaW5lMicsIDAuMzcsIDAuMTUsICcjZTc0YzNjJyk7IC8vIFEyIHRvIEFcclxuICAgIGRyYXdMaW5lKCdsaW5lMycsIDAuNjIsIDAuMzcsICcjZTc0YzNjJyk7IC8vIFEzIHRvIEJcclxuICAgIGRyYXdMaW5lKCdsaW5lNCcsIDAuODcsIDAuNjIsICcjZTc0YzNjJyk7IC8vIFE0IHRvIENcclxuICB9LCA1MDApO1xyXG4gIFxyXG4gIC8vIFJlZHJhdyB3aGVuIFJldmVhbCBmcmFnbWVudHMgYXJlIHNob3duXHJcbiAgaWYgKHdpbmRvdy5SZXZlYWwpIHtcclxuICAgIFJldmVhbC5vbignZnJhZ21lbnRzaG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGRyYXdMaW5lKCdsaW5lMScsIDAuMTUsIDAuODUsICcjZTc0YzNjJyk7XHJcbiAgICAgICAgZHJhd0xpbmUoJ2xpbmUyJywgMC4zNywgMC4xNSwgJyNlNzRjM2MnKTtcclxuICAgICAgICBkcmF3TGluZSgnbGluZTMnLCAwLjYyLCAwLjM3LCAnI2U3NGMzYycpO1xyXG4gICAgICAgIGRyYXdMaW5lKCdsaW5lNCcsIDAuODcsIDAuNjIsICcjZTc0YzNjJyk7XHJcbiAgICAgIH0sIDEwMCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0pKCk7XHJcbjwvc2NyaXB0PlxyXG5gXHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNDYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ7XHJcbiAgY29uc3QgcmVzaWR1YWxEYXRhID0gbGVtb25hZGVEYXRhLm1hcCgoZCwgaW5kZXgpID0+IHtcclxuICAgIGNvbnN0IHByZWRpY3RlZCA9IG9wdGltYWxMaW5lLmludGVyY2VwdCArIG9wdGltYWxMaW5lLnNsb3BlICogZC50ZW1wZXJhdHVyZTtcclxuICAgIGNvbnN0IHJlc2lkdWFsID0gZC5zYWxlcyAtIHByZWRpY3RlZDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGRheTogZC5kYXksXHJcbiAgICAgIGRheUluZGV4OiBpbmRleCArIDEsXHJcbiAgICAgIHJlc2lkdWFsOiByZXNpZHVhbCxcclxuICAgICAgZml0dGVkOiBwcmVkaWN0ZWQsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiBkLnRlbXBlcmF0dXJlLFxyXG4gICAgICBzYWxlczogZC5zYWxlc1xyXG4gICAgfTtcclxuICB9KTtcclxuICBcclxuICBjb25zdCByZXNpZHVhbHMgPSByZXNpZHVhbERhdGEubWFwKGQgPT4gZC5yZXNpZHVhbCk7XHJcbiAgY29uc3QgbWVhblJlc2lkdWFsID0gcmVzaWR1YWxzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApIC8gcmVzaWR1YWxzLmxlbmd0aDtcclxuICBjb25zdCBzdGRSZXNpZHVhbCA9IE1hdGguc3FydChyZXNpZHVhbHMucmVkdWNlKChzcSwgbikgPT4gc3EgKyBNYXRoLnBvdyhuIC0gbWVhblJlc2lkdWFsLCAyKSwgMCkgLyAocmVzaWR1YWxzLmxlbmd0aCAtIDEpKTtcclxuICBcclxuICBjb25zdCBzb3J0ZWRSZXNpZHVhbHMgPSBbLi4ucmVzaWR1YWxzXS5zb3J0KChhLCBiKSA9PiBhIC0gYik7XHJcbiAgY29uc3QgcXFEYXRhID0gc29ydGVkUmVzaWR1YWxzLm1hcCgociwgaSkgPT4ge1xyXG4gICAgY29uc3QgdGhlb3JldGljYWxRdWFudGlsZSA9IChpICsgMC41KSAvIHJlc2lkdWFscy5sZW5ndGg7XHJcbiAgICBjb25zdCB6ID0gdGhlb3JldGljYWxRdWFudGlsZSA8IDAuNSBcclxuICAgICAgPyAtTWF0aC5zcXJ0KC0yICogTWF0aC5sb2codGhlb3JldGljYWxRdWFudGlsZSkpXHJcbiAgICAgIDogTWF0aC5zcXJ0KC0yICogTWF0aC5sb2coMSAtIHRoZW9yZXRpY2FsUXVhbnRpbGUpKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRoZW9yZXRpY2FsOiB6LFxyXG4gICAgICBzYW1wbGU6IChyIC0gbWVhblJlc2lkdWFsKSAvIHN0ZFJlc2lkdWFsXHJcbiAgICB9O1xyXG4gIH0pO1xyXG4gIFxyXG4gIGNvbnN0IHNjYWxlTG9jYXRpb25EYXRhID0gcmVzaWR1YWxEYXRhLm1hcChkID0+ICh7XHJcbiAgICBmaXR0ZWQ6IGQuZml0dGVkLFxyXG4gICAgc3FydEFic1Jlc2lkdWFsOiBNYXRoLnNxcnQoTWF0aC5hYnMoKGQucmVzaWR1YWwgLSBtZWFuUmVzaWR1YWwpIC8gc3RkUmVzaWR1YWwpKVxyXG4gIH0pKTtcclxuICBcclxuICBjb25zdCBtZWFuVGVtcCA9IGxlbW9uYWRlRGF0YS5yZWR1Y2UoKHN1bSwgZCkgPT4gc3VtICsgZC50ZW1wZXJhdHVyZSwgMCkgLyBsZW1vbmFkZURhdGEubGVuZ3RoO1xyXG4gIGNvbnN0IHNzWCA9IGxlbW9uYWRlRGF0YS5yZWR1Y2UoKHN1bSwgZCkgPT4gc3VtICsgTWF0aC5wb3coZC50ZW1wZXJhdHVyZSAtIG1lYW5UZW1wLCAyKSwgMCk7XHJcbiAgXHJcbiAgY29uc3QgbGV2ZXJhZ2VEYXRhID0gcmVzaWR1YWxEYXRhLm1hcChkID0+IHtcclxuICAgIGNvbnN0IGxldmVyYWdlID0gMS9yZXNpZHVhbHMubGVuZ3RoICsgTWF0aC5wb3coZC50ZW1wZXJhdHVyZSAtIG1lYW5UZW1wLCAyKSAvIHNzWDtcclxuICAgIGNvbnN0IHN0YW5kYXJkaXplZFJlc2lkdWFsID0gKGQucmVzaWR1YWwgLSBtZWFuUmVzaWR1YWwpIC8gc3RkUmVzaWR1YWw7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBsZXZlcmFnZTogbGV2ZXJhZ2UsXHJcbiAgICAgIHN0YW5kYXJkaXplZFJlc2lkdWFsOiBzdGFuZGFyZGl6ZWRSZXNpZHVhbCxcclxuICAgICAgZGF5OiBkLmRheVxyXG4gICAgfTtcclxuICB9KTtcclxuICBcclxuICByZXR1cm4gaHRtbGBcclxuICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMjBweDsgbWFyZ2luOiAyMHB4IDA7XCI+XHJcbiAgICAgIFxyXG4gICAgICA8IS0tIFBsb3QgMTogUmVzaWR1YWxzIHZzLiBGaXR0ZWQgLS0+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7XCI+XHJcbiAgICAgICAgPGg0IHN0eWxlPVwiY29sb3I6ICMyOTgwYjk7IG1hcmdpbi10b3A6IDA7XCI+MS4gUmVzaWR1YWxzIHZzLiBGaXR0ZWQgVmFsdWVzPC9oND5cclxuICAgICAgICAke1Bsb3QucGxvdCh7XHJcbiAgICAgICAgICBtYXJrczogW1xyXG4gICAgICAgICAgICBQbG90LnJ1bGVZKFswXSwge3N0cm9rZTogXCIjZTc0YzNjXCIsIHN0cm9rZVdpZHRoOiAxLCBzdHJva2VEYXNoYXJyYXk6IFwiMywzXCJ9KSxcclxuICAgICAgICAgICAgUGxvdC5kb3QocmVzaWR1YWxEYXRhLCB7XHJcbiAgICAgICAgICAgICAgeDogXCJmaXR0ZWRcIiwgXHJcbiAgICAgICAgICAgICAgeTogXCJyZXNpZHVhbFwiLCBcclxuICAgICAgICAgICAgICBmaWxsOiBcIiMzNDk4ZGJcIiwgXHJcbiAgICAgICAgICAgICAgcjogNSxcclxuICAgICAgICAgICAgICB0aXRsZTogZCA9PiBgRGF5ICR7ZC5kYXl9OiBl4bWiID0gJHtkLnJlc2lkdWFsLnRvRml4ZWQoMSl9YFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgUGxvdC5saW5lKFxyXG4gICAgICAgICAgICAgIHJlc2lkdWFsRGF0YS5tYXAoZCA9PiBkKS5zb3J0KChhLCBiKSA9PiBhLmZpdHRlZCAtIGIuZml0dGVkKSxcclxuICAgICAgICAgICAgICBQbG90LndpbmRvd1koe2s6IDUsIHJlZHVjZTogXCJtZWFuXCIsIHg6IFwiZml0dGVkXCIsIHk6IFwicmVzaWR1YWxcIiwgc3Ryb2tlOiBcIiNlNjdlMjJcIiwgc3Ryb2tlV2lkdGg6IDJ9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgICAgeDoge2xhYmVsOiBcIkZpdHRlZCBWYWx1ZXMgKMW34bWiKVwifSxcclxuICAgICAgICAgIHk6IHtsYWJlbDogXCJSZXNpZHVhbHMgKGXhtaIgPSB54bWiIC0gxbfhtaIpXCIsIGdyaWQ6IHRydWV9LFxyXG4gICAgICAgICAgd2lkdGg6IDM1MCxcclxuICAgICAgICAgIGhlaWdodDogMjgwXHJcbiAgICAgICAgfSl9XHJcbiAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDEycHg7IGNvbG9yOiAjN2Y4YzhkOyBtYXJnaW4tdG9wOiA4cHg7XCI+XHJcbiAgICAgICAgICA8c3Ryb25nPkZvcm11bGE6PC9zdHJvbmc+IGXhtaIgPSB54bWiIC0gxbfhtaI8YnI+XHJcbiAgICAgICAgICA8c3Ryb25nPkNoZWNrczo8L3N0cm9uZz4gTGluZWFyaXR5ICYgSG9tb3NjZWRhc3RpY2l0eTxicj5cclxuICAgICAgICAgIDxzdHJvbmc+TG9vayBmb3I6PC9zdHJvbmc+IFJhbmRvbSBzY2F0dGVyLCBubyBwYXR0ZXJuc1xyXG4gICAgICAgIDwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIFxyXG4gICAgICA8IS0tIFBsb3QgMjogUS1RIFBsb3QgLS0+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7XCI+XHJcbiAgICAgICAgPGg0IHN0eWxlPVwiY29sb3I6ICM4ZTQ0YWQ7IG1hcmdpbi10b3A6IDA7XCI+Mi4gTm9ybWFsIFEtUSBQbG90PC9oND5cclxuICAgICAgICAke1Bsb3QucGxvdCh7XHJcbiAgICAgICAgICBtYXJrczogW1xyXG4gICAgICAgICAgICBQbG90LmxpbmUoXHJcbiAgICAgICAgICAgICAgW3t4OiAtMywgeTogLTN9LCB7eDogMywgeTogM31dLFxyXG4gICAgICAgICAgICAgIHt4OiBcInhcIiwgeTogXCJ5XCIsIHN0cm9rZTogXCIjZTc0YzNjXCIsIHN0cm9rZVdpZHRoOiAxLCBzdHJva2VEYXNoYXJyYXk6IFwiMywzXCJ9XHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIFBsb3QuZG90KHFxRGF0YSwge1xyXG4gICAgICAgICAgICAgIHg6IFwidGhlb3JldGljYWxcIiwgXHJcbiAgICAgICAgICAgICAgeTogXCJzYW1wbGVcIiwgXHJcbiAgICAgICAgICAgICAgZmlsbDogXCIjOWI1OWI2XCIsIFxyXG4gICAgICAgICAgICAgIHI6IDUsXHJcbiAgICAgICAgICAgICAgdGl0bGU6IGQgPT4gYFRoZW9yZXRpY2FsOiAke2QudGhlb3JldGljYWwudG9GaXhlZCgyKX0sIFNhbXBsZTogJHtkLnNhbXBsZS50b0ZpeGVkKDIpfWBcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICB4OiB7bGFiZWw6IFwiVGhlb3JldGljYWwgUXVhbnRpbGVzXCJ9LFxyXG4gICAgICAgICAgeToge2xhYmVsOiBcIlN0YW5kYXJkaXplZCBSZXNpZHVhbHMgKHLhtaIpXCIsIGdyaWQ6IHRydWV9LFxyXG4gICAgICAgICAgd2lkdGg6IDM1MCxcclxuICAgICAgICAgIGhlaWdodDogMjgwXHJcbiAgICAgICAgfSl9XHJcbiAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDEycHg7IGNvbG9yOiAjN2Y4YzhkOyBtYXJnaW4tdG9wOiA4cHg7XCI+XHJcbiAgICAgICAgICA8c3Ryb25nPkZvcm11bGE6PC9zdHJvbmc+IHLhtaIgPSAoZeG1oiAtIMSTKSAvIHPigpEsIHPigpEgPSDiiJpbzqNl4bWiwrIvKG4tMildPGJyPlxyXG4gICAgICAgICAgPHN0cm9uZz5DaGVja3M6PC9zdHJvbmc+IE5vcm1hbGl0eSBvZiBSZXNpZHVhbHM8YnI+XHJcbiAgICAgICAgICA8c3Ryb25nPkxvb2sgZm9yOjwvc3Ryb25nPiBQb2ludHMgb24gZGlhZ29uYWwgbGluZVxyXG4gICAgICAgIDwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIFxyXG4gICAgICA8IS0tIFBsb3QgMzogU2NhbGUtTG9jYXRpb24gLS0+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZjhmOWZhOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7XCI+XHJcbiAgICAgICAgPGg0IHN0eWxlPVwiY29sb3I6ICNlNjdlMjI7IG1hcmdpbi10b3A6IDA7XCI+My4gU2NhbGUtTG9jYXRpb24gUGxvdDwvaDQ+XHJcbiAgICAgICAgJHtQbG90LnBsb3Qoe1xyXG4gICAgICAgICAgbWFya3M6IFtcclxuICAgICAgICAgICAgUGxvdC5kb3Qoc2NhbGVMb2NhdGlvbkRhdGEsIHtcclxuICAgICAgICAgICAgICB4OiBcImZpdHRlZFwiLCBcclxuICAgICAgICAgICAgICB5OiBcInNxcnRBYnNSZXNpZHVhbFwiLCBcclxuICAgICAgICAgICAgICBmaWxsOiBcIiNlNjdlMjJcIiwgXHJcbiAgICAgICAgICAgICAgcjogNSxcclxuICAgICAgICAgICAgICB0aXRsZTogZCA9PiBg4oiafHLhtaJ8ID0gJHtkLnNxcnRBYnNSZXNpZHVhbC50b0ZpeGVkKDIpfWBcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIFBsb3QubGluZShcclxuICAgICAgICAgICAgICBzY2FsZUxvY2F0aW9uRGF0YS5tYXAoZCA9PiBkKS5zb3J0KChhLCBiKSA9PiBhLmZpdHRlZCAtIGIuZml0dGVkKSxcclxuICAgICAgICAgICAgICBQbG90LndpbmRvd1koe2s6IDUsIHJlZHVjZTogXCJtZWFuXCIsIHg6IFwiZml0dGVkXCIsIHk6IFwic3FydEFic1Jlc2lkdWFsXCIsIHN0cm9rZTogXCIjYzAzOTJiXCIsIHN0cm9rZVdpZHRoOiAyfSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIHg6IHtsYWJlbDogXCJGaXR0ZWQgVmFsdWVzICjFt+G1oilcIn0sXHJcbiAgICAgICAgICB5OiB7bGFiZWw6IFwi4oiafFN0YW5kYXJkaXplZCBSZXNpZHVhbHN8ID0g4oiafHLhtaJ8XCIsIGdyaWQ6IHRydWV9LFxyXG4gICAgICAgICAgd2lkdGg6IDM1MCxcclxuICAgICAgICAgIGhlaWdodDogMjgwXHJcbiAgICAgICAgfSl9XHJcbiAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDEycHg7IGNvbG9yOiAjN2Y4YzhkOyBtYXJnaW4tdG9wOiA4cHg7XCI+XHJcbiAgICAgICAgICA8c3Ryb25nPkZvcm11bGE6PC9zdHJvbmc+IOKImnxy4bWifCA9IOKImnwoZeG1oiAtIMSTKSAvIHPigpF8PGJyPlxyXG4gICAgICAgICAgPHN0cm9uZz5DaGVja3M6PC9zdHJvbmc+IEhvbW9zY2VkYXN0aWNpdHk8YnI+XHJcbiAgICAgICAgICA8c3Ryb25nPkxvb2sgZm9yOjwvc3Ryb25nPiBIb3Jpem9udGFsIGxpbmUsIGNvbnN0YW50IHNwcmVhZFxyXG4gICAgICAgIDwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIFxyXG4gICAgICA8IS0tIFBsb3QgNDogUmVzaWR1YWxzIHZzLiBMZXZlcmFnZSAtLT5cclxuICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6ICNmOGY5ZmE7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDtcIj5cclxuICAgICAgICA8aDQgc3R5bGU9XCJjb2xvcjogIzI3YWU2MDsgbWFyZ2luLXRvcDogMDtcIj40LiBSZXNpZHVhbHMgdnMuIExldmVyYWdlPC9oND5cclxuICAgICAgICAke1Bsb3QucGxvdCh7XHJcbiAgICAgICAgICBtYXJrczogW1xyXG4gICAgICAgICAgICBQbG90LnJ1bGVZKFswXSwge3N0cm9rZTogXCIjZTc0YzNjXCIsIHN0cm9rZVdpZHRoOiAxLCBzdHJva2VEYXNoYXJyYXk6IFwiMywzXCJ9KSxcclxuICAgICAgICAgICAgUGxvdC5ydWxlWShbMiwgLTJdLCB7c3Ryb2tlOiBcIiNlNzRjM2NcIiwgc3Ryb2tlV2lkdGg6IDEsIG9wYWNpdHk6IDAuM30pLFxyXG4gICAgICAgICAgICBQbG90LmRvdChsZXZlcmFnZURhdGEsIHtcclxuICAgICAgICAgICAgICB4OiBcImxldmVyYWdlXCIsIFxyXG4gICAgICAgICAgICAgIHk6IFwic3RhbmRhcmRpemVkUmVzaWR1YWxcIiwgXHJcbiAgICAgICAgICAgICAgZmlsbDogXCIjMjdhZTYwXCIsIFxyXG4gICAgICAgICAgICAgIHI6IDUsXHJcbiAgICAgICAgICAgICAgdGl0bGU6IGQgPT4gYERheSAke2QuZGF5fTogaOG1ouG1oj0ke2QubGV2ZXJhZ2UudG9GaXhlZCgzKX0sIHLhtaI9JHtkLnN0YW5kYXJkaXplZFJlc2lkdWFsLnRvRml4ZWQoMil9YFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIHg6IHtsYWJlbDogXCJMZXZlcmFnZSAoaOG1ouG1oilcIiwgZG9tYWluOiBbMCwgTWF0aC5tYXgoLi4ubGV2ZXJhZ2VEYXRhLm1hcChkID0+IGQubGV2ZXJhZ2UpKSAqIDEuMV19LFxyXG4gICAgICAgICAgeToge2xhYmVsOiBcIlN0YW5kYXJkaXplZCBSZXNpZHVhbHMgKHLhtaIpXCIsIGdyaWQ6IHRydWV9LFxyXG4gICAgICAgICAgd2lkdGg6IDM1MCxcclxuICAgICAgICAgIGhlaWdodDogMjgwXHJcbiAgICAgICAgfSl9XHJcbiAgICAgICAgPHAgc3R5bGU9XCJmb250LXNpemU6IDEycHg7IGNvbG9yOiAjN2Y4YzhkOyBtYXJnaW4tdG9wOiA4cHg7XCI+XHJcbiAgICAgICAgICA8c3Ryb25nPkZvcm11bGE6PC9zdHJvbmc+IGjhtaLhtaIgPSAxL24gKyAoeOG1oiAtIHjMhCnCsiAvIM6jKHjisbwgLSB4zIQpwrI8YnI+XHJcbiAgICAgICAgICA8c3Ryb25nPkNoZWNrczo8L3N0cm9uZz4gSW5mbHVlbnRpYWwgT2JzZXJ2YXRpb25zPGJyPlxyXG4gICAgICAgICAgPHN0cm9uZz5Mb29rIGZvcjo8L3N0cm9uZz4gSGlnaCBsZXZlcmFnZSArIGxhcmdlIHJlc2lkdWFsc1xyXG4gICAgICAgIDwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIFxyXG4gICAgPC9kaXY+XHJcbiAgICBcclxuICAgIDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kOiAjZThmNGY4OyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbi10b3A6IDIwcHg7XCI+XHJcbiAgICAgIDxoNCBzdHlsZT1cImNvbG9yOiAjMmMzZTUwOyBtYXJnaW4tdG9wOiAwO1wiPvCfk4sgUXVpY2sgSW50ZXJwcmV0YXRpb24gR3VpZGU8L2g0PlxyXG4gICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmcjsgZ2FwOiAxNXB4O1wiPlxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogNXB4IDA7XCI+PHN0cm9uZyBzdHlsZT1cImNvbG9yOiAjMjk4MGI5O1wiPvCfk5AgS2V5IEZvcm11bGFzOjwvc3Ryb25nPjwvcD5cclxuICAgICAgICAgIDx1bCBzdHlsZT1cIm1hcmdpbjogNXB4IDA7IGZvbnQtc2l6ZTogMTJweDtcIj5cclxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+UmF3IHJlc2lkdWFsOjwvc3Ryb25nPiBl4bWiID0geeG1oiAtIMW34bWiPC9saT5cclxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+U3RhbmRhcmRpemVkOjwvc3Ryb25nPiBy4bWiID0gKGXhtaIgLSDEkykgLyBz4oKRPC9saT5cclxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+TGV2ZXJhZ2U6PC9zdHJvbmc+IGjhtaLhtaIg4oiIIFsxL24sIDFdPC9saT5cclxuICAgICAgICAgICAgPGxpPjxzdHJvbmc+QXZnIGxldmVyYWdlOjwvc3Ryb25nPiAocCsxKS9uID0gMi9uPC9saT5cclxuICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgIDxwIHN0eWxlPVwibWFyZ2luOiA1cHggMDtcIj48c3Ryb25nIHN0eWxlPVwiY29sb3I6ICMyN2FlNjA7XCI+4pyTIEdvb2QgU2lnbnM6PC9zdHJvbmc+PC9wPlxyXG4gICAgICAgICAgPHVsIHN0eWxlPVwibWFyZ2luOiA1cHggMDsgZm9udC1zaXplOiAxMnB4O1wiPlxyXG4gICAgICAgICAgICA8bGk+UmFuZG9tIHNjYXR0ZXIgaW4gcGxvdHMgMSAmIDM8L2xpPlxyXG4gICAgICAgICAgICA8bGk+UG9pbnRzIG9uIGRpYWdvbmFsIGluIFEtUSBwbG90PC9saT5cclxuICAgICAgICAgICAgPGxpPk5vIGhpZ2gtbGV2ZXJhZ2Ugb3V0bGllcnM8L2xpPlxyXG4gICAgICAgICAgICA8bGk+SG9yaXpvbnRhbCBzbW9vdGhpbmcgbGluZXM8L2xpPlxyXG4gICAgICAgICAgPC91bD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46IDVweCAwO1wiPjxzdHJvbmcgc3R5bGU9XCJjb2xvcjogI2U3NGMzYztcIj7inJcgV2FybmluZyBTaWduczo8L3N0cm9uZz48L3A+XHJcbiAgICAgICAgICA8dWwgc3R5bGU9XCJtYXJnaW46IDVweCAwOyBmb250LXNpemU6IDEycHg7XCI+XHJcbiAgICAgICAgICAgIDxsaT5QYXR0ZXJucy9jdXJ2ZXMgaW4gcmVzaWR1YWwgcGxvdHM8L2xpPlxyXG4gICAgICAgICAgICA8bGk+RnVubmVsIHNoYXBlcyAoaGV0ZXJvc2NlZGFzdGljaXR5KTwvbGk+XHJcbiAgICAgICAgICAgIDxsaT5Qb2ludHMgZmFyIGZyb20gUS1RIGRpYWdvbmFsPC9saT5cclxuICAgICAgICAgICAgPGxpPmjhtaLhtaIgPiAyKHArMSkvbiB3aXRoIHxy4bWifCA+IDI8L2xpPlxyXG4gICAgICAgICAgPC91bD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG59XHJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNDciLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJodG1sYFxyXG48ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogI2U4ZjRmODsgcGFkZGluZzogMjVweDsgYm9yZGVyLXJhZGl1czogMTJweDsgbWFyZ2luOiAyMHB4IDA7XCI+XHJcblxyXG48ZGl2IHN0eWxlPVwiZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOyBnYXA6IDI1cHg7XCI+XHJcblxyXG48ZGl2PlxyXG48aDQgc3R5bGU9XCJjb2xvcjogIzI5ODBiOTsgbWFyZ2luLXRvcDogMDtcIj7wn46vIEtleSBFeHRlbnNpb25zPC9oND5cclxuPHVsPlxyXG48bGk+PHN0cm9uZz5QYXJ0aWFsIGVmZmVjdHM6PC9zdHJvbmc+IEVhY2ggzrIgc2hvd3MgZWZmZWN0IFwiaG9sZGluZyBvdGhlcnMgY29uc3RhbnRcIjwvbGk+XHJcbjxsaT48c3Ryb25nPk1hdHJpeCBub3RhdGlvbjo8L3N0cm9uZz4gzrLMgiA9IChY4bWAWCnigbvCuVjhtYB5PC9saT5cclxuPGxpPjxzdHJvbmc+U2FtZSBhc3N1bXB0aW9uczwvc3Ryb25nPiBhcHBseSAoTElORSk8L2xpPlxyXG48bGk+PHN0cm9uZz5TdGFuZGFyZGl6ZWQgY29lZmZpY2llbnRzPC9zdHJvbmc+IGNvbXBhcmUgZWZmZWN0IHNpemVzPC9saT5cclxuPC91bD5cclxuPC9kaXY+XHJcblxyXG48ZGl2PlxyXG48aDQgc3R5bGU9XCJjb2xvcjogIzI3YWU2MDsgbWFyZ2luLXRvcDogMDtcIj7wn5KhIFdoYXQgRG9lc24ndCBDaGFuZ2U8L2g0PlxyXG48dWw+XHJcbjxsaT5TdGlsbCBtaW5pbWl6ZSBTU0UgKE9MUyBwcmluY2lwbGUpPC9saT5cclxuPGxpPlN0aWxsIGNoZWNrIGRpYWdub3N0aWMgcGxvdHM8L2xpPlxyXG48bGk+U3RpbGwgaW50ZXJwcmV0IGNvZWZmaWNpZW50cyBjYXJlZnVsbHk8L2xpPlxyXG48bGk+U3RpbGwgdXNlIFLCsiAvIEFkanVzdGVkIFLCsjwvbGk+XHJcbjwvdWw+XHJcbjwvZGl2PlxyXG5cclxuPC9kaXY+XHJcblxyXG48ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDogI2ZmZjNjZDsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW4tdG9wOiAyMHB4O1wiPlxyXG48cCBzdHlsZT1cIm1hcmdpbjogNXB4IDA7XCI+PHN0cm9uZz7wn5OaIEZvciBGdXJ0aGVyIFN0dWR5Ojwvc3Ryb25nPjwvcD5cclxuPHVsIHN0eWxlPVwibWFyZ2luOiA1cHggMDsgZm9udC1zaXplOiAxNHB4O1wiPlxyXG48bGk+Q2hlY2sgb3V0IHRoZSBmdWxsIHNsaWRlcyBmb3IgbWF0cml4IGRlcml2YXRpb25zIGFuZCBpbnRlcmFjdGl2ZSBleGFtcGxlczwvbGk+XHJcbjxsaT5FeHBsb3JlIG11bHRpY29sbGluZWFyaXR5LCBpbnRlcmFjdGlvbiB0ZXJtcywgYW5kIG1vZGVsIHNlbGVjdGlvbjwvbGk+XHJcbjxsaT5QcmFjdGljZSB3aXRoIHJlYWwgZGF0YXNldHMgKGJleW9uZCBsZW1vbmFkZSBzdGFuZHMhKTwvbGk+XHJcbjwvdWw+XHJcbjwvZGl2PlxyXG5cclxuPC9kaXY+XHJcbmBcclxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdpbnRlcmNlcHQwJykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3Nsb3BlMCcpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdzZWxlY3RlZFBvaW50JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ2ludGVyY2VwdFBsYXknKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnc2xvcGVQbGF5JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ2ludGVyY2VwdEV4cGxvcmVyJykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3Nsb3BlRXhwbG9yZXInKSJ9XX0=
    </script>
    <script type="module">
    if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
    window._ojs.paths.runtimeToDoc = "../../..";
    window._ojs.paths.runtimeToRoot = "../../..";
    window._ojs.paths.docToRoot = "";
    window._ojs.selfContained = false;
    window._ojs.runtime.interpretFromScriptTags();
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>